(function(t){function e(e){for(var a,r,o=e[0],c=e[1],l=e[2],d=0,h=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&h.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(h.length)h.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(a=!1)}a&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},s={app:0},i=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"100d":function(t,e,n){},2386:function(t,e,n){"use strict";var a=n("ccc1"),s=n.n(a);s.a},"3adb":function(t,e,n){},"558f":function(t,e,n){},"55b2":function(t,e,n){"use strict";var a=n("558f"),s=n.n(a);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],r=(n("5c0b"),n("2877")),o={},c=Object(r["a"])(o,s,i,!1,null,null,null),l=c.exports,u=n("9483");Object(u["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var d=n("8c4f"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"game"},[n("a-scene",{attrs:{"vr-mode-ui":"enabled: false"}},[n("a-assets",{ref:"assets"},[n("a-asset-item",{attrs:{id:"virus1",src:"static_assets/models/Virus01.glb"}})],1),n("a-entity",{attrs:{bullet:"name: normal; speed: 30.0; poolSize: 20",geometry:"primitive: icosahedron; radius: 0.1;",material:"color: #000; emissiveIntensity: 0.5; emissive: #000"}}),n("a-entity",{staticClass:"enemies",attrs:{id:"enemy1","animation-mixer":"",target:"static: false",enemy:"assetId: virus1;","random-spawn":"min: -10 -1 -10;\n                    max: 10 2 10;\n                    radius: 2",visible:"false",animation:"property: position;\n                 to: 0 1.6 0;\n                 dur: 20000;\n                 easing: easeInOutCubic;\n                 startEvents: spawn;\n                 pauseEvents: die"}}),n("a-entity",{attrs:{id:"player",position:"0 1.6 0","sphere-collider":"objects: .enemies; radius: 0.5",geometry:"primitive: sphere; radius: 0.5"}},[n("a-camera",{attrs:{id:"camera",position:"0 0 0",shooter:"activeBulletType: normal",player:"ammo: 10"}})],1)],1),n(t.hudComponent,{tag:"component",on:{reload:t.reload}})],1)},m=[],p=n("b048"),v=n.n(p);n("b22d"),n("32c0"),n("b9a0"),n("c088");v.a.registerComponent("player",{schema:{ammo:{type:"number",default:5}},init:function(){this.ammo=this.data.ammo,this.shoot=this.shoot.bind(this),this.el.sceneEl.addEventListener("mousedown",this.shoot),this.reload=this.reload.bind(this),this.el.sceneEl.addEventListener("reload",this.reload)},shoot:function(){this.ammo>0?(this.ammo-=1,this.el.emit("shoot")):this.el.sceneEl.removeEventListener("mousedown",this.shoot)},reload:function(){this.ammo=this.data.ammo,this.el.sceneEl.addEventListener("mousedown",this.shoot)},remove:function(){this.el.sceneEl.removeEventListener("mousedown",this.shoot),this.el.sceneEl.removeEventListener("reload",this.reload)}});var f=n("2f62"),b={isPlaying:!0,time:120},g={isPlaying:function(t){var e=t.isPlaying;return e},time:function(t){var e=t.time;return e}},y={setIsPlaying:function(t,e){t.isPlaying=e},setTime:function(t,e){t.time=e}},w={play:function(t){var e=t.commit;e("setIsPlaying",!0),v.a.scenes[0].play()},pause:function(t){var e=t.commit;e("setIsPlaying",!1),v.a.scenes[0].pause()},setTime:function(t,e){var n=t.commit;n("setTime",e)},finishGame:function(){console.log("Game ended")}},_={namespaced:!0,actions:w,getters:g,mutations:y,state:b},x={score:0,health:100},C={score:function(t){var e=t.score;return e},health:function(t){var e=t.health;return e}},O={incrementScore:function(t,e){t.score+=e},decrementHealth:function(t,e){t.health-=e}},j={incrementScore:function(t,e){var n=t.commit;n("incrementScore",e)},decrementHealth:function(t,e){var n=t.commit,a=t.dispatch,s=t.state;s.health-e<=0?a("game/finishGame",null,{root:!0}):n("decrementHealth",e)}},E={namespaced:!0,actions:j,getters:C,mutations:O,state:x};a["a"].use(f["a"]);var z=new f["a"].Store({state:{},mutations:{},actions:{},modules:{game:_,player:E}});v.a.registerComponent("enemy",{schema:{assetId:{type:"string"},playerDamage:{type:"number",default:15},score:{type:"number",default:10},spawnRate:{type:"number",default:50}},init:function(){var t=this.el,e=this.data;t.setAttribute("gltf-model","#".concat(e.assetId)),this.damagePlayer=this.damagePlayer.bind(this),t.addEventListener("stateadded",this.damagePlayer),this.die=this.die.bind(this),t.addEventListener("die",this.die)},play:function(){this.spawn()},hide:function(t){t.setAttribute("visible","false")},die:function(){var t=this.el,e=this.data;this.hide(t),this.spawn(),z.dispatch("player/incrementScore",e.score)},damagePlayer:function(){var t=this.el,e=this.data;t.is("collided")&&(this.hide(t),this.spawn(),z.dispatch("player/decrementHealth",e.playerDamage))},spawn:function(){var t=this,e=this.el,n=this.data;clearInterval(this.spawnInterval),this.spawnInterval=setInterval((function(){var a=100*Math.random();a<=n.spawnRate&&(e.emit("spawn"),clearInterval(t.spawnInterval))}),5e3)},remove:function(){clearInterval(this.spawnInterval),this.el.removeEventListener("stateadded",this.damagePlayer)}});n("99af");v.a.registerComponent("random-spawn",{schema:{min:{type:"vec3",default:{x:0,y:0,z:0}},max:{type:"vec3",default:{x:0,y:0,z:0}},playerPos:{type:"vec3",default:{x:0,y:1.6,z:0}},radius:{type:"number",default:1}},init:function(){var t=this.el;this.spawn=this.spawn.bind(this),t.addEventListener("spawn",this.spawn)},randomNumber:function(t,e){return Math.random()*(e-t)+t},pointIsInSphere:function(t,e,n){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)+Math.pow(t.z-e.z,2))<=n},spawn:function(){var t=this.el,e=this.data,n=this.randomNumber(e.min.x,e.max.x),a=this.randomNumber(e.min.y,e.max.y),s=this.randomNumber(e.min.z,e.max.z),i=this.pointIsInSphere({x:n,y:a,z:s},e.playerPos,e.radius);i?this.spawn():(t.setAttribute("position","".concat(n," ").concat(a," ").concat(s)),t.setAttribute("visible","true"))},remove:function(){this.el.removeEventListener("spawn",this.spawn)}});var M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hud"},[n("health",{staticClass:"hud__health"}),n("timer",{staticClass:"hud__timer"}),n("score",{staticClass:"hud__score"}),n("cross-hair",{staticClass:"hud__crosshair"}),n("v-alert",{staticClass:"hud__alert",attrs:{duration:5e3}},[n("p",[t._v("Move your phone to look around.")]),n("p",[t._v("Tap anywhere to shoot.")])]),t.isPlaying?t._e():n("v-modal",{staticClass:"hud__paused"},[n("span",{staticClass:"hud__paused__icon"},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"}},[n("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),n("path",{attrs:{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}})])]),n("div",{staticClass:"hud__paused__title"},[t._v("Game Paused!")]),n("div",{staticClass:"hud__paused__actions"},[n("v-button",{attrs:{to:"/"}},[t._v("Leave Game")]),n("v-button",{on:{click:t.play}},[t._v("Continue")])],1)]),n("v-button",{staticClass:"hud__reload",attrs:{type:"fab"},on:{click:t.reload}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"36",viewBox:"0 0 24 24",width:"36"}},[n("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),n("path",{attrs:{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"}})])]),n("toggle-fullscreen",{staticClass:"hud__fullscreen"})],1)},P=[],S=n("5530"),I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"modal"},[n("div",{staticClass:"modal__content"},[t._t("default")],2)]),n("div",{staticClass:"modal__overlay"})])},H=[],T={name:"Modal"},k=T,L=(n("2386"),Object(r["a"])(k,I,H,!1,null,"9e5f3ffe",null)),$=L.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{class:["button","button--"+t.type],on:{click:t.click}},[t._t("default")],2)},A=[],B={PRIMARY:"primary",FAB:"fab"},F={name:"VButton",props:{type:{type:String,default:B.PRIMARY},to:{type:String,required:!1}},methods:{click:function(t){this.to&&this.$router.push({path:this.to}),this.$emit("click",t)}}},G=F,N=(n("cec3"),Object(r["a"])(G,V,A,!1,null,"9a2e40a0",null)),R=N.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"alert",staticClass:"alert"},[t._t("default")],2)},q=[],J=(n("a9e3"),{name:"Alert",props:{duration:{type:Number,default:3e3}},methods:{show:function(){var t=this.$refs.alert;t.classList.add("alert--active")},hide:function(){var t=this.$refs.alert;t.classList.remove("alert--active")}},mounted:function(){var t=this;this.show(),setTimeout((function(){t.hide()}),this.duration)}}),U=J,Y=(n("6e75"),Object(r["a"])(U,D,q,!1,null,"2927ecf7",null)),W=Y.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"health"},[n("div",{staticClass:"health__percent"},[n("span",{staticClass:"health__percent__text"},[t._v(t._s(t.health)+"%")])]),n("div",{staticClass:"health__bar"},[n("span",{staticClass:"health__bar__progress",style:{transform:"scaleX("+t.health/100+")"}})])])},K=[],Q={name:"Health",computed:Object(S["a"])({},Object(f["c"])("player",["health"]))},Z=Q,tt=(n("dd42"),Object(r["a"])(Z,X,K,!1,null,"f86fb16c",null)),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"timer"},[n("span",{staticClass:"timer__text"},[t._v(t._s(t.parsedTime))]),n("button",{staticClass:"timer__pause",on:{click:t.pause}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"}},[n("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),n("path",{attrs:{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}})])])])},at=[],st=(n("d3b7"),n("25f0"),n("4d90"),{name:"Timer",data:function(){return{time:0}},computed:Object(S["a"])(Object(S["a"])({},Object(f["c"])("game",{storeTime:"time",isPlaying:"isPlaying"})),{},{parsedTime:function(){var t=Math.floor(this.time/60),e=this.time-60*t;return"".concat(this.pad(t),":").concat(this.pad(e))}}),methods:Object(S["a"])(Object(S["a"])({},Object(f["b"])("game",["setTime","pause","finishGame"])),{},{startTimer:function(){var t=this;this.interval=setInterval((function(){t.isPlaying&&(t.time>0?t.time-=1:(t.setTime(t.time),t.finishGame(),clearInterval(t.interval)))}),1e3)},pad:function(t){return t.toString().padStart(2,"0")}}),mounted:function(){this.time=this.storeTime,this.startTimer()},removed:function(){clearInterval(this.interval)}}),it=st,rt=(n("ffa7"),Object(r["a"])(it,nt,at,!1,null,"32a59d76",null)),ot=rt.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"score"},[n("p",{staticClass:"score__title"},[t._v("Score")]),n("p",{staticClass:"score__content"},[t._v(t._s(t.score))])])},lt=[],ut={name:"Score",computed:Object(S["a"])({},Object(f["c"])("player",["score"]))},dt=ut,ht=(n("617b"),Object(r["a"])(dt,ct,lt,!1,null,"7682aedc",null)),mt=ht.exports,pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512",width:"48",height:"48","xml:space":"preserve",fill:"#a4a4a4"}},[n("path",{attrs:{d:"M256,0c-48.551,0-95.818,13.675-136.693,39.545\n           l16.044,25.35C171.419,42.066,213.139,30,256,30\n           c42.861,0,84.581,12.066,120.648,34.895l16.044-25.35C351.818,13.675,304.551,0,256,0z"}}),n("path",{attrs:{d:"M376.649,447.105C340.581,469.934,298.861,482,256,482\n           c-42.861,0-84.581-12.066-120.648-34.895l-16.044,25.35\n           C160.182,498.325,207.449,512,256,512c48.551,0,95.818-13.675,136.693-39.545\n           L376.649,447.105z"}}),n("path",{attrs:{d:"M472.455,119.307l-25.35,16.044C469.934,171.419,482,213.139,482,256\n           c0,42.861-12.066,84.581-34.895,120.648l25.35,16.044\n           C498.325,351.818,512,304.551,512,256\n           C512,207.449,498.325,160.182,472.455,119.307z"}}),n("path",{attrs:{d:"M64.895,135.352l-25.35-16.045C13.675,160.182,0,207.449,0,256\n           c0,48.551,13.675,95.818,39.545,136.693l25.35-16.044\n           C42.066,340.581,30,298.861,30,256\n           C30,213.139,42.066,171.419,64.895,135.352z"}}),n("path",{attrs:{d:"M256,204c-28.673,0-52,23.327-52,52c0,28.673,23.327,52,52,52\n           c28.673,0,52-23.327,52-52C308,227.327,284.673,204,256,204z\n           M256,278c-12.131,0-22-9.869-22-22s9.869-22,22-22\n           c12.131,0,22,9.869,22,22S268.131,278,256,278z"}})])},vt=[],ft={name:"CrossHair"},bt=ft,gt=Object(r["a"])(bt,pt,vt,!1,null,null,null),yt=gt.exports,wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fullscreen-button",on:{click:t.toggleFullScreen}},[t.isFullScreen?n("v-button",{attrs:{type:"fab"}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"36",viewBox:"0 0 24 24",width:"36"}},[n("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),n("path",{attrs:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z",fill:"#a4a4a4"}})])]):n("v-button",{attrs:{type:"fab"}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"36",viewBox:"0 0 24 24",width:"36"}},[n("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),n("path",{attrs:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z",fill:"#a4a4a4"}})])])],1)},_t=[],xt={name:"ToggleFullscreen",components:{VButton:R},data:function(){return{isFullScreen:!1}},methods:{toggleFullScreen:function(){document.fullscreenElement?(document.exitFullscreen(),this.isFullScreen=!1):(document.documentElement.requestFullscreen(),this.isFullScreen=!0)}}},Ct=xt,Ot=Object(r["a"])(Ct,wt,_t,!1,null,null,null),jt=Ot.exports,Et={name:"Hud",components:{VModal:$,VButton:R,VAlert:W,Health:et,Timer:ot,Score:mt,CrossHair:yt,ToggleFullscreen:jt},computed:Object(S["a"])({},Object(f["c"])("game",["isPlaying"])),methods:Object(S["a"])(Object(S["a"])({},Object(f["b"])("game",["play"])),{},{reload:function(){v.a.scenes[0].emit("reload")}})},zt=Et,Mt=(n("55b2"),Object(r["a"])(zt,M,P,!1,null,"3405ac39",null)),Pt=Mt.exports,St=(n("96cf"),n("1da1")),It={video:{width:{min:1280,ideal:1920,max:2560},height:{min:720,ideal:1080,max:1440},facingMode:"environment"}},Ht=function(){var t=document.getElementById("camera-stream");t.style.width="".concat(window.innerWidth,"px")},Tt=function(){var t=document.createElement("video");return t.id="camera-stream",t.setAttribute("autoplay",""),t.setAttribute("muted",""),t.setAttribute("playsinline",""),t.style.position="absolute",t.style.height="auto",t.style.top="0",t.style.left="0",t.style["z-index"]="-2",document.body.append(t),Ht(),window.addEventListener("resize",Ht),t},kt=function(){var t=Object(St["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.getUserMedia(It);case 2:e=t.sent,n=Tt(),n.srcObject=e;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Lt=function(){"mediaDevices"in navigator&&navigator.mediaDevices.getUserMedia&&kt()},$t={init:Lt},Vt={name:"Game",components:{Hud:Pt},data:function(){return{hudComponent:void 0}},mounted:function(){var t=this,e=this.$refs.assets;e.addEventListener("loaded",(function(){t.hudComponent=Pt,$t.init()}))}},At=Vt,Bt=Object(r["a"])(At,h,m,!1,null,null,null),Ft=Bt.exports;a["a"].use(d["a"]);var Gt=[{path:"/",name:"Game",component:Ft}],Nt=new d["a"]({mode:"history",base:"/",routes:Gt}),Rt=Nt;a["a"].config.productionTip=!1,a["a"].config.ignoredElements=["a-scene","a-assets","a-asset-item","a-entity","a-camera","a-gltf-model"],new a["a"]({router:Rt,store:z,render:function(t){return t(l)}}).$mount("#app")},"5b9a":function(t,e,n){},"5c0b":function(t,e,n){"use strict";var a=n("9c0c"),s=n.n(a);s.a},"617b":function(t,e,n){"use strict";var a=n("928b"),s=n.n(a);s.a},"6e75":function(t,e,n){"use strict";var a=n("100d"),s=n.n(a);s.a},"6fad":function(t,e,n){},"928b":function(t,e,n){},"9c0c":function(t,e,n){},ccc1:function(t,e,n){},cec3:function(t,e,n){"use strict";var a=n("6fad"),s=n.n(a);s.a},dd42:function(t,e,n){"use strict";var a=n("3adb"),s=n.n(a);s.a},ffa7:function(t,e,n){"use strict";var a=n("5b9a"),s=n.n(a);s.a}});
//# sourceMappingURL=app.041672f4.js.map