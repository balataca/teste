{"version":3,"sources":["webpack:///./node_modules/aframe-extras/lib/GamepadButton.js","webpack:///./node_modules/core-js/modules/es.object.values.js","webpack:///./node_modules/aframe-extras/src/controls/gamepad-controls.js","webpack:///./node_modules/core-js/internals/string-pad.js","webpack:///./node_modules/aframe-extras/src/misc/mesh-smooth.js","webpack:///./node_modules/aframe-extras/src/primitives/a-tube.js","webpack:///./node_modules/aframe-extras/src/pathfinding/nav-mesh.js","webpack:///./node_modules/core-js/internals/string-repeat.js","webpack:///./node_modules/aframe-extras/src/controls/index.js","webpack:///./node_modules/aframe-extras/src/pathfinding/system.js","webpack:///./node_modules/aframe-extras/src/pathfinding/nav-agent.js","webpack:///./node_modules/aframe-extras/src/misc/kinematic-body.js","webpack:///./node_modules/aframe-extras/lib/FBXLoader.js","webpack:///./node_modules/aframe-extras/src/misc/sphere-collider.js","webpack:///./node_modules/core-js/modules/es.string.includes.js","webpack:///./node_modules/aframe-extras/lib/keyboard.polyfill.js","webpack:///./node_modules/core-js/modules/es.regexp.to-string.js","webpack:///./node_modules/aframe-extras/index.js","webpack:///./node_modules/aframe-extras/src/loaders/animation-mixer.js","webpack:///./node_modules/core-js/internals/is-regexp.js","webpack:///./node_modules/core-js/modules/es.array.some.js","webpack:///./src/components/Hud/Hud.vue?9d3a","webpack:///./node_modules/core-js/modules/es.string.pad-start.js","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./node_modules/core-js/internals/not-a-regexp.js","webpack:///./node_modules/aframe-extras/src/misc/cube-env-map.js","webpack:///./src/components/Hud/components/PausedModal.vue?a52a","webpack:///./node_modules/aframe-extras/src/misc/index.js","webpack:///./node_modules/aframe-extras/src/primitives/index.js","webpack:///./node_modules/core-js/internals/object-to-array.js","webpack:///./node_modules/aframe-extras/src/misc/checkpoint.js","webpack:///./node_modules/core-js/internals/inherit-if-required.js","webpack:///./node_modules/aframe-extras/src/misc/grab.js","webpack:///./node_modules/aframe-extras/src/controls/keyboard-controls.js","webpack:///./node_modules/aframe-extras/src/controls/movement-controls.js","webpack:///./node_modules/aframe-extras/src/primitives/a-ocean.js","webpack:///./node_modules/aframe-extras/src/loaders/index.js","webpack:///./src/components/common/VAlert.vue?a93a","webpack:///./node_modules/core-js/modules/es.array.concat.js","webpack:///./node_modules/core-js/internals/string-pad-webkit-bug.js","webpack:///./node_modules/aframe-extras/src/pathfinding/index.js","webpack:///./node_modules/aframe-extras/src/loaders/collada-model-legacy.js","webpack:///./node_modules/aframe-extras/lib/GamepadButtonEvent.js","webpack:///./node_modules/core-js/modules/es.number.constructor.js","webpack:///./node_modules/core-js/internals/correct-is-regexp-logic.js","webpack:///./node_modules/core-js/internals/regexp-flags.js","webpack:///./src/components/Hud/components/Health.vue?4baa","webpack:///./node_modules/aframe-extras/src/loaders/gltf-model-legacy.js","webpack:///./node_modules/three-pathfinding/dist/three-pathfinding.module.js","webpack:///./node_modules/aframe-proxy-event-component/index.js","webpack:///./node_modules/aframe-look-at-component/index.js","webpack:///./node_modules/aframe-extras/src/controls/trackpad-controls.js","webpack:///./node_modules/core-js/modules/es.array.index-of.js","webpack:///./node_modules/core-js/modules/es.array.includes.js","webpack:///./node_modules/aframe-extras/lib/hex-grid.min.js","webpack:///./src/views/Game/Game.vue?21b8","webpack:///./src/helpers/enums.js","webpack:///./src/views/Game/components/player.js","webpack:///./src/views/Game/components/enemy.js","webpack:///./src/views/Game/components/enemyShooter.js","webpack:///./src/views/Game/components/randomSpawn.js","webpack:///./src/views/Game/components/powerup.js","webpack:///./src/views/Game/components/bullet.js","webpack:///./src/views/Game/components/shooter.js","webpack:///./src/views/Game/components/target.js","webpack:///./src/views/Game/systems/bullet.js","webpack:///./src/components/Hud/Hud.vue?ba25","webpack:///./src/components/common/icons/Reload.vue?9519","webpack:///src/components/common/icons/Reload.vue","webpack:///./src/components/common/icons/Reload.vue?e7aa","webpack:///./src/components/common/icons/Reload.vue","webpack:///./src/components/common/icons/CrossHair.vue?3f98","webpack:///src/components/common/icons/CrossHair.vue","webpack:///./src/components/common/icons/CrossHair.vue?6c5d","webpack:///./src/components/common/icons/CrossHair.vue","webpack:///./src/components/common/VAlert.vue?b0d3","webpack:///src/components/common/VAlert.vue","webpack:///./src/components/common/VAlert.vue?97ad","webpack:///./src/components/common/VAlert.vue","webpack:///./src/components/Hud/components/Health.vue?51b6","webpack:///src/components/Hud/components/Health.vue","webpack:///./src/components/Hud/components/Health.vue?9f88","webpack:///./src/components/Hud/components/Health.vue","webpack:///./src/components/Hud/components/Timer.vue?de54","webpack:///./src/components/common/icons/Pause.vue?dd82","webpack:///src/components/common/icons/Pause.vue","webpack:///./src/components/common/icons/Pause.vue?f096","webpack:///./src/components/common/icons/Pause.vue","webpack:///src/components/Hud/components/Timer.vue","webpack:///./src/components/Hud/components/Timer.vue?ca87","webpack:///./src/components/Hud/components/Timer.vue","webpack:///./src/components/Hud/components/Score.vue?bf5a","webpack:///src/components/Hud/components/Score.vue","webpack:///./src/components/Hud/components/Score.vue?01d6","webpack:///./src/components/Hud/components/Score.vue","webpack:///./src/components/Hud/components/ToggleFullscreen.vue?ff97","webpack:///./src/components/common/icons/Fullscreen.vue?f651","webpack:///src/components/common/icons/Fullscreen.vue","webpack:///./src/components/common/icons/Fullscreen.vue?9802","webpack:///./src/components/common/icons/Fullscreen.vue","webpack:///./src/components/common/icons/FullscreenExit.vue?b6e1","webpack:///src/components/common/icons/FullscreenExit.vue","webpack:///./src/components/common/icons/FullscreenExit.vue?5206","webpack:///./src/components/common/icons/FullscreenExit.vue","webpack:///src/components/Hud/components/ToggleFullscreen.vue","webpack:///./src/components/Hud/components/ToggleFullscreen.vue?c015","webpack:///./src/components/Hud/components/ToggleFullscreen.vue","webpack:///./src/components/Hud/components/PausedModal.vue?74b6","webpack:///src/components/Hud/components/PausedModal.vue","webpack:///./src/components/Hud/components/PausedModal.vue?1918","webpack:///./src/components/Hud/components/PausedModal.vue","webpack:///src/components/Hud/Hud.vue","webpack:///./src/components/Hud/Hud.vue?c4e5","webpack:///./src/components/Hud/Hud.vue","webpack:///./src/views/Game/utils/camera.js","webpack:///src/views/Game/Game.vue","webpack:///./src/views/Game/Game.vue?1343","webpack:///./src/views/Game/Game.vue","webpack:///./node_modules/aframe-extras/lib/ColladaLoader.js","webpack:///./src/components/Hud/components/Score.vue?50a5","webpack:///./node_modules/aframe-extras/src/loaders/fbx-model.js","webpack:///./node_modules/aframe-extras/src/loaders/object-model.js","webpack:///./node_modules/aframe-extras/src/primitives/a-grid.js","webpack:///./node_modules/aframe-extras/src/misc/normal-material.js","webpack:///./node_modules/aframe-extras/src/controls/checkpoint-controls.js","webpack:///./node_modules/aframe-extras/src/primitives/a-hexgrid.js","webpack:///./node_modules/aframe-extras/lib/default-hex-grid.js","webpack:///./node_modules/aframe-extras/lib/fetch-script.js","webpack:///./node_modules/aframe-extras/src/misc/jump-ability.js","webpack:///./node_modules/aframe-extras/src/controls/touch-controls.js","webpack:///./src/components/Hud/components/Timer.vue?445f"],"names":["module","exports","Object","assign","FACE_1","FACE_2","FACE_3","FACE_4","L_SHOULDER_1","R_SHOULDER_1","L_SHOULDER_2","R_SHOULDER_2","SELECT","START","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT","VENDOR","$","$values","values","target","stat","O","GamepadButton","GamepadButtonEvent","JOYSTICK_EPS","Joystick","MOVEMENT","ROTATION","AFRAME","registerComponent","schema","controller","default","oneOf","enabled","debug","camera","type","rotationSensitivity","init","sceneEl","this","el","system","systems","controllers","prevTime","window","performance","now","buttons","rotation","object3D","pitch","THREE","Object3D","x","Math","degToRad","yaw","position","y","add","_lookVector","Vector2","_moveVector","_dpadVector","addBehavior","update","tick","t","dt","updateButtonState","updateRotation","remove","isVelocityActive","data","isConnected","dpad","joystick","getDpad","getJoystick","inputX","inputY","abs","getVelocityDelta","dVelocity","Vector3","z","isRotationActive","lookControls","components","hasLookControls","pitchObject","yawObject","copy","lookVector","multiplyScalar","max","PI","min","set","gamepad","getGamepad","i","length","pressed","emit","keys","event","index","stdGamepad","navigator","getGamepads","xrController","xrGamepad","proxyControls","proxyGamepad","getButton","getAxis","axes","mapping","Error","connected","getID","id","toLength","repeat","requireObjectCoercible","ceil","createMethod","IS_END","$this","maxLength","fillString","fillLen","stringFiller","S","String","stringLength","fillStr","undefined","intMaxLength","call","slice","start","end","addEventListener","e","detail","model","traverse","node","isMesh","geometry","computeVertexNormals","Primitive","registerPrimitive","defaultComponents","tube","mappings","path","segments","radius","closed","Component","radialSegments","material","console","error","curve","CatmullRomCurve3","map","point","split","Number","TubeGeometry","MeshPhongMaterial","mesh","Mesh","setObject3D","prevData","removeObject3D","nav","hasLoadedNavMesh","loadNavMesh","bind","play","object","getObject3D","scene","navMesh","navMeshGeometry","isBufferGeometry","Geometry","fromBufferGeometry","clone","updateMatrixWorld","applyMatrix","matrixWorld","setNavMeshGeometry","toInteger","count","str","result","n","Infinity","RangeError","Pathfinding","pathfinder","ZONE","registerSystem","agents","Set","setZoneData","createZone","Array","from","forEach","agent","updateNavLocation","getNavMesh","addAgent","ctrl","removeAgent","delete","getPath","groupID","findPath","getGroup","getNode","getClosestNode","clampStep","endTarget","destination","active","speed","group","raycaster","Raycaster","vDest","vDelta","vNext","warn","setAttribute","vCurrent","vWaypoint","subVectors","distance","gazeTarget","shift","setLength","lookAt","ray","origin","direction","intersections","intersectObject","EPS","dependencies","mass","linearDamping","enableSlopes","enableJumps","physics","addComponent","CANNON","Vec3","getWorldPosition","body","Body","getMaterial","fixedRotation","addShape","Sphere","addBody","hasAttribute","removeBody","removeComponent","beforeStep","velocity","getAttribute","step","normalizedVelocity","currentSurfaceNormal","groundNormal","height","groundBody","didCollide","groundHeight","contacts","getContacts","maxInterval","contact","bi","ni","negate","bj","dot","projectOnPlane","rj","ri","normalize","raycastToGround","driver","world","gravity","scale","hitNormal","vFrom","vTo","Ray","_updateDirection","intersectBody","hasHit","hitNormalWorld","FBXLoader","fbxTree","connections","sceneGraph","manager","DefaultLoadingManager","FBXTreeParser","textureLoader","GeometryParser","AnimationParser","TextParser","BinaryParser","BinaryReader","buffer","littleEndian","dv","DataView","offset","FBXTree","isFbxFormatBinary","CORRECT","byteLength","convertArrayBufferToString","isFbxFormatASCII","text","cursor","read","num","getFbxVersion","versionRegExp","match","version","parseInt","convertFBXTimeToSeconds","time","prototype","constructor","crossOrigin","load","url","onLoad","onProgress","onError","self","resourceDirectory","LoaderUtils","extractUrlBase","loader","FileLoader","setResponseType","parse","setTimeout","itemError","setCrossOrigin","value","FBXBuffer","FBXText","TextureLoader","setPath","parseConnections","images","parseImages","textures","parseTextures","materials","parseMaterials","deformers","parseDeformers","geometryMap","parseScene","connectionMap","Map","rawConnections","Connections","rawConnection","fromID","toID","relationship","has","parents","children","parentRelationship","ID","get","push","childRelationship","blobs","Objects","videoNodes","Video","nodeID","videoNode","RelativeFilename","Filename","arrayBufferContent","Content","ArrayBuffer","base64Content","image","parseImage","filename","pop","content","fileName","extension","lastIndexOf","toLowerCase","TGALoader","Loader","Handlers","array","Uint8Array","URL","createObjectURL","Blob","textureMap","textureNodes","Texture","texture","parseTexture","textureNode","loadTexture","name","attrName","wrapModeU","WrapModeU","wrapModeV","WrapModeV","valueU","valueV","wrapS","RepeatWrapping","ClampToEdgeWrapping","wrapT","Scaling","currentPath","indexOf","FileName","materialMap","materialNodes","Material","parseMaterial","materialNode","ShadingModel","parameters","parseParameters","MeshLambertMaterial","color","setValues","BumpFactor","bumpScale","Diffuse","Color","fromArray","DiffuseColor","DisplacementFactor","displacementScale","Emissive","emissive","EmissiveColor","EmissiveFactor","emissiveIntensity","parseFloat","Opacity","opacity","transparent","ReflectionFactor","reflectivity","Shininess","shininess","Specular","specular","SpecularColor","child","bumpMap","getTexture","displacementMap","emissiveMap","normalMap","envMap","EquirectangularReflectionMapping","specularMap","alphaMap","LayeredTexture","skeletons","morphTargets","DeformerNodes","Deformer","deformerNode","relationships","attrType","skeleton","parseSkeleton","geometryID","morphTarget","rawTargets","parseMorphTargets","deformerNodes","rawBones","boneNode","rawBone","indices","weights","transform","Matrix4","Transform","a","transformLink","TransformLink","linkMode","Mode","Indexes","Weights","bones","rawMorphTargets","morphTargetNode","rawMorphTarget","initialWeight","DeformPercent","fullWeights","FullWeights","targetRelationships","geoID","Group","modelMap","parseModels","modelNodes","Model","modelNode","setLookAtProperties","parentConnections","connection","parent","bindSkeleton","createAmbientLight","setupMorphMaterials","animations","isGroup","buildSkeleton","createCamera","createLight","createMesh","createCurve","PropertyBinding","sanitizeNodeName","setModelTransforms","bone","subBone","Bone","cameraAttribute","attr","NodeAttribute","CameraProjectionType","nearClippingPlane","NearPlane","farClippingPlane","FarPlane","width","innerWidth","innerHeight","AspectWidth","AspectHeight","aspect","fov","FieldOfView","focalLength","FocalLength","PerspectiveCamera","setFocalLength","OrthographicCamera","lightAttribute","LightType","intensity","Intensity","CastLightOnObject","FarAttenuationEnd","EnableFarAttenuation","decay","PointLight","DirectionalLight","angle","InnerAngle","penumbra","OuterAngle","SpotLight","CastShadows","castShadow","attributes","vertexColors","VertexColors","FBX_Deformer","skinning","SkinnedMesh","reduce","geo","LineBasicMaterial","linewidth","Line","transformData","eulerOrder","RotationOrder","translation","Lcl_Translation","rotationOffset","RotationOffset","Lcl_Rotation","preRotation","PreRotation","postRotation","PostRotation","Lcl_Scaling","generateTransform","lookAtTarget","pos","bindMatrices","parsePoseNodes","geoRelationships","geoConnParent","Skeleton","BindPoseNode","Pose","poseNodes","PoseNode","isArray","poseNode","Node","Matrix","GlobalSettings","ambientColor","AmbientColor","r","g","b","AmbientLight","morphAttributes","normal","uuid","matUuid","sharedMat","geoNodes","parseGeometry","geoNode","parseMeshGeometry","parseNurbsGeometry","GeometricTranslation","GeometricRotation","GeometricScaling","genGeometry","preTransform","BufferGeometry","geoInfo","parseGeoNode","buffers","genBuffers","positionAttribute","Float32BufferAttribute","vertex","applyToBufferAttribute","addAttribute","colors","Uint16BufferAttribute","weightsIndices","vertexWeights","normalAttribute","normalMatrix","Matrix3","getNormalMatrix","uvs","uvBuffer","toString","mappingType","prevMaterialIndex","materialIndex","startIndex","currentIndex","addGroup","groups","lastGroup","lastIndex","addMorphTargets","vertexPositions","Vertices","vertexIndices","PolygonVertexIndex","LayerElementColor","parseVertexColors","LayerElementMaterial","parseMaterialIndices","LayerElementNormal","parseNormals","LayerElementUV","uv","parseUVs","weightTable","j","weight","polygonIndex","faceLength","displayedWeightsWarning","facePositionIndexes","faceNormals","faceColors","faceUVs","faceWeights","faceWeightIndices","vertexIndex","polygonVertexIndex","endOfFace","weightIndices","getData","wt","wIndex","Weight","weightIndex","currentWeight","comparedWeight","comparedWeightIndex","comparedWeightArray","tmp","genFace","parentGeo","parentGeoNode","rawTarget","morphGeoNode","genMorphGeometry","morphGeo","morphPositions","morphIndex","morphGeoInfo","morphBuffers","NormalNode","MappingInformationType","referenceType","ReferenceInformationType","Normals","indexBuffer","NormalIndex","NormalsIndex","dataSize","UVNode","UV","UVIndex","ColorNode","Colors","ColorIndex","MaterialNode","materialIndexBuffer","Materials","materialIndices","NURBSCurve","order","Order","isNaN","startKnot","endKnot","degree","knots","KnotVector","controlPoints","pointsValues","Points","l","Vector4","Form","vertices","getPoints","positions","Float32Array","toArray","BufferAttribute","animationClips","rawClips","parseClips","key","rawClip","clip","addClip","AnimationCurve","curveNodesMap","parseAnimationCurveNodes","parseAnimationCurves","layersMap","parseAnimationLayers","parseAnimStacks","rawCurveNodes","AnimationCurveNode","rawCurveNode","curveNode","curves","rawCurves","animationCurve","times","KeyTime","KeyValueFloat","animationCurveID","animationCurveRelationship","rawLayers","AnimationLayer","layerCurveNodes","modelID","rawModel","modelName","initialPosition","initialRotation","initialScale","getModelAnimTransform","preRotations","postRotations","morph","deformerID","morpherID","morphName","rawStacks","AnimationStack","layer","tracks","rawTracks","concat","generateTracks","AnimationClip","Quaternion","decompose","Euler","setFromQuaternion","T","positionTrack","generateVectorTrack","R","rotationTrack","generateRotationTrack","scaleTrack","morphTrack","generateMorphTrack","initialValue","getTimesForAllAxes","getKeyframeTrackValues","VectorKeyframeTrack","interpolateRotations","setFromEuler","inverse","quaternion","euler","quaternionValues","premultiply","multiply","QuaternionKeyframeTrack","val","morphNum","getObjectByName","morphTargetDictionary","NumberKeyframeTrack","sort","filter","elem","prevValue","xIndex","yIndex","zIndex","xValue","yValue","zValue","valuesSpan","absoluteSpan","numSubIntervals","nextValue","initialTime","timeSpan","interval","nextTime","interpolatedTimes","interpolatedValues","inject","getPrevNode","nodeStack","currentIndent","getCurrentNode","getCurrentProp","currentProp","pushStack","popStack","setCurrentProp","currentPropName","log","allNodes","line","matchComment","matchEmpty","matchBeginning","matchProperty","matchEnd","parseNodeBegin","parseNodeProperty","parseNodePropertyContinued","property","nodeName","trim","replace","nodeAttrs","attrs","parseNodeAttr","currentNode","contentLine","propName","propValue","parentName","connProps","to","rest","append","parseNumberArray","parseNodeSpecialProperty","props","prop","innerPropName","innerPropType1","innerPropType2","innerPropFlag","innerPropValue","reader","skip","getUint32","endOfContent","parseNode","size","getOffset","endOffset","getUint64","numProperties","nameLen","getUint8","getString","propertyList","parseProperty","singleProperty","subNode","parseSubNode","getBoolean","getFloat64","getFloat32","getInt32","getInt64","getArrayBuffer","getInt16","arrayLength","encoding","compressedLength","getBooleanArray","getFloat64Array","getFloat32Array","getInt32Array","getInt64Array","Zlib","inflate","Inflate","reader2","decompress","low","high","nullByte","decodeText","dataArray","infoObject","tempMat","tempEuler","tempVec","identity","getEulerOrder","makeRotationFromEuler","getInverse","setPosition","enums","a1","a2","objects","state","watch","observer","els","collisions","handleHit","handleHitEnd","pause","MutationObserver","observe","childList","subtree","disconnect","objectEls","querySelectorAll","meshPosition","colliderScale","box","Box3","distanceMap","colliderRadius","intersect","extent","isEntity","setFromObject","getSize","sqrt","getCenter","distanceTo","scaleFactor","scaleVec","apply","clear","getWorldScale","targetEl","addState","removeState","notARegExp","correctIsRegExpLogic","proto","forced","includes","searchString","arguments","global","nativeKeyboardEvent","KeyboardEvent","TypeError","DOM_KEY_LOCATION_STANDARD","DOM_KEY_LOCATION_LEFT","DOM_KEY_LOCATION_RIGHT","DOM_KEY_LOCATION_NUMPAD","STANDARD","LEFT","RIGHT","NUMPAD","contains","s","ss","os","platform","userAgent","browser","vendor","browser_os","mergeIf","baseTable","select","table","keyCode","remap","o","k","item","keyCodeToInfoTable","code","keyCap","location","keyIdentifierTable","locationTable","codeToKeyTable","ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","OSLeft","OSRight","NumpadEnter","Space","Digit0","shiftKey","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","KeyA","KeyB","KeyC","KeyD","KeyE","KeyF","KeyG","KeyH","KeyI","KeyJ","KeyK","KeyL","KeyM","KeyN","KeyO","KeyP","KeyQ","KeyR","KeyS","KeyT","KeyU","KeyV","KeyW","KeyX","KeyY","KeyZ","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadMultiply","NumpadAdd","NumpadComma","NumpadSubtract","NumpadDecimal","NumpadDivide","Semicolon","Equal","Comma","Minus","Period","Slash","Backquote","BracketLeft","Backslash","BracketRight","Quote","IntlBackslash","keyFixTable","Esc","Nonconvert","Left","Up","Right","Down","Del","Menu","MediaNextTrack","MediaPreviousTrack","SelectMedia","HalfWidth","FullWidth","RomanCharacters","Crsel","Exsel","Zoom","codeTable","nativeLocation","_","keyInfoForEvent","which","keyInfo","keyLocation","keyIdentifier","entry","queryKeyCap","locale","hasOwnProperty","define","p","v","defineProperty","desc","getOwnPropertyDescriptor","identifyKey","redefine","anObject","fails","flags","TO_STRING","RegExpPrototype","RegExp","nativeToString","NOT_GENERIC","source","INCORRECT_NAME","rf","f","unsafe","LoopMode","once","LoopOnce","LoopRepeat","pingpong","LoopPingPong","wildcardToRegExp","regExpEscape","join","duration","clampWhenFinished","crossFadeDuration","loop","repetitions","timeScale","mixer","activeActions","AnimationMixer","action","loopDelta","stopAllAction","changes","utils","diff","stopAction","playAction","setDuration","setLoop","setEffectiveTimeScale","fadeOut","stop","clips","re","clipAction","fadeIn","isObject","classof","wellKnownSymbol","MATCH","it","isRegExp","$some","some","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","callbackfn","$padStart","WEBKIT_BUG","padStart","whitespaces","whitespace","ltrim","rtrim","TYPE","string","ensureMaterialArray","applyEnvMap","materialNames","meshMaterials","needsUpdate","multiple","format","enableBackground","CubeTextureLoader","object3dsetHandler","oldData","addedMaterialNames","removedMaterialNames","maintainedMaterialNames","setBackground","removeEventListener","background","DESCRIPTORS","objectKeys","toIndexedObject","propertyIsEnumerable","TO_ENTRIES","entries","fire","querySelector","setCheckpoint","setPrototypeOf","dummy","Wrapper","NewTarget","NewTargetPrototype","GRABBED_STATE","grabbing","hitEl","constraint","onHit","onGripOpen","onGripClose","removeConstraint","evt","is","LockConstraint","addConstraint","PROXY_FLAG","localKeys","listeners","keydown","onKeyDown","keyup","onKeyUp","blur","onBlur","attachEventListeners","getKeys","ArrowUp","ArrowLeft","ArrowDown","ArrowRight","removeEventListeners","shouldCaptureKeyEvent","isPressed","isProxied","getKeyboard","COMPONENT_SUFFIX","MAX_DELTA","controls","fly","constrainToNavMesh","velocityCtrl","heading","navGroup","navNode","hasLoaded","injectControls","clampedEnd","updateVelocityCtrl","updateVelocity","isNavMeshConstrained","lengthSq","control","vector2","getVelocity","getPositionDelta","cameraEl","applyQuaternion","factor","ocean","depth","density","amplitude","amplitudeVariance","speedVariance","PlaneGeometry","mergeVertices","waves","ang","random","amp","shading","FlatShading","verts","vprops","sin","verticesNeedUpdate","toObject","createProperty","arraySpeciesCreate","arrayMethodHasSpeciesSupport","V8_VERSION","IS_CONCAT_SPREADABLE","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_INDEX_EXCEEDED","IS_CONCAT_SPREADABLE_SUPPORT","SPECIES_SUPPORT","isConcatSpreadable","spreadable","FORCED","arg","len","E","A","test","ColladaLoader","src","rendererSystem","renderer","colladaModel","applyColorCorrection","details","isForced","inheritIfRequired","toPrimitive","create","getOwnPropertyNames","NUMBER","NativeNumber","NumberPrototype","BROKEN_CLASSOF","toNumber","argument","first","third","radix","maxCode","digits","charCodeAt","NaN","NumberWrapper","valueOf","METHOD_NAME","regexp","that","ignoreCase","multiline","dotAll","unicode","sticky","fetchScript","LOADER_SRC","loadLoader","promise","loaderPromise","then","GLTFLoader","gltfModel","computeCentroids","faces","centroid","c","divideScalar","roundNumber","toFixed","sample","floor","mergeVertexIds","u","setPolygonCentroid","vertexIds","cleanPolygon","h","sub","d","angleTo","neighbours","isConvex","cross","distanceToSquared","isPointInPoly","isVectorInPolygon","triarea2","vequal","scoreFunction","sinkDown","bubbleUp","rescoreElement","cost","visited","cleanUp","heap","search","reverse","heuristic","buildZone","_buildNavigationMesh","_buildPolygonGroups","_getSharedVerticesInOrder","portals","_buildPolygonsFromGeometry","polygons","_buildPolygonNeighbours","faceVertexUvs","left","right","stringPull","zones","pow","getRandomNode","Plane","Triangle","setFromCoplanarPoints","projectPoint","closestPointToPoint","I","captureBubbles","as","bubbles","parentNode","document","addEventListenerFrom","fromEl","coordinates","isCoordinates","isCoordinate","stringify","target3D","vector","cameraListener","beginTracking","vec3","enableNegX","enablePosX","enableNegZ","enablePosZ","mode","zVel","xVel","bindMethods","addEventListeners","onAxisMove","onTouchStart","onTouchEnd","isMoving","canRecordAxis","startingAxisData","preventDefault","handleSwipeAxis","handleTouchAxis","axisData","axis","velX","velZ","absChangeZ","absChangeX","$indexOf","nativeIndexOf","NEGATIVE_ZERO","ACCESSORS","1","searchElement","$includes","addToUnscopables","vg","VERSION","TAU","DEG_TO_RAD","RAD_TO_DEG","SQRT3","TILE","ENT","STR","HEX","SQR","ABS","Board","tiles","tileGroup","grid","overlay","finder","AStarFinder","setGrid","setEntityOnTile","cellToPixel","cell","heightOffset","tile","entity","addTile","snapTileToGrid","removeTile","splice","dispose","removeAllTiles","getTileAtCell","cellToHash","cells","snapToGrid","pixelToCell","getRandomTile","Tools","randomInt","generateOverlay","generateTilemap","reset","generateTiles","Cell","q","userData","walkable","_calcCost","_priority","_visited","_parent","uniqueID","LinkedList","generateID","equals","HexGrid","cellSize","numCells","extrudeSettings","autogenerated","_createVertex","cellShape","Shape","moveTo","lineTo","autoClose","cellGeo","cellShapeGeo","ShapeGeometry","_cellWidth","_cellLength","_hashDelimeter","_directions","_diagonals","_list","_vec3","_cel","_conversionVec","_geoCache","_matCache","TWO_THIRDS","_cubeRound","getCellAt","getNeighbors","getRandomCell","clearPath","generateTile","amount","ExtrudeGeometry","Tile","tileScale","bevelEnabled","bevelSegments","steps","bevelSize","bevelThickness","merge","generateTilePoly","MeshBasicMaterial","rotateOnAxis","generate","createPointsGeometry","getJSON","callback","fromJSON","cache","scope","toJSON","cos","round","SqrGrid","_fullCellSize","randomizeRGB","objectType","selected","highlight","structure","_emissive","getHex","setHex","deselect","toggle","obj","next","prev","free","last","objToNodeMap","Date","sortArray","addNode","swapObjects","showDebug","dump","moveUp","moveDown","_listener","isOnce","context","signal","params","execute","detach","isBound","_destroy","_bindings","_prevParams","dispatch","memorize","_shouldPropagate","validateListener","_registerListener","_indexOfListener","_addBinding","addOnce","removeAll","getNumListeners","halt","forget","Signal","allowDiagonal","heuristicFilter","list","compare","PathUtil","backtrace","biBacktrace","pathLength","interpolate","expandPath","smoothenPath","m","isWalkableAt","compressPath","imageLoader","LoadingManager","ImageLoader","sourceFile","MouseCaster","down","rightDown","pickedObject","selectedObject","allHits","wheel","screenPosition","_camera","_raycaster","_preventDefault","_onDocumentMouseMove","_onDocumentMouseDown","_onDocumentMouseUp","_onMouseWheel","OVER","OUT","DOWN","UP","CLICK","WHEEL","setFromCamera","ctrlKey","clientX","clientY","stopPropagation","wheelDelta","Scene","element","alpha","antialias","clearColor","sortObjects","fog","light","lightPosition","cameraType","cameraPosition","orthoZoom","minDistance","maxDistance","zoomSpeed","noZoom","WebGLRenderer","setClearColor","container","contolled","OrbitControls","domElement","top","bottom","updateProjectionMatrix","setSize","attachTo","style","setPixelRatio","devicePixelRatio","appendChild","render","updateOrthoZoom","focusOn","SelectionManager","mouse","onSelect","onDeselect","toggleSelection","onMouse","clearSelection","clamp","sign","getShortRotation","isPlainObject","nodeType","nwf","Performance","elapsedTime","empty","lastChild","removeChild","radixSort","substring","XMLHttpRequest","onreadystatechange","status","statusText","JSON","responseText","open","setRequestHeader","send","_vm","_h","$createElement","_c","_self","staticClass","ref","_l","game","enemy","_id","enemyIdle","spawn","powerup","gunFire","hudComponent","tag","staticRenderFns","powerUpTypes","SCORE_MULTIPLIER","HEALTH","DOUBLE_BULLETS","ammo","hitDamage","shoot","reload","die","playAnimation","store","getters","changeBullets","activeBulletType","shooter","hasDoubleBullets","assetId","playerDamage","score","spawnProbability","spawnMinScore","spawnMaxScore","damagePlayer","hasMultiplier","reSpawn","clearInterval","spawnInterval","setInterval","isPlaying","playerPos","shootingDelay","shootingDistance","onSpawn","onDespawn","shootInterval","startShooting","randomNumber","pointIsInSphere","sphereCenter","isInRadius","displayDuration","collect","display","displayTimeout","activate","activeTimeout","clearTimeout","damagePoints","maxTime","poolSize","visible","bullet","registerBullet","bulletTypes","cycle","onShoot","onChangeBullet","bulletSystem","idx","healthPoints","static","ignoreBullets","registerTarget","onBulletHit","ignoreHit","lastBulletHit","bulletContainer","createElement","pool","targets","bulletComponent","bulletData","targetComponent","isStatic","targetObj","boundingBox","bulletName","gun","oldest","oldestTime","shootBullet","getWorldDirection","bulletBox","bulletTranslation","targetBox","delta","isHit","killBullet","intersectsBox","_v","on","_e","component","_t","methods","show","alert","classList","hide","mounted","_s","health","computed","parsedTime","PauseIcon","startTimer","pad","number","storeTime","removed","toggleFullScreen","FullscreenIcon","FullscreenExitIcon","VButton","isFullScreen","fullscreenElement","exitFullscreen","documentElement","requestFullscreen","VModal","ReloadIcon","CrossHairIcon","VAlert","Health","Timer","Score","ToggleFullscreen","PausedModal","constraints","video","ideal","facingMode","resizeVideo","videoEl","getElementById","createVideoElement","startStream","mediaDevices","getUserMedia","stream","srcObject","stopStream","track","getTracks","Hud","getAssetEl","asset","modelEl","soundEl","setAssets","assets","assetEl","setGameProperties","setTime","singlePlayerMode","gameDuration","setHealth","initialHealthLevel","setIsPlaying","hasConfig","$router","beforeDestroy","setResourcePath","resourcePath","options","getElementsByTagName","xml","childNodes","parseStrings","parts","parseFloats","parseInts","parseId","generateId","isEmpty","parseAsset","unit","parseAssetUnit","upAxis","parseAssetUpAxis","textContent","parseLibrary","libraryName","parser","library","elements","buildLibrary","builder","build","getBuild","parseAnimation","sources","samplers","channels","parseSource","parseAnimationSampler","parseAnimationChannel","inputs","semantic","sid","arraySyntax","memberSyntax","member","sampler","buildAnimation","channel","inputId","INPUT","outputId","OUTPUT","inputSource","outputSource","animation","buildAnimationChannel","createKeyframeTracks","getAnimation","stride","il","jl","nodes","transforms","defaultMatrix","matrix","transpose","keyframes","prepareAnimationData","ascending","transformAnimationData","positionData","quaternionData","scaleData","keyframe","w","defaultValue","createMissingKeyframes","getPrev","getNext","parseAnimationClip","buildAnimationClip","animationTracks","getAnimationClip","parseController","skin","parseSkin","bindShapeMatrix","joints","parseJoints","parseVertexWeights","vcount","buildController","geometries","buildSkin","skinIndices","skinWeights","BONE_LIMIT","jointOffset","JOINT","weightOffset","WEIGHT","jointSource","inverseSource","INV_BIND_MATRIX","jointCount","vertexSkinData","skinIndex","weightId","skinWeight","descending","bindMatrix","boneInverse","getController","init_from","buildImage","getImage","parseEffect","profile","parseEffectProfileCOMMON","effects","surfaces","parseEffectNewparam","technique","parseEffectTechnique","extra","parseEffectExtra","parseEffectSurface","parseEffectSampler","parseEffectParameters","parseEffectParameter","opaque","parseEffectParameterTexture","parseEffectParameterTextureExtra","parseEffectParameterTextureExtraTechnique","toUpperCase","parseEffectExtraTechnique","buildEffect","getEffect","getTextureLoader","tgaLoader","buildMaterial","effect","textureObject","surface","wrapU","wrapV","offsetU","offsetV","repeatU","repeatV","parameter","lightMap","float","transparency","double_sided","side","DoubleSide","parseCamera","optics","parseCameraOptics","cameras","parseCameraTechnique","parseCameraParameters","buildCamera","yfov","aspect_ratio","znear","zfar","ymag","xmag","aspectRatio","getCamera","parseLight","parseLightTechnique","lights","parseLightParameters","falloffAngle","buildLight","getLight","primitives","parseGeometryVertices","parseGeometryPrimitive","accessor","primitive","hasUV","inputname","groupPrimitives","checkUVCoordinates","uvsNeedsFix","buildGeometry","groupedPrimitives","primitiveType","buildGeometryType","uv2","materialKeys","vc","input","prevLength","buildGeometryData","pushVector","sourceStride","sourceArray","kl","getGeometry","parseKinematicsModel","links","parseKinematicsTechniqueCommon","kinematicsModels","buildKinematicsModel","getKinematicsModel","parseKinematicsJoint","parseKinematicsLink","parseKinematicsJointParameter","limits","zeroPosition","middlePosition","attachments","parseKinematicsAttachment","parseKinematicsTransform","joint","parsePhysicsModel","rigidBodies","parsePhysicsRigidBody","physicsModels","parsePhysicsTechniqueCommon","inertia","parseKinematicsScene","bindJointAxis","parseKinematicsBindJointAxis","kinematicsScenes","param","tmpJointIndex","jointIndex","substr","buildKinematicsScene","getKinematicsScene","setupKinematics","kinematicsModelId","kinematicsSceneId","visualSceneId","visualScenes","kinematicsModel","kinematicsScene","visualScene","getVisualScene","jointMap","targetElement","collada","parentVisualElement","parentElement","connect","m0","kinematics","getJointValue","jointData","setJointValue","makeRotationAxis","makeTranslation","visualElement","visualElementName","buildTransformList","prepareNodes","instanceCameras","instanceControllers","instanceLights","instanceGeometries","instanceNodes","parseNodeInstance","hasNode","instances","instance","symbol","boneData","sortedBoneData","root","buildBoneHierarchy","hasVisualScene","processed","boneInverses","isBone","buildNode","instanceCamera","newObjects","buildObjects","isSkinnedMesh","normalizeSkinWeights","instanceLight","fallbackMaterial","resolveMaterialBinding","instanceMaterials","LineSegments","parseVisualScene","buildVisualScene","setupAnimations","DOMParser","parseFromString","crossorigin","ObjectLoader","MeshNormalMaterial","flatShading","applyMaterial","animateSpeed","checkpoint","targetPosition","sync","defaultHexGrid","fetch","response","json","addMesh","board","addMaterial","materialComponent","getScriptId","createScript","script","async","removeScript","appendScript","firstScript","insertBefore","fetchScriptInternal","Promise","resolve","reject","timeout","scriptId","timeoutId","disableTimeout","ok","settings","ACCEL_G","EASING","playerHeight","maxJumps","numJumps","beginJump","events","bindings","collide","onCollide","initialVelocity","reverseEnabled","canvasEl","canvas","touches"],"mappings":"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","file":"js/chunk-bfc7c8ee.a13bf051.js","sourcesContent":["module.exports = Object.assign(function GamepadButton () {}, {\n\tFACE_1: 0,\n\tFACE_2: 1,\n\tFACE_3: 2,\n\tFACE_4: 3,\n\n\tL_SHOULDER_1: 4,\n\tR_SHOULDER_1: 5,\n\tL_SHOULDER_2: 6,\n\tR_SHOULDER_2: 7,\n\n\tSELECT: 8,\n\tSTART: 9,\n\n\tDPAD_UP: 12,\n\tDPAD_DOWN: 13,\n\tDPAD_LEFT: 14,\n\tDPAD_RIGHT: 15,\n\n\tVENDOR: 16,\n});\n","var $ = require('../internals/export');\nvar $values = require('../internals/object-to-array').values;\n\n// `Object.values` method\n// https://tc39.github.io/ecma262/#sec-object.values\n$({ target: 'Object', stat: true }, {\n  values: function values(O) {\n    return $values(O);\n  }\n});\n","/**\n * Gamepad controls for A-Frame.\n *\n * Stripped-down version of: https://github.com/donmccurdy/aframe-gamepad-controls\n *\n * For more information about the Gamepad API, see:\n * https://developer.mozilla.org/en-US/docs/Web/API/Gamepad_API/Using_the_Gamepad_API\n */\n\nconst GamepadButton = require('../../lib/GamepadButton'),\n    GamepadButtonEvent = require('../../lib/GamepadButtonEvent');\n\nconst JOYSTICK_EPS = 0.2;\n\nconst Joystick = {\n  MOVEMENT: 1,\n  ROTATION: 2\n};\n\nmodule.exports = AFRAME.registerComponent('gamepad-controls', {\n\n  /*******************************************************************\n   * Statics\n   */\n\n  GamepadButton: GamepadButton,\n\n  /*******************************************************************\n   * Schema\n   */\n\n  schema: {\n    // Controller 0-3\n    controller:        { default: 0, oneOf: [0, 1, 2, 3] },\n\n    // Enable/disable features\n    enabled:           { default: true },\n\n    // Debugging\n    debug:             { default: false },\n\n    // Heading element for rotation\n    camera:          { default: '[camera]', type: 'selector' },\n\n    // Rotation sensitivity\n    rotationSensitivity:  { default: 2.0 },\n  },\n\n  /*******************************************************************\n   * Core\n   */\n\n  /**\n   * Called once when component is attached. Generally for initial setup.\n   */\n  init: function () {\n    const sceneEl = this.el.sceneEl;\n\n    this.system = sceneEl.systems['tracked-controls-webxr'] || {controllers: []};\n\n    this.prevTime = window.performance.now();\n\n    // Button state\n    this.buttons = {};\n\n    // Rotation\n    const rotation = this.el.object3D.rotation;\n    this.pitch = new THREE.Object3D();\n    this.pitch.rotation.x = THREE.Math.degToRad(rotation.x);\n    this.yaw = new THREE.Object3D();\n    this.yaw.position.y = 10;\n    this.yaw.rotation.y = THREE.Math.degToRad(rotation.y);\n    this.yaw.add(this.pitch);\n\n    this._lookVector = new THREE.Vector2();\n    this._moveVector = new THREE.Vector2();\n    this._dpadVector = new THREE.Vector2();\n\n    sceneEl.addBehavior(this);\n  },\n\n  /**\n   * Called when component is attached and when component data changes.\n   * Generally modifies the entity based on the data.\n   */\n  update: function () { this.tick(); },\n\n  /**\n   * Called on each iteration of main render loop.\n   */\n  tick: function (t, dt) {\n    this.updateButtonState();\n    this.updateRotation(dt);\n  },\n\n  /**\n   * Called when a component is removed (e.g., via removeAttribute).\n   * Generally undoes all modifications to the entity.\n   */\n  remove: function () { },\n\n  /*******************************************************************\n   * Movement\n   */\n\n  isVelocityActive: function () {\n    if (!this.data.enabled || !this.isConnected()) return false;\n\n    const dpad = this._dpadVector;\n    const joystick = this._moveVector;\n\n    this.getDpad(dpad);\n    this.getJoystick(Joystick.MOVEMENT, joystick);\n\n    const inputX = dpad.x || joystick.x;\n    const inputY = dpad.y || joystick.y;\n\n    return Math.abs(inputX) > JOYSTICK_EPS || Math.abs(inputY) > JOYSTICK_EPS;\n  },\n\n  getVelocityDelta: function () {\n    const dpad = this._dpadVector;\n    const joystick = this._moveVector;\n\n    this.getDpad(dpad);\n    this.getJoystick(Joystick.MOVEMENT, joystick);\n\n    const inputX = dpad.x || joystick.x;\n    const inputY = dpad.y || joystick.y;\n    const dVelocity = new THREE.Vector3();\n\n    if (Math.abs(inputX) > JOYSTICK_EPS) {\n      dVelocity.x += inputX;\n    }\n    if (Math.abs(inputY) > JOYSTICK_EPS) {\n      dVelocity.z += inputY;\n    }\n\n    return dVelocity;\n  },\n\n  /*******************************************************************\n   * Rotation\n   */\n\n  isRotationActive: function () {\n    if (!this.data.enabled || !this.isConnected()) return false;\n\n    const joystick = this._lookVector;\n\n    this.getJoystick(Joystick.ROTATION, joystick);\n\n    return Math.abs(joystick.x) > JOYSTICK_EPS || Math.abs(joystick.y) > JOYSTICK_EPS;\n  },\n\n  updateRotation: function (dt) {\n    if (!this.isRotationActive()) return;\n\n    const data = this.data;\n    const yaw = this.yaw;\n    const pitch = this.pitch;\n    const lookControls = data.camera.components['look-controls'];\n    const hasLookControls = lookControls && lookControls.pitchObject && lookControls.yawObject;\n\n    // Sync with look-controls pitch/yaw if available.\n    if (hasLookControls) {\n      pitch.rotation.copy(lookControls.pitchObject.rotation);\n      yaw.rotation.copy(lookControls.yawObject.rotation);\n    }\n\n    const lookVector = this._lookVector;\n\n    this.getJoystick(Joystick.ROTATION, lookVector);\n\n    if (Math.abs(lookVector.x) <= JOYSTICK_EPS) lookVector.x = 0;\n    if (Math.abs(lookVector.y) <= JOYSTICK_EPS) lookVector.y = 0;\n\n    lookVector.multiplyScalar(data.rotationSensitivity * dt / 1000);\n    yaw.rotation.y -= lookVector.x;\n    pitch.rotation.x -= lookVector.y;\n    pitch.rotation.x = Math.max(- Math.PI / 2, Math.min(Math.PI / 2, pitch.rotation.x));\n    data.camera.object3D.rotation.set(pitch.rotation.x, yaw.rotation.y, 0);\n\n    // Sync with look-controls pitch/yaw if available.\n    if (hasLookControls) {\n      lookControls.pitchObject.rotation.copy(pitch.rotation);\n      lookControls.yawObject.rotation.copy(yaw.rotation);\n    }\n  },\n\n  /*******************************************************************\n   * Button events\n   */\n\n  updateButtonState: function () {\n    const gamepad = this.getGamepad();\n    if (this.data.enabled && gamepad) {\n\n      // Fire DOM events for button state changes.\n      for (var i = 0; i < gamepad.buttons.length; i++) {\n        if (gamepad.buttons[i].pressed && !this.buttons[i]) {\n          this.emit(new GamepadButtonEvent('gamepadbuttondown', i, gamepad.buttons[i]));\n        } else if (!gamepad.buttons[i].pressed && this.buttons[i]) {\n          this.emit(new GamepadButtonEvent('gamepadbuttonup', i, gamepad.buttons[i]));\n        }\n        this.buttons[i] = gamepad.buttons[i].pressed;\n      }\n\n    } else if (Object.keys(this.buttons)) {\n      // Reset state if controls are disabled or controller is lost.\n      this.buttons = {};\n    }\n  },\n\n  emit: function (event) {\n    // Emit original event.\n    this.el.emit(event.type, event);\n\n    // Emit convenience event, identifying button index.\n    this.el.emit(\n      event.type + ':' + event.index,\n      new GamepadButtonEvent(event.type, event.index, event)\n    );\n  },\n\n  /*******************************************************************\n   * Gamepad state\n   */\n\n  /**\n   * Returns the Gamepad instance attached to the component. If connected,\n   * a proxy-controls component may provide access to Gamepad input from a\n   * remote device.\n   *\n   * @return {Gamepad}\n   */\n  getGamepad: function () {\n    const stdGamepad = navigator.getGamepads\n          && navigator.getGamepads()[this.data.controller],\n        xrController = this.system.controllers[this.data.controller],\n        xrGamepad = xrController && xrController.gamepad,\n        proxyControls = this.el.sceneEl.components['proxy-controls'],\n        proxyGamepad = proxyControls && proxyControls.isConnected()\n          && proxyControls.getGamepad(this.data.controller);\n    return proxyGamepad || xrGamepad || stdGamepad;\n  },\n\n  /**\n   * Returns the state of the given button.\n   * @param  {number} index The button (0-N) for which to find state.\n   * @return {GamepadButton}\n   */\n  getButton: function (index) {\n    return this.getGamepad().buttons[index];\n  },\n\n  /**\n   * Returns state of the given axis. Axes are labelled 0-N, where 0-1 will\n   * represent X/Y on the first joystick, and 2-3 X/Y on the second.\n   * @param  {number} index The axis (0-N) for which to find state.\n   * @return {number} On the interval [-1,1].\n   */\n  getAxis: function (index) {\n    return this.getGamepad().axes[index];\n  },\n\n  /**\n   * Returns the state of the specified joystick as a THREE.Vector2.\n   * @param  {Joystick} role\n   * @param  {THREE.Vector2} target\n   * @return {THREE.Vector2}\n   */\n  getJoystick: function (index, target) {\n    const gamepad = this.getGamepad();\n    if (gamepad.mapping === 'xr-standard') {\n      // See: https://github.com/donmccurdy/aframe-extras/issues/307\n      switch (index) {\n        case Joystick.MOVEMENT: return target.set(gamepad.axes[2], gamepad.axes[3]);\n        case Joystick.ROTATION: return target.set(gamepad.axes[0], gamepad.axes[1]);\n      }\n    } else {\n      switch (index) {\n        case Joystick.MOVEMENT: return target.set(gamepad.axes[0], gamepad.axes[1]);\n        case Joystick.ROTATION: return target.set(gamepad.axes[2], gamepad.axes[3]);\n      }\n    }\n    throw new Error('Unexpected joystick index \"%d\".', index);\n  },\n\n  /**\n   * Returns the state of the dpad as a THREE.Vector2.\n   * @param {THREE.Vector2} target\n   * @return {THREE.Vector2}\n   */\n  getDpad: function (target) {\n    const gamepad = this.getGamepad();\n    if (!gamepad.buttons[GamepadButton.DPAD_RIGHT]) {\n      return target.set(0, 0);\n    }\n    return target.set(\n      (gamepad.buttons[GamepadButton.DPAD_RIGHT].pressed ? 1 : 0)\n      + (gamepad.buttons[GamepadButton.DPAD_LEFT].pressed ? -1 : 0),\n      (gamepad.buttons[GamepadButton.DPAD_UP].pressed ? -1 : 0)\n      + (gamepad.buttons[GamepadButton.DPAD_DOWN].pressed ? 1 : 0)\n    );\n  },\n\n  /**\n   * Returns true if the gamepad is currently connected to the system.\n   * @return {boolean}\n   */\n  isConnected: function () {\n    const gamepad = this.getGamepad();\n    return !!(gamepad && gamepad.connected);\n  },\n\n  /**\n   * Returns a string containing some information about the controller. Result\n   * may vary across browsers, for a given controller.\n   * @return {string}\n   */\n  getID: function () {\n    return this.getGamepad().id;\n  }\n});\n","// https://github.com/tc39/proposal-string-pad-start-end\nvar toLength = require('../internals/to-length');\nvar repeat = require('../internals/string-repeat');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar ceil = Math.ceil;\n\n// `String.prototype.{ padStart, padEnd }` methods implementation\nvar createMethod = function (IS_END) {\n  return function ($this, maxLength, fillString) {\n    var S = String(requireObjectCoercible($this));\n    var stringLength = S.length;\n    var fillStr = fillString === undefined ? ' ' : String(fillString);\n    var intMaxLength = toLength(maxLength);\n    var fillLen, stringFiller;\n    if (intMaxLength <= stringLength || fillStr == '') return S;\n    fillLen = intMaxLength - stringLength;\n    stringFiller = repeat.call(fillStr, ceil(fillLen / fillStr.length));\n    if (stringFiller.length > fillLen) stringFiller = stringFiller.slice(0, fillLen);\n    return IS_END ? S + stringFiller : stringFiller + S;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.padStart` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.padstart\n  start: createMethod(false),\n  // `String.prototype.padEnd` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.padend\n  end: createMethod(true)\n};\n","/**\n * Apply this component to models that looks \"blocky\", to have Three.js compute\n * vertex normals on the fly for a \"smoother\" look.\n */\nmodule.exports = AFRAME.registerComponent('mesh-smooth', {\n  init: function () {\n    this.el.addEventListener('model-loaded', (e) => {\n      e.detail.model.traverse((node) => {\n        if (node.isMesh) node.geometry.computeVertexNormals();\n      });\n    });\n  }\n});\n","/**\n * Tube following a custom path.\n *\n * Usage:\n *\n * ```html\n * <a-tube path=\"5 0 5, 5 0 -5, -5 0 -5\" radius=\"0.5\"></a-tube>\n * ```\n */\nmodule.exports.Primitive = AFRAME.registerPrimitive('a-tube', {\n  defaultComponents: {\n    tube:           {},\n  },\n  mappings: {\n    path:           'tube.path',\n    segments:       'tube.segments',\n    radius:         'tube.radius',\n    'radial-segments': 'tube.radialSegments',\n    closed:         'tube.closed'\n  }\n});\n\nmodule.exports.Component = AFRAME.registerComponent('tube', {\n  schema: {\n    path:           {default: []},\n    segments:       {default: 64},\n    radius:         {default: 1},\n    radialSegments: {default: 8},\n    closed:         {default: false}\n  },\n\n  init: function () {\n    const el = this.el,\n        data = this.data;\n    let material = el.components.material;\n\n    if (!data.path.length) {\n      console.error('[a-tube] `path` property expected but not found.');\n      return;\n    }\n\n    const curve = new THREE.CatmullRomCurve3(data.path.map(function (point) {\n      point = point.split(' ');\n      return new THREE.Vector3(Number(point[0]), Number(point[1]), Number(point[2]));\n    }));\n    const geometry = new THREE.TubeGeometry(\n      curve, data.segments, data.radius, data.radialSegments, data.closed\n    );\n\n    if (!material) {\n      material = {};\n      material.material = new THREE.MeshPhongMaterial();\n    }\n\n    this.mesh = new THREE.Mesh(geometry, material.material);\n    this.el.setObject3D('mesh', this.mesh);\n  },\n\n  update: function (prevData) {\n    if (!Object.keys(prevData).length) return;\n\n    this.remove();\n    this.init();\n  },\n\n  remove: function () {\n    if (this.mesh) this.el.removeObject3D('mesh');\n  }\n});\n","/**\n * nav-mesh\n *\n * Waits for a mesh to be loaded on the current entity, then sets it as the\n * nav mesh in the pathfinding system.\n */\nmodule.exports = AFRAME.registerComponent('nav-mesh', {\n  init: function () {\n    this.system = this.el.sceneEl.systems.nav;\n    this.hasLoadedNavMesh = false;\n    this.el.addEventListener('object3dset', this.loadNavMesh.bind(this));\n  },\n\n  play: function () {\n    if (!this.hasLoadedNavMesh) this.loadNavMesh();\n  },\n\n  loadNavMesh: function () {\n    const object = this.el.getObject3D('mesh');\n    const scene = this.el.sceneEl.object3D;\n\n    if (!object) return;\n\n    let navMesh;\n    object.traverse((node) => {\n      if (node.isMesh) navMesh = node;\n    });\n\n    if (!navMesh) return;\n\n    const navMeshGeometry = navMesh.geometry.isBufferGeometry\n      ? new THREE.Geometry().fromBufferGeometry(navMesh.geometry)\n      : navMesh.geometry.clone();\n\n    scene.updateMatrixWorld();\n    navMeshGeometry.applyMatrix(navMesh.matrixWorld);\n    this.system.setNavMeshGeometry(navMeshGeometry);\n\n    this.hasLoadedNavMesh = true;\n  }\n});\n","'use strict';\nvar toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.repeat` method implementation\n// https://tc39.github.io/ecma262/#sec-string.prototype.repeat\nmodule.exports = ''.repeat || function repeat(count) {\n  var str = String(requireObjectCoercible(this));\n  var result = '';\n  var n = toInteger(count);\n  if (n < 0 || n == Infinity) throw RangeError('Wrong number of repetitions');\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) result += str;\n  return result;\n};\n","require('./checkpoint-controls');\nrequire('./gamepad-controls');\nrequire('./keyboard-controls');\nrequire('./touch-controls');\nrequire('./movement-controls');\nrequire('./trackpad-controls');\n","const { Pathfinding } = require('three-pathfinding');\n\nconst pathfinder = new Pathfinding();\nconst ZONE = 'level';\n\n/**\n * nav\n *\n * Pathfinding system, using PatrolJS.\n */\nmodule.exports = AFRAME.registerSystem('nav', {\n  init: function () {\n    this.navMesh = null;\n    this.agents = new Set();\n  },\n\n  /**\n   * @param {THREE.Geometry} geometry\n   */\n  setNavMeshGeometry: function (geometry) {\n    this.navMesh = new THREE.Mesh(geometry);\n    pathfinder.setZoneData(ZONE, Pathfinding.createZone(geometry));\n    Array.from(this.agents).forEach((agent) => agent.updateNavLocation());\n  },\n\n  /**\n   * @return {THREE.Mesh}\n   */\n  getNavMesh: function () {\n    return this.navMesh;\n  },\n\n  /**\n   * @param {NavAgent} ctrl\n   */\n  addAgent: function (ctrl) {\n    this.agents.add(ctrl);\n  },\n\n  /**\n   * @param {NavAgent} ctrl\n   */\n  removeAgent: function (ctrl) {\n    this.agents.delete(ctrl);\n  },\n\n  /**\n   * @param  {THREE.Vector3} start\n   * @param  {THREE.Vector3} end\n   * @param  {number} groupID\n   * @return {Array<THREE.Vector3>}\n   */\n  getPath: function (start, end, groupID) {\n    return this.navMesh\n      ? pathfinder.findPath(start, end, ZONE, groupID)\n      : null;\n  },\n\n  /**\n   * @param {THREE.Vector3} position\n   * @return {number}\n   */\n  getGroup: function (position) {\n    return this.navMesh\n      ? pathfinder.getGroup(ZONE, position)\n      : null;\n  },\n\n  /**\n   * @param  {THREE.Vector3} position\n   * @param  {number} groupID\n   * @return {Node}\n   */\n  getNode: function (position, groupID) {\n    return this.navMesh\n      ? pathfinder.getClosestNode(position, ZONE, groupID, true)\n      : null;\n  },\n\n  /**\n   * @param  {THREE.Vector3} start Starting position.\n   * @param  {THREE.Vector3} end Desired ending position.\n   * @param  {number} groupID\n   * @param  {Node} node\n   * @param  {THREE.Vector3} endTarget (Output) Adjusted step end position.\n   * @return {Node} Current node, after step is taken.\n   */\n  clampStep: function (start, end, groupID, node, endTarget) {\n    if (!this.navMesh) {\n      endTarget.copy(end);\n      return null;\n    } else if (!node) {\n      endTarget.copy(end);\n      return this.getNode(end, groupID);\n    }\n    return pathfinder.clampStep(start, end, node, ZONE, groupID, endTarget);\n  }\n});\n","module.exports = AFRAME.registerComponent('nav-agent', {\n  schema: {\n    destination: {type: 'vec3'},\n    active: {default: false},\n    speed: {default: 2}\n  },\n  init: function () {\n    this.system = this.el.sceneEl.systems.nav;\n    this.system.addAgent(this);\n    this.group = null;\n    this.path = [];\n    this.raycaster = new THREE.Raycaster();\n  },\n  remove: function () {\n    this.system.removeAgent(this);\n  },\n  update: function () {\n    this.path.length = 0;\n  },\n  updateNavLocation: function () {\n    this.group = null;\n    this.path = [];\n  },\n  tick: (function () {\n    const vDest = new THREE.Vector3();\n    const vDelta = new THREE.Vector3();\n    const vNext = new THREE.Vector3();\n\n    return function (t, dt) {\n      const el = this.el;\n      const data = this.data;\n      const raycaster = this.raycaster;\n      const speed = data.speed * dt / 1000;\n\n      if (!data.active) return;\n\n      // Use PatrolJS pathfinding system to get shortest path to target.\n      if (!this.path.length) {\n        const position = this.el.object3D.position;\n        this.group = this.group || this.system.getGroup(position);\n        this.path = this.system.getPath(position, vDest.copy(data.destination), this.group) || [];\n        el.emit('navigation-start');\n      }\n\n      // If no path is found, exit.\n      if (!this.path.length) {\n        console.warn('[nav] Unable to find path to %o.', data.destination);\n        this.el.setAttribute('nav-agent', {active: false});\n        el.emit('navigation-end');\n        return;\n      }\n\n      // Current segment is a vector from current position to next waypoint.\n      const vCurrent = el.object3D.position;\n      const vWaypoint = this.path[0];\n      vDelta.subVectors(vWaypoint, vCurrent);\n\n      const distance = vDelta.length();\n      let gazeTarget;\n\n      if (distance < speed) {\n        // If <1 step from current waypoint, discard it and move toward next.\n        this.path.shift();\n\n        // After discarding the last waypoint, exit pathfinding.\n        if (!this.path.length) {\n          this.el.setAttribute('nav-agent', {active: false});\n          el.emit('navigation-end');\n          return;\n        }\n\n        vNext.copy(vCurrent);\n        gazeTarget = this.path[0];\n      } else {\n        // If still far away from next waypoint, find next position for\n        // the current frame.\n        vNext.copy(vDelta.setLength(speed)).add(vCurrent);\n        gazeTarget = vWaypoint;\n      }\n\n      // Look at the next waypoint.\n      gazeTarget.y = vCurrent.y;\n      el.object3D.lookAt(gazeTarget);\n\n      // Raycast against the nav mesh, to keep the agent moving along the\n      // ground, not traveling in a straight line from higher to lower waypoints.\n      raycaster.ray.origin.copy(vNext);\n      raycaster.ray.origin.y += 1.5;\n      raycaster.ray.direction.y = -1;\n      const intersections = raycaster.intersectObject(this.system.getNavMesh());\n\n      if (!intersections.length) {\n        // Raycasting failed. Step toward the waypoint and hope for the best.\n        vCurrent.copy(vNext);\n      } else {\n        // Re-project next position onto nav mesh.\n        vDelta.subVectors(intersections[0].point, vCurrent);\n        vCurrent.add(vDelta.setLength(speed));\n      }\n\n    };\n  }())\n});\n","/* global CANNON */\n\n/**\n * Kinematic body.\n *\n * Managed dynamic body, which moves but is not affected (directly) by the\n * physics engine. This is not a true kinematic body, in the sense that we are\n * letting the physics engine _compute_ collisions against it and selectively\n * applying those collisions to the object. The physics engine does not decide\n * the position/velocity/rotation of the element.\n *\n * Used for the camera object, because full physics simulation would create\n * movement that feels unnatural to the player. Bipedal movement does not\n * translate nicely to rigid body physics.\n *\n * See: http://www.learn-cocos2d.com/2013/08/physics-engine-platformer-terrible-idea/\n * And: http://oxleygamedev.blogspot.com/2011/04/player-physics-part-2.html\n */\nconst EPS = 0.000001;\n\nmodule.exports = AFRAME.registerComponent('kinematic-body', {\n  dependencies: ['velocity'],\n\n  /*******************************************************************\n   * Schema\n   */\n\n  schema: {\n    mass:           { default: 5 },\n    radius:         { default: 1.3 },\n    linearDamping:  { default: 0.05 },\n    enableSlopes:   { default: true },\n    enableJumps:    { default: false },\n  },\n\n  /*******************************************************************\n   * Lifecycle\n   */\n\n  init: function () {\n    this.system = this.el.sceneEl.systems.physics;\n    this.system.addComponent(this);\n\n    const el = this.el,\n        data = this.data,\n        position = (new CANNON.Vec3()).copy(el.object3D.getWorldPosition(new THREE.Vector3()));\n\n    this.body = new CANNON.Body({\n      material: this.system.getMaterial('staticMaterial'),\n      position: position,\n      mass: data.mass,\n      linearDamping: data.linearDamping,\n      fixedRotation: true\n    });\n    this.body.addShape(\n      new CANNON.Sphere(data.radius),\n      new CANNON.Vec3(0, data.radius, 0)\n    );\n\n    this.body.el = this.el;\n    this.el.body = this.body;\n    this.system.addBody(this.body);\n\n    if (el.hasAttribute('wasd-controls')) {\n      console.warn('[kinematic-body] Not compatible with wasd-controls, use movement-controls.');\n    }\n  },\n\n  remove: function () {\n    this.system.removeBody(this.body);\n    this.system.removeComponent(this);\n    delete this.el.body;\n  },\n\n  /*******************************************************************\n   * Update\n   */\n\n  /**\n   * Checks CANNON.World for collisions and attempts to apply them to the\n   * element automatically, in a player-friendly way.\n   *\n   * There's extra logic for horizontal surfaces here. The basic requirements:\n   * (1) Only apply gravity when not in contact with _any_ horizontal surface.\n   * (2) When moving, project the velocity against exactly one ground surface.\n   *     If in contact with two ground surfaces (e.g. ground + ramp), choose\n   *     the one that collides with current velocity, if any.\n   */\n  beforeStep: function (t, dt) {\n    if (!dt) return;\n\n    const el = this.el;\n    const data = this.data\n    const body = this.body;\n\n    if (!data.enableJumps) body.velocity.set(0, 0, 0);\n    body.position.copy(el.getAttribute('position'));\n  },\n\n  step: (function () {\n    const velocity = new THREE.Vector3(),\n        normalizedVelocity = new THREE.Vector3(),\n        currentSurfaceNormal = new THREE.Vector3(),\n        groundNormal = new THREE.Vector3();\n\n    return function (t, dt) {\n      if (!dt) return;\n\n      let body = this.body,\n          data = this.data,\n          didCollide = false,\n          height, groundHeight = -Infinity,\n          groundBody,\n          contacts = this.system.getContacts();\n\n      dt = Math.min(dt, this.system.data.maxInterval * 1000);\n\n      groundNormal.set(0, 0, 0);\n      velocity.copy(this.el.getAttribute('velocity'));\n      body.velocity.copy(velocity);\n\n      for (var i = 0, contact; contact = contacts[i]; i++) {\n        // 1. Find any collisions involving this element. Get the contact\n        // normal, and make sure it's oriented _out_ of the other object and\n        // enabled (body.collisionReponse is true for both bodies)\n        if (!contact.enabled) { continue; }\n        if (body.id === contact.bi.id) {\n          contact.ni.negate(currentSurfaceNormal);\n        } else if (body.id === contact.bj.id) {\n          currentSurfaceNormal.copy(contact.ni);\n        } else {\n          continue;\n        }\n\n        didCollide = body.velocity.dot(currentSurfaceNormal) < -EPS;\n        if (didCollide && currentSurfaceNormal.y <= 0.5) {\n          // 2. If current trajectory attempts to move _through_ another\n          // object, project the velocity against the collision plane to\n          // prevent passing through.\n          velocity.projectOnPlane(currentSurfaceNormal);\n        } else if (currentSurfaceNormal.y > 0.5) {\n          // 3. If in contact with something roughly horizontal (+/- 45) then\n          // consider that the current ground. Only the highest qualifying\n          // ground is retained.\n          height = body.id === contact.bi.id\n            ? Math.abs(contact.rj.y + contact.bj.position.y)\n            : Math.abs(contact.ri.y + contact.bi.position.y);\n          if (height > groundHeight) {\n            groundHeight = height;\n            groundNormal.copy(currentSurfaceNormal);\n            groundBody = body.id === contact.bi.id ? contact.bj : contact.bi;\n          }\n        }\n      }\n\n      normalizedVelocity.copy(velocity).normalize();\n      if (groundBody && (!data.enableJumps || normalizedVelocity.y < 0.5)) {\n        if (!data.enableSlopes) {\n          groundNormal.set(0, 1, 0);\n        } else if (groundNormal.y < 1 - EPS) {\n          groundNormal.copy(this.raycastToGround(groundBody, groundNormal));\n        }\n\n        // 4. Project trajectory onto the top-most ground object, unless\n        // trajectory is > 45.\n        velocity.projectOnPlane(groundNormal);\n\n      } else if (this.system.driver.world) {\n        // 5. If not in contact with anything horizontal, apply world gravity.\n        // TODO - Why is the 4x scalar necessary.\n        // NOTE: Does not work if physics runs on a worker.\n        velocity.add(this.system.driver.world.gravity.scale(dt * 4.0 / 1000));\n      }\n\n      body.velocity.copy(velocity);\n      this.el.setAttribute('velocity', body.velocity);\n      this.el.setAttribute('position', body.position);\n    };\n  }()),\n\n  /**\n   * When walking on complex surfaces (trimeshes, borders between two shapes),\n   * the collision normals returned for the player sphere can be very\n   * inconsistent. To address this, raycast straight down, find the collision\n   * normal, and return whichever normal is more vertical.\n   * @param  {CANNON.Body} groundBody\n   * @param  {CANNON.Vec3} groundNormal\n   * @return {CANNON.Vec3}\n   */\n  raycastToGround: function (groundBody, groundNormal) {\n    let ray,\n        hitNormal,\n        vFrom = this.body.position,\n        vTo = this.body.position.clone();\n\n    ray = new CANNON.Ray(vFrom, vTo);\n    ray._updateDirection(); // TODO - Report bug.\n    ray.intersectBody(groundBody);\n\n    if (!ray.hasHit) return groundNormal;\n\n    // Compare ABS, in case we're projecting against the inside of the face.\n    hitNormal = ray.result.hitNormalWorld;\n    return Math.abs(hitNormal.y) > Math.abs(groundNormal.y) ? hitNormal : groundNormal;\n  }\n});\n","/**\n * @author Kyle-Larson https://github.com/Kyle-Larson\n * @author Takahiro https://github.com/takahirox\n * @author Lewy Blue https://github.com/looeee\n *\n * Loader loads FBX file and generates Group representing FBX scene.\n * Requires FBX file to be >= 7.0 and in ASCII or >= 6400 in Binary format\n * Versions lower than this may load but will probably have errors\n *\n * Needs Support:\n *  Morph normals / blend shape normals\n *\n * FBX format references:\n * \thttps://wiki.blender.org/index.php/User:Mont29/Foundation/FBX_File_Structure\n * \thttp://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_index_html (C++ SDK reference)\n *\n * \tBinary format specification:\n *\t\thttps://code.blender.org/2013/08/fbx-binary-file-format-specification/\n */\n\n\nmodule.exports = THREE.FBXLoader = ( function () {\n\n\tvar fbxTree;\n\tvar connections;\n\tvar sceneGraph;\n\n\tfunction FBXLoader( manager ) {\n\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n\t}\n\n\tFBXLoader.prototype = {\n\n\t\tconstructor: FBXLoader,\n\n\t\tcrossOrigin: 'anonymous',\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\t\t\tvar self = this;\n\n\t\t\tvar resourceDirectory = THREE.LoaderUtils.extractUrlBase( url );\n\n\t\t\tvar loader = new THREE.FileLoader( this.manager );\n\t\t\tloader.setResponseType( 'arraybuffer' );\n\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tvar scene = self.parse( buffer, resourceDirectory );\n\t\t\t\t\tonLoad( scene );\n\n\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\t\tif ( onError ) onError( error );\n\n\t\t\t\t\t\tself.manager.itemError( url );\n\n\t\t\t\t\t}, 0 );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\t\t},\n\n\t\tsetCrossOrigin: function ( value ) {\n\n\t\t\tthis.crossOrigin = value;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tparse: function ( FBXBuffer, resourceDirectory ) {\n\n\t\t\tif ( isFbxFormatBinary( FBXBuffer ) ) {\n\n\t\t\t\tfbxTree = new BinaryParser().parse( FBXBuffer );\n\n\t\t\t} else {\n\n\t\t\t\tvar FBXText = convertArrayBufferToString( FBXBuffer );\n\n\t\t\t\tif ( ! isFbxFormatASCII( FBXText ) ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.FBXLoader: Unknown format.' );\n\n\t\t\t\t}\n\n\t\t\t\tif ( getFbxVersion( FBXText ) < 7000 ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.FBXLoader: FBX version not supported, FileVersion: ' + getFbxVersion( FBXText ) );\n\n\t\t\t\t}\n\n\t\t\t\tfbxTree = new TextParser().parse( FBXText );\n\n\t\t\t}\n\n\t\t\t//console.log( FBXTree );\n\n\t\t\tvar textureLoader = new THREE.TextureLoader( this.manager ).setPath( resourceDirectory ).setCrossOrigin( this.crossOrigin );\n\n\t\t\treturn new FBXTreeParser( textureLoader ).parse( fbxTree );\n\n\t\t}\n\n\t};\n\n\t// Parse the FBXTree object returned by the BinaryParser or TextParser and return a THREE.Group\n\tfunction FBXTreeParser( textureLoader ) {\n\n\t\tthis.textureLoader = textureLoader;\n\n\t}\n\n\tFBXTreeParser.prototype = {\n\n\t\tconstructor: FBXTreeParser,\n\n\t\tparse: function () {\n\n\t\t\tconnections = this.parseConnections();\n\n\t\t\tvar images = this.parseImages();\n\t\t\tvar textures = this.parseTextures( images );\n\t\t\tvar materials = this.parseMaterials( textures );\n\t\t\tvar deformers = this.parseDeformers();\n\t\t\tvar geometryMap = new GeometryParser().parse( deformers );\n\n\t\t\tthis.parseScene( deformers, geometryMap, materials );\n\n\t\t\treturn sceneGraph;\n\n\t\t},\n\n\t\t// Parses FBXTree.Connections which holds parent-child connections between objects (e.g. material -> texture, model->geometry )\n\t\t// and details the connection type\n\t\tparseConnections: function () {\n\n\t\t\tvar connectionMap = new Map();\n\n\t\t\tif ( 'Connections' in fbxTree ) {\n\n\t\t\t\tvar rawConnections = fbxTree.Connections.connections;\n\n\t\t\t\trawConnections.forEach( function ( rawConnection ) {\n\n\t\t\t\t\tvar fromID = rawConnection[ 0 ];\n\t\t\t\t\tvar toID = rawConnection[ 1 ];\n\t\t\t\t\tvar relationship = rawConnection[ 2 ];\n\n\t\t\t\t\tif ( ! connectionMap.has( fromID ) ) {\n\n\t\t\t\t\t\tconnectionMap.set( fromID, {\n\t\t\t\t\t\t\tparents: [],\n\t\t\t\t\t\t\tchildren: []\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar parentRelationship = { ID: toID, relationship: relationship };\n\t\t\t\t\tconnectionMap.get( fromID ).parents.push( parentRelationship );\n\n\t\t\t\t\tif ( ! connectionMap.has( toID ) ) {\n\n\t\t\t\t\t\tconnectionMap.set( toID, {\n\t\t\t\t\t\t\tparents: [],\n\t\t\t\t\t\t\tchildren: []\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar childRelationship = { ID: fromID, relationship: relationship };\n\t\t\t\t\tconnectionMap.get( toID ).children.push( childRelationship );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn connectionMap;\n\n\t\t},\n\n\t\t// Parse FBXTree.Objects.Video for embedded image data\n\t\t// These images are connected to textures in FBXTree.Objects.Textures\n\t\t// via FBXTree.Connections.\n\t\tparseImages: function () {\n\n\t\t\tvar images = {};\n\t\t\tvar blobs = {};\n\n\t\t\tif ( 'Video' in fbxTree.Objects ) {\n\n\t\t\t\tvar videoNodes = fbxTree.Objects.Video;\n\n\t\t\t\tfor ( var nodeID in videoNodes ) {\n\n\t\t\t\t\tvar videoNode = videoNodes[ nodeID ];\n\n\t\t\t\t\tvar id = parseInt( nodeID );\n\n\t\t\t\t\timages[ id ] = videoNode.RelativeFilename || videoNode.Filename;\n\n\t\t\t\t\t// raw image data is in videoNode.Content\n\t\t\t\t\tif ( 'Content' in videoNode ) {\n\n\t\t\t\t\t\tvar arrayBufferContent = ( videoNode.Content instanceof ArrayBuffer ) && ( videoNode.Content.byteLength > 0 );\n\t\t\t\t\t\tvar base64Content = ( typeof videoNode.Content === 'string' ) && ( videoNode.Content !== '' );\n\n\t\t\t\t\t\tif ( arrayBufferContent || base64Content ) {\n\n\t\t\t\t\t\t\tvar image = this.parseImage( videoNodes[ nodeID ] );\n\n\t\t\t\t\t\t\tblobs[ videoNode.RelativeFilename || videoNode.Filename ] = image;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( var id in images ) {\n\n\t\t\t\tvar filename = images[ id ];\n\n\t\t\t\tif ( blobs[ filename ] !== undefined ) images[ id ] = blobs[ filename ];\n\t\t\t\telse images[ id ] = images[ id ].split( '\\\\' ).pop();\n\n\t\t\t}\n\n\t\t\treturn images;\n\n\t\t},\n\n\t\t// Parse embedded image data in FBXTree.Video.Content\n\t\tparseImage: function ( videoNode ) {\n\n\t\t\tvar content = videoNode.Content;\n\t\t\tvar fileName = videoNode.RelativeFilename || videoNode.Filename;\n\t\t\tvar extension = fileName.slice( fileName.lastIndexOf( '.' ) + 1 ).toLowerCase();\n\n\t\t\tvar type;\n\n\t\t\tswitch ( extension ) {\n\n\t\t\t\tcase 'bmp':\n\n\t\t\t\t\ttype = 'image/bmp';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'jpg':\n\t\t\t\tcase 'jpeg':\n\n\t\t\t\t\ttype = 'image/jpeg';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'png':\n\n\t\t\t\t\ttype = 'image/png';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'tif':\n\n\t\t\t\t\ttype = 'image/tiff';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'tga':\n\n\t\t\t\t\tif ( typeof THREE.TGALoader !== 'function' ) {\n\n\t\t\t\t\t\tconsole.warn( 'FBXLoader: THREE.TGALoader is required to load TGA textures' );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( THREE.Loader.Handlers.get( '.tga' ) === null ) {\n\n\t\t\t\t\t\t\tTHREE.Loader.Handlers.add( /\\.tga$/i, new THREE.TGALoader() );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttype = 'image/tga';\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.warn( 'FBXLoader: Image type \"' + extension + '\" is not supported.' );\n\t\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( typeof content === 'string' ) { // ASCII format\n\n\t\t\t\treturn 'data:' + type + ';base64,' + content;\n\n\t\t\t} else { // Binary Format\n\n\t\t\t\tvar array = new Uint8Array( content );\n\t\t\t\treturn window.URL.createObjectURL( new Blob( [ array ], { type: type } ) );\n\n\t\t\t}\n\n\t\t},\n\n\t\t// Parse nodes in FBXTree.Objects.Texture\n\t\t// These contain details such as UV scaling, cropping, rotation etc and are connected\n\t\t// to images in FBXTree.Objects.Video\n\t\tparseTextures: function ( images ) {\n\n\t\t\tvar textureMap = new Map();\n\n\t\t\tif ( 'Texture' in fbxTree.Objects ) {\n\n\t\t\t\tvar textureNodes = fbxTree.Objects.Texture;\n\t\t\t\tfor ( var nodeID in textureNodes ) {\n\n\t\t\t\t\tvar texture = this.parseTexture( textureNodes[ nodeID ], images );\n\t\t\t\t\ttextureMap.set( parseInt( nodeID ), texture );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn textureMap;\n\n\t\t},\n\n\t\t// Parse individual node in FBXTree.Objects.Texture\n\t\tparseTexture: function ( textureNode, images ) {\n\n\t\t\tvar texture = this.loadTexture( textureNode, images );\n\n\t\t\ttexture.ID = textureNode.id;\n\n\t\t\ttexture.name = textureNode.attrName;\n\n\t\t\tvar wrapModeU = textureNode.WrapModeU;\n\t\t\tvar wrapModeV = textureNode.WrapModeV;\n\n\t\t\tvar valueU = wrapModeU !== undefined ? wrapModeU.value : 0;\n\t\t\tvar valueV = wrapModeV !== undefined ? wrapModeV.value : 0;\n\n\t\t\t// http://download.autodesk.com/us/fbx/SDKdocs/FBX_SDK_Help/files/fbxsdkref/class_k_fbx_texture.html#889640e63e2e681259ea81061b85143a\n\t\t\t// 0: repeat(default), 1: clamp\n\n\t\t\ttexture.wrapS = valueU === 0 ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n\t\t\ttexture.wrapT = valueV === 0 ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n\n\t\t\tif ( 'Scaling' in textureNode ) {\n\n\t\t\t\tvar values = textureNode.Scaling.value;\n\n\t\t\t\ttexture.repeat.x = values[ 0 ];\n\t\t\t\ttexture.repeat.y = values[ 1 ];\n\n\t\t\t}\n\n\t\t\treturn texture;\n\n\t\t},\n\n\t\t// load a texture specified as a blob or data URI, or via an external URL using THREE.TextureLoader\n\t\tloadTexture: function ( textureNode, images ) {\n\n\t\t\tvar fileName;\n\n\t\t\tvar currentPath = this.textureLoader.path;\n\n\t\t\tvar children = connections.get( textureNode.id ).children;\n\n\t\t\tif ( children !== undefined && children.length > 0 && images[ children[ 0 ].ID ] !== undefined ) {\n\n\t\t\t\tfileName = images[ children[ 0 ].ID ];\n\n\t\t\t\tif ( fileName.indexOf( 'blob:' ) === 0 || fileName.indexOf( 'data:' ) === 0 ) {\n\n\t\t\t\t\tthis.textureLoader.setPath( undefined );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar texture;\n\n\t\t\tvar extension = textureNode.FileName.slice( - 3 ).toLowerCase();\n\n\t\t\tif ( extension === 'tga' ) {\n\n\t\t\t\tvar loader = THREE.Loader.Handlers.get( '.tga' );\n\n\t\t\t\tif ( loader === null ) {\n\n\t\t\t\t\tconsole.warn( 'FBXLoader: TGALoader not found, creating empty placeholder texture for', fileName );\n\t\t\t\t\ttexture = new THREE.Texture();\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture = loader.load( fileName );\n\n\t\t\t\t}\n\n\t\t\t} else if ( extension === 'psd' ) {\n\n\t\t\t\tconsole.warn( 'FBXLoader: PSD textures are not supported, creating empty placeholder texture for', fileName );\n\t\t\t\ttexture = new THREE.Texture();\n\n\t\t\t} else {\n\n\t\t\t\ttexture = this.textureLoader.load( fileName );\n\n\t\t\t}\n\n\t\t\tthis.textureLoader.setPath( currentPath );\n\n\t\t\treturn texture;\n\n\t\t},\n\n\t\t// Parse nodes in FBXTree.Objects.Material\n\t\tparseMaterials: function ( textureMap ) {\n\n\t\t\tvar materialMap = new Map();\n\n\t\t\tif ( 'Material' in fbxTree.Objects ) {\n\n\t\t\t\tvar materialNodes = fbxTree.Objects.Material;\n\n\t\t\t\tfor ( var nodeID in materialNodes ) {\n\n\t\t\t\t\tvar material = this.parseMaterial( materialNodes[ nodeID ], textureMap );\n\n\t\t\t\t\tif ( material !== null ) materialMap.set( parseInt( nodeID ), material );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn materialMap;\n\n\t\t},\n\n\t\t// Parse single node in FBXTree.Objects.Material\n\t\t// Materials are connected to texture maps in FBXTree.Objects.Textures\n\t\t// FBX format currently only supports Lambert and Phong shading models\n\t\tparseMaterial: function ( materialNode, textureMap ) {\n\n\t\t\tvar ID = materialNode.id;\n\t\t\tvar name = materialNode.attrName;\n\t\t\tvar type = materialNode.ShadingModel;\n\n\t\t\t// Case where FBX wraps shading model in property object.\n\t\t\tif ( typeof type === 'object' ) {\n\n\t\t\t\ttype = type.value;\n\n\t\t\t}\n\n\t\t\t// Ignore unused materials which don't have any connections.\n\t\t\tif ( ! connections.has( ID ) ) return null;\n\n\t\t\tvar parameters = this.parseParameters( materialNode, textureMap, ID );\n\n\t\t\tvar material;\n\n\t\t\tswitch ( type.toLowerCase() ) {\n\n\t\t\t\tcase 'phong':\n\t\t\t\t\tmaterial = new THREE.MeshPhongMaterial();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'lambert':\n\t\t\t\t\tmaterial = new THREE.MeshLambertMaterial();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: unknown material type \"%s\". Defaulting to MeshPhongMaterial.', type );\n\t\t\t\t\tmaterial = new THREE.MeshPhongMaterial( { color: 0x3300ff } );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tmaterial.setValues( parameters );\n\t\t\tmaterial.name = name;\n\n\t\t\treturn material;\n\n\t\t},\n\n\t\t// Parse FBX material and return parameters suitable for a three.js material\n\t\t// Also parse the texture map and return any textures associated with the material\n\t\tparseParameters: function ( materialNode, textureMap, ID ) {\n\n\t\t\tvar parameters = {};\n\n\t\t\tif ( materialNode.BumpFactor ) {\n\n\t\t\t\tparameters.bumpScale = materialNode.BumpFactor.value;\n\n\t\t\t}\n\t\t\tif ( materialNode.Diffuse ) {\n\n\t\t\t\tparameters.color = new THREE.Color().fromArray( materialNode.Diffuse.value );\n\n\t\t\t} else if ( materialNode.DiffuseColor && materialNode.DiffuseColor.type === 'Color' ) {\n\n\t\t\t\t// The blender exporter exports diffuse here instead of in materialNode.Diffuse\n\t\t\t\tparameters.color = new THREE.Color().fromArray( materialNode.DiffuseColor.value );\n\n\t\t\t}\n\t\t\tif ( materialNode.DisplacementFactor ) {\n\n\t\t\t\tparameters.displacementScale = materialNode.DisplacementFactor.value;\n\n\t\t\t}\n\t\t\tif ( materialNode.Emissive ) {\n\n\t\t\t\tparameters.emissive = new THREE.Color().fromArray( materialNode.Emissive.value );\n\n\t\t\t} else if ( materialNode.EmissiveColor && materialNode.EmissiveColor.type === 'Color' ) {\n\n\t\t\t\t// The blender exporter exports emissive color here instead of in materialNode.Emissive\n\t\t\t\tparameters.emissive = new THREE.Color().fromArray( materialNode.EmissiveColor.value );\n\n\t\t\t}\n\t\t\tif ( materialNode.EmissiveFactor ) {\n\n\t\t\t\tparameters.emissiveIntensity = parseFloat( materialNode.EmissiveFactor.value );\n\n\t\t\t}\n\t\t\tif ( materialNode.Opacity ) {\n\n\t\t\t\tparameters.opacity = parseFloat( materialNode.Opacity.value );\n\n\t\t\t}\n\t\t\tif ( parameters.opacity < 1.0 ) {\n\n\t\t\t\tparameters.transparent = true;\n\n\t\t\t}\n\t\t\tif ( materialNode.ReflectionFactor ) {\n\n\t\t\t\tparameters.reflectivity = materialNode.ReflectionFactor.value;\n\n\t\t\t}\n\t\t\tif ( materialNode.Shininess ) {\n\n\t\t\t\tparameters.shininess = materialNode.Shininess.value;\n\n\t\t\t}\n\t\t\tif ( materialNode.Specular ) {\n\n\t\t\t\tparameters.specular = new THREE.Color().fromArray( materialNode.Specular.value );\n\n\t\t\t} else if ( materialNode.SpecularColor && materialNode.SpecularColor.type === 'Color' ) {\n\n\t\t\t\t// The blender exporter exports specular color here instead of in materialNode.Specular\n\t\t\t\tparameters.specular = new THREE.Color().fromArray( materialNode.SpecularColor.value );\n\n\t\t\t}\n\n\t\t\tvar self = this;\n\t\t\tconnections.get( ID ).children.forEach( function ( child ) {\n\n\t\t\t\tvar type = child.relationship;\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 'Bump':\n\t\t\t\t\t\tparameters.bumpMap = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'DiffuseColor':\n\t\t\t\t\t\tparameters.map = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'DisplacementColor':\n\t\t\t\t\t\tparameters.displacementMap = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\n\t\t\t\t\tcase 'EmissiveColor':\n\t\t\t\t\t\tparameters.emissiveMap = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'NormalMap':\n\t\t\t\t\t\tparameters.normalMap = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ReflectionColor':\n\t\t\t\t\t\tparameters.envMap = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tparameters.envMap.mapping = THREE.EquirectangularReflectionMapping;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'SpecularColor':\n\t\t\t\t\t\tparameters.specularMap = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TransparentColor':\n\t\t\t\t\t\tparameters.alphaMap = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tparameters.transparent = true;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'AmbientColor':\n\t\t\t\t\tcase 'ShininessExponent': // AKA glossiness map\n\t\t\t\t\tcase 'SpecularFactor': // AKA specularLevel\n\t\t\t\t\tcase 'VectorDisplacementColor': // NOTE: Seems to be a copy of DisplacementColor\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: %s map is not supported in three.js, skipping texture.', type );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn parameters;\n\n\t\t},\n\n\t\t// get a texture from the textureMap for use by a material.\n\t\tgetTexture: function ( textureMap, id ) {\n\n\t\t\t// if the texture is a layered texture, just use the first layer and issue a warning\n\t\t\tif ( 'LayeredTexture' in fbxTree.Objects && id in fbxTree.Objects.LayeredTexture ) {\n\n\t\t\t\tconsole.warn( 'THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer.' );\n\t\t\t\tid = connections.get( id ).children[ 0 ].ID;\n\n\t\t\t}\n\n\t\t\treturn textureMap.get( id );\n\n\t\t},\n\n\t\t// Parse nodes in FBXTree.Objects.Deformer\n\t\t// Deformer node can contain skinning or Vertex Cache animation data, however only skinning is supported here\n\t\t// Generates map of Skeleton-like objects for use later when generating and binding skeletons.\n\t\tparseDeformers: function () {\n\n\t\t\tvar skeletons = {};\n\t\t\tvar morphTargets = {};\n\n\t\t\tif ( 'Deformer' in fbxTree.Objects ) {\n\n\t\t\t\tvar DeformerNodes = fbxTree.Objects.Deformer;\n\n\t\t\t\tfor ( var nodeID in DeformerNodes ) {\n\n\t\t\t\t\tvar deformerNode = DeformerNodes[ nodeID ];\n\n\t\t\t\t\tvar relationships = connections.get( parseInt( nodeID ) );\n\n\t\t\t\t\tif ( deformerNode.attrType === 'Skin' ) {\n\n\t\t\t\t\t\tvar skeleton = this.parseSkeleton( relationships, DeformerNodes );\n\t\t\t\t\t\tskeleton.ID = nodeID;\n\n\t\t\t\t\t\tif ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: skeleton attached to more than one geometry is not supported.' );\n\t\t\t\t\t\tskeleton.geometryID = relationships.parents[ 0 ].ID;\n\n\t\t\t\t\t\tskeletons[ nodeID ] = skeleton;\n\n\t\t\t\t\t} else if ( deformerNode.attrType === 'BlendShape' ) {\n\n\t\t\t\t\t\tvar morphTarget = {\n\t\t\t\t\t\t\tid: nodeID,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tmorphTarget.rawTargets = this.parseMorphTargets( relationships, DeformerNodes );\n\t\t\t\t\t\tmorphTarget.id = nodeID;\n\n\t\t\t\t\t\tif ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: morph target attached to more than one geometry is not supported.' );\n\n\t\t\t\t\t\tmorphTargets[ nodeID ] = morphTarget;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn {\n\n\t\t\t\tskeletons: skeletons,\n\t\t\t\tmorphTargets: morphTargets,\n\n\t\t\t};\n\n\t\t},\n\n\t\t// Parse single nodes in FBXTree.Objects.Deformer\n\t\t// The top level skeleton node has type 'Skin' and sub nodes have type 'Cluster'\n\t\t// Each skin node represents a skeleton and each cluster node represents a bone\n\t\tparseSkeleton: function ( relationships, deformerNodes ) {\n\n\t\t\tvar rawBones = [];\n\n\t\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\t\tvar boneNode = deformerNodes[ child.ID ];\n\n\t\t\t\tif ( boneNode.attrType !== 'Cluster' ) return;\n\n\t\t\t\tvar rawBone = {\n\n\t\t\t\t\tID: child.ID,\n\t\t\t\t\tindices: [],\n\t\t\t\t\tweights: [],\n\t\t\t\t\ttransform: new THREE.Matrix4().fromArray( boneNode.Transform.a ),\n\t\t\t\t\ttransformLink: new THREE.Matrix4().fromArray( boneNode.TransformLink.a ),\n\t\t\t\t\tlinkMode: boneNode.Mode,\n\n\t\t\t\t};\n\n\t\t\t\tif ( 'Indexes' in boneNode ) {\n\n\t\t\t\t\trawBone.indices = boneNode.Indexes.a;\n\t\t\t\t\trawBone.weights = boneNode.Weights.a;\n\n\t\t\t\t}\n\n\t\t\t\trawBones.push( rawBone );\n\n\t\t\t} );\n\n\t\t\treturn {\n\n\t\t\t\trawBones: rawBones,\n\t\t\t\tbones: []\n\n\t\t\t};\n\n\t\t},\n\n\t\t// The top level morph deformer node has type \"BlendShape\" and sub nodes have type \"BlendShapeChannel\"\n\t\tparseMorphTargets: function ( relationships, deformerNodes ) {\n\n\t\t\tvar rawMorphTargets = [];\n\n\t\t\tfor ( var i = 0; i < relationships.children.length; i ++ ) {\n\n\t\t\t\tif ( i === 8 ) {\n\n\t\t\t\t\tconsole.warn( 'FBXLoader: maximum of 8 morph targets supported. Ignoring additional targets.' );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tvar child = relationships.children[ i ];\n\n\t\t\t\tvar morphTargetNode = deformerNodes[ child.ID ];\n\n\t\t\t\tvar rawMorphTarget = {\n\n\t\t\t\t\tname: morphTargetNode.attrName,\n\t\t\t\t\tinitialWeight: morphTargetNode.DeformPercent,\n\t\t\t\t\tid: morphTargetNode.id,\n\t\t\t\t\tfullWeights: morphTargetNode.FullWeights.a\n\n\t\t\t\t};\n\n\t\t\t\tif ( morphTargetNode.attrType !== 'BlendShapeChannel' ) return;\n\n\t\t\t\tvar targetRelationships = connections.get( parseInt( child.ID ) );\n\n\t\t\t\ttargetRelationships.children.forEach( function ( child ) {\n\n\t\t\t\t\tif ( child.relationship === undefined ) rawMorphTarget.geoID = child.ID;\n\n\t\t\t\t} );\n\n\t\t\t\trawMorphTargets.push( rawMorphTarget );\n\n\t\t\t}\n\n\t\t\treturn rawMorphTargets;\n\n\t\t},\n\n\t\t// create the main THREE.Group() to be returned by the loader\n\t\tparseScene: function ( deformers, geometryMap, materialMap ) {\n\n\t\t\tsceneGraph = new THREE.Group();\n\n\t\t\tvar modelMap = this.parseModels( deformers.skeletons, geometryMap, materialMap );\n\n\t\t\tvar modelNodes = fbxTree.Objects.Model;\n\n\t\t\tvar self = this;\n\t\t\tmodelMap.forEach( function ( model ) {\n\n\t\t\t\tvar modelNode = modelNodes[ model.ID ];\n\t\t\t\tself.setLookAtProperties( model, modelNode );\n\n\t\t\t\tvar parentConnections = connections.get( model.ID ).parents;\n\n\t\t\t\tparentConnections.forEach( function ( connection ) {\n\n\t\t\t\t\tvar parent = modelMap.get( connection.ID );\n\t\t\t\t\tif ( parent !== undefined ) parent.add( model );\n\n\t\t\t\t} );\n\n\t\t\t\tif ( model.parent === null ) {\n\n\t\t\t\t\tsceneGraph.add( model );\n\n\t\t\t\t}\n\n\n\t\t\t} );\n\n\t\t\tthis.bindSkeleton( deformers.skeletons, geometryMap, modelMap );\n\n\t\t\tthis.createAmbientLight();\n\n\t\t\tthis.setupMorphMaterials();\n\n\t\t\tvar animations = new AnimationParser().parse();\n\n\t\t\t// if all the models where already combined in a single group, just return that\n\t\t\tif ( sceneGraph.children.length === 1 && sceneGraph.children[ 0 ].isGroup ) {\n\n\t\t\t\tsceneGraph.children[ 0 ].animations = animations;\n\t\t\t\tsceneGraph = sceneGraph.children[ 0 ];\n\n\t\t\t}\n\n\t\t\tsceneGraph.animations = animations;\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.Model\n\t\tparseModels: function ( skeletons, geometryMap, materialMap ) {\n\n\t\t\tvar modelMap = new Map();\n\t\t\tvar modelNodes = fbxTree.Objects.Model;\n\n\t\t\tfor ( var nodeID in modelNodes ) {\n\n\t\t\t\tvar id = parseInt( nodeID );\n\t\t\t\tvar node = modelNodes[ nodeID ];\n\t\t\t\tvar relationships = connections.get( id );\n\n\t\t\t\tvar model = this.buildSkeleton( relationships, skeletons, id, node.attrName );\n\n\t\t\t\tif ( ! model ) {\n\n\t\t\t\t\tswitch ( node.attrType ) {\n\n\t\t\t\t\t\tcase 'Camera':\n\t\t\t\t\t\t\tmodel = this.createCamera( relationships );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Light':\n\t\t\t\t\t\t\tmodel = this.createLight( relationships );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Mesh':\n\t\t\t\t\t\t\tmodel = this.createMesh( relationships, geometryMap, materialMap );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'NurbsCurve':\n\t\t\t\t\t\t\tmodel = this.createCurve( relationships, geometryMap );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'LimbNode': // usually associated with a Bone, however if a Bone was not created we'll make a Group instead\n\t\t\t\t\t\tcase 'Null':\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tmodel = new THREE.Group();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmodel.name = THREE.PropertyBinding.sanitizeNodeName( node.attrName );\n\t\t\t\t\tmodel.ID = id;\n\n\t\t\t\t}\n\n\t\t\t\tthis.setModelTransforms( model, node );\n\t\t\t\tmodelMap.set( id, model );\n\n\t\t\t}\n\n\t\t\treturn modelMap;\n\n\t\t},\n\n\t\tbuildSkeleton: function ( relationships, skeletons, id, name ) {\n\n\t\t\tvar bone = null;\n\n\t\t\trelationships.parents.forEach( function ( parent ) {\n\n\t\t\t\tfor ( var ID in skeletons ) {\n\n\t\t\t\t\tvar skeleton = skeletons[ ID ];\n\n\t\t\t\t\tskeleton.rawBones.forEach( function ( rawBone, i ) {\n\n\t\t\t\t\t\tif ( rawBone.ID === parent.ID ) {\n\n\t\t\t\t\t\t\tvar subBone = bone;\n\t\t\t\t\t\t\tbone = new THREE.Bone();\n\t\t\t\t\t\t\tbone.matrixWorld.copy( rawBone.transformLink );\n\n\t\t\t\t\t\t\t// set name and id here - otherwise in cases where \"subBone\" is created it will not have a name / id\n\t\t\t\t\t\t\tbone.name = THREE.PropertyBinding.sanitizeNodeName( name );\n\t\t\t\t\t\t\tbone.ID = id;\n\n\t\t\t\t\t\t\tskeleton.bones[ i ] = bone;\n\n\t\t\t\t\t\t\t// In cases where a bone is shared between multiple meshes\n\t\t\t\t\t\t\t// duplicate the bone here and and it as a child of the first bone\n\t\t\t\t\t\t\tif ( subBone !== null ) {\n\n\t\t\t\t\t\t\t\tbone.add( subBone );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn bone;\n\n\t\t},\n\n\t\t// create a THREE.PerspectiveCamera or THREE.OrthographicCamera\n\t\tcreateCamera: function ( relationships ) {\n\n\t\t\tvar model;\n\t\t\tvar cameraAttribute;\n\n\t\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\t\tvar attr = fbxTree.Objects.NodeAttribute[ child.ID ];\n\n\t\t\t\tif ( attr !== undefined ) {\n\n\t\t\t\t\tcameraAttribute = attr;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tif ( cameraAttribute === undefined ) {\n\n\t\t\t\tmodel = new THREE.Object3D();\n\n\t\t\t} else {\n\n\t\t\t\tvar type = 0;\n\t\t\t\tif ( cameraAttribute.CameraProjectionType !== undefined && cameraAttribute.CameraProjectionType.value === 1 ) {\n\n\t\t\t\t\ttype = 1;\n\n\t\t\t\t}\n\n\t\t\t\tvar nearClippingPlane = 1;\n\t\t\t\tif ( cameraAttribute.NearPlane !== undefined ) {\n\n\t\t\t\t\tnearClippingPlane = cameraAttribute.NearPlane.value / 1000;\n\n\t\t\t\t}\n\n\t\t\t\tvar farClippingPlane = 1000;\n\t\t\t\tif ( cameraAttribute.FarPlane !== undefined ) {\n\n\t\t\t\t\tfarClippingPlane = cameraAttribute.FarPlane.value / 1000;\n\n\t\t\t\t}\n\n\n\t\t\t\tvar width = window.innerWidth;\n\t\t\t\tvar height = window.innerHeight;\n\n\t\t\t\tif ( cameraAttribute.AspectWidth !== undefined && cameraAttribute.AspectHeight !== undefined ) {\n\n\t\t\t\t\twidth = cameraAttribute.AspectWidth.value;\n\t\t\t\t\theight = cameraAttribute.AspectHeight.value;\n\n\t\t\t\t}\n\n\t\t\t\tvar aspect = width / height;\n\n\t\t\t\tvar fov = 45;\n\t\t\t\tif ( cameraAttribute.FieldOfView !== undefined ) {\n\n\t\t\t\t\tfov = cameraAttribute.FieldOfView.value;\n\n\t\t\t\t}\n\n\t\t\t\tvar focalLength = cameraAttribute.FocalLength ? cameraAttribute.FocalLength.value : null;\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 0: // Perspective\n\t\t\t\t\t\tmodel = new THREE.PerspectiveCamera( fov, aspect, nearClippingPlane, farClippingPlane );\n\t\t\t\t\t\tif ( focalLength !== null ) model.setFocalLength( focalLength );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 1: // Orthographic\n\t\t\t\t\t\tmodel = new THREE.OrthographicCamera( - width / 2, width / 2, height / 2, - height / 2, nearClippingPlane, farClippingPlane );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Unknown camera type ' + type + '.' );\n\t\t\t\t\t\tmodel = new THREE.Object3D();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn model;\n\n\t\t},\n\n\t\t// Create a THREE.DirectionalLight, THREE.PointLight or THREE.SpotLight\n\t\tcreateLight: function ( relationships ) {\n\n\t\t\tvar model;\n\t\t\tvar lightAttribute;\n\n\t\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\t\tvar attr = fbxTree.Objects.NodeAttribute[ child.ID ];\n\n\t\t\t\tif ( attr !== undefined ) {\n\n\t\t\t\t\tlightAttribute = attr;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tif ( lightAttribute === undefined ) {\n\n\t\t\t\tmodel = new THREE.Object3D();\n\n\t\t\t} else {\n\n\t\t\t\tvar type;\n\n\t\t\t\t// LightType can be undefined for Point lights\n\t\t\t\tif ( lightAttribute.LightType === undefined ) {\n\n\t\t\t\t\ttype = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttype = lightAttribute.LightType.value;\n\n\t\t\t\t}\n\n\t\t\t\tvar color = 0xffffff;\n\n\t\t\t\tif ( lightAttribute.Color !== undefined ) {\n\n\t\t\t\t\tcolor = new THREE.Color().fromArray( lightAttribute.Color.value );\n\n\t\t\t\t}\n\n\t\t\t\tvar intensity = ( lightAttribute.Intensity === undefined ) ? 1 : lightAttribute.Intensity.value / 100;\n\n\t\t\t\t// light disabled\n\t\t\t\tif ( lightAttribute.CastLightOnObject !== undefined && lightAttribute.CastLightOnObject.value === 0 ) {\n\n\t\t\t\t\tintensity = 0;\n\n\t\t\t\t}\n\n\t\t\t\tvar distance = 0;\n\t\t\t\tif ( lightAttribute.FarAttenuationEnd !== undefined ) {\n\n\t\t\t\t\tif ( lightAttribute.EnableFarAttenuation !== undefined && lightAttribute.EnableFarAttenuation.value === 0 ) {\n\n\t\t\t\t\t\tdistance = 0;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdistance = lightAttribute.FarAttenuationEnd.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// TODO: could this be calculated linearly from FarAttenuationStart to FarAttenuationEnd?\n\t\t\t\tvar decay = 1;\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 0: // Point\n\t\t\t\t\t\tmodel = new THREE.PointLight( color, intensity, distance, decay );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 1: // Directional\n\t\t\t\t\t\tmodel = new THREE.DirectionalLight( color, intensity );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 2: // Spot\n\t\t\t\t\t\tvar angle = Math.PI / 3;\n\n\t\t\t\t\t\tif ( lightAttribute.InnerAngle !== undefined ) {\n\n\t\t\t\t\t\t\tangle = THREE.Math.degToRad( lightAttribute.InnerAngle.value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar penumbra = 0;\n\t\t\t\t\t\tif ( lightAttribute.OuterAngle !== undefined ) {\n\n\t\t\t\t\t\t// TODO: this is not correct - FBX calculates outer and inner angle in degrees\n\t\t\t\t\t\t// with OuterAngle > InnerAngle && OuterAngle <= Math.PI\n\t\t\t\t\t\t// while three.js uses a penumbra between (0, 1) to attenuate the inner angle\n\t\t\t\t\t\t\tpenumbra = THREE.Math.degToRad( lightAttribute.OuterAngle.value );\n\t\t\t\t\t\t\tpenumbra = Math.max( penumbra, 1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmodel = new THREE.SpotLight( color, intensity, distance, angle, penumbra, decay );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Unknown light type ' + lightAttribute.LightType.value + ', defaulting to a THREE.PointLight.' );\n\t\t\t\t\t\tmodel = new THREE.PointLight( color, intensity );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tif ( lightAttribute.CastShadows !== undefined && lightAttribute.CastShadows.value === 1 ) {\n\n\t\t\t\t\tmodel.castShadow = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn model;\n\n\t\t},\n\n\t\tcreateMesh: function ( relationships, geometryMap, materialMap ) {\n\n\t\t\tvar model;\n\t\t\tvar geometry = null;\n\t\t\tvar material = null;\n\t\t\tvar materials = [];\n\n\t\t\t// get geometry and materials(s) from connections\n\t\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\t\tif ( geometryMap.has( child.ID ) ) {\n\n\t\t\t\t\tgeometry = geometryMap.get( child.ID );\n\n\t\t\t\t}\n\n\t\t\t\tif ( materialMap.has( child.ID ) ) {\n\n\t\t\t\t\tmaterials.push( materialMap.get( child.ID ) );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tif ( materials.length > 1 ) {\n\n\t\t\t\tmaterial = materials;\n\n\t\t\t} else if ( materials.length > 0 ) {\n\n\t\t\t\tmaterial = materials[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = new THREE.MeshPhongMaterial( { color: 0xcccccc } );\n\t\t\t\tmaterials.push( material );\n\n\t\t\t}\n\n\t\t\tif ( 'color' in geometry.attributes ) {\n\n\t\t\t\tmaterials.forEach( function ( material ) {\n\n\t\t\t\t\tmaterial.vertexColors = THREE.VertexColors;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tif ( geometry.FBX_Deformer ) {\n\n\t\t\t\tmaterials.forEach( function ( material ) {\n\n\t\t\t\t\tmaterial.skinning = true;\n\n\t\t\t\t} );\n\n\t\t\t\tmodel = new THREE.SkinnedMesh( geometry, material );\n\n\t\t\t} else {\n\n\t\t\t\tmodel = new THREE.Mesh( geometry, material );\n\n\t\t\t}\n\n\t\t\treturn model;\n\n\t\t},\n\n\t\tcreateCurve: function ( relationships, geometryMap ) {\n\n\t\t\tvar geometry = relationships.children.reduce( function ( geo, child ) {\n\n\t\t\t\tif ( geometryMap.has( child.ID ) ) geo = geometryMap.get( child.ID );\n\n\t\t\t\treturn geo;\n\n\t\t\t}, null );\n\n\t\t\t// FBX does not list materials for Nurbs lines, so we'll just put our own in here.\n\t\t\tvar material = new THREE.LineBasicMaterial( { color: 0x3300ff, linewidth: 1 } );\n\t\t\treturn new THREE.Line( geometry, material );\n\n\t\t},\n\n\t\t// parse the model node for transform details and apply them to the model\n\t\tsetModelTransforms: function ( model, modelNode ) {\n\n\t\t\tvar transformData = {};\n\n\t\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = parseInt( modelNode.RotationOrder.value );\n\t\t\tif ( 'Lcl_Translation' in modelNode ) transformData.translation = modelNode.Lcl_Translation.value;\n\t\t\tif ( 'RotationOffset' in modelNode ) transformData.rotationOffset = modelNode.RotationOffset.value;\n\t\t\tif ( 'Lcl_Rotation' in modelNode ) transformData.rotation = modelNode.Lcl_Rotation.value;\n\t\t\tif ( 'PreRotation' in modelNode ) transformData.preRotation = modelNode.PreRotation.value;\n\t\t\tif ( 'PostRotation' in modelNode ) transformData.postRotation = modelNode.PostRotation.value;\n\t\t\tif ( 'Lcl_Scaling' in modelNode ) transformData.scale = modelNode.Lcl_Scaling.value;\n\n\t\t\tvar transform = generateTransform( transformData );\n\n\t\t\tmodel.applyMatrix( transform );\n\n\t\t},\n\n\t\tsetLookAtProperties: function ( model, modelNode ) {\n\n\t\t\tif ( 'LookAtProperty' in modelNode ) {\n\n\t\t\t\tvar children = connections.get( model.ID ).children;\n\n\t\t\t\tchildren.forEach( function ( child ) {\n\n\t\t\t\t\tif ( child.relationship === 'LookAtProperty' ) {\n\n\t\t\t\t\t\tvar lookAtTarget = fbxTree.Objects.Model[ child.ID ];\n\n\t\t\t\t\t\tif ( 'Lcl_Translation' in lookAtTarget ) {\n\n\t\t\t\t\t\t\tvar pos = lookAtTarget.Lcl_Translation.value;\n\n\t\t\t\t\t\t\t// DirectionalLight, SpotLight\n\t\t\t\t\t\t\tif ( model.target !== undefined ) {\n\n\t\t\t\t\t\t\t\tmodel.target.position.fromArray( pos );\n\t\t\t\t\t\t\t\tsceneGraph.add( model.target );\n\n\t\t\t\t\t\t\t} else { // Cameras and other Object3Ds\n\n\t\t\t\t\t\t\t\tmodel.lookAt( new THREE.Vector3().fromArray( pos ) );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t},\n\n\t\tbindSkeleton: function ( skeletons, geometryMap, modelMap ) {\n\n\t\t\tvar bindMatrices = this.parsePoseNodes();\n\n\t\t\tfor ( var ID in skeletons ) {\n\n\t\t\t\tvar skeleton = skeletons[ ID ];\n\n\t\t\t\tvar parents = connections.get( parseInt( skeleton.ID ) ).parents;\n\n\t\t\t\tparents.forEach( function ( parent ) {\n\n\t\t\t\t\tif ( geometryMap.has( parent.ID ) ) {\n\n\t\t\t\t\t\tvar geoID = parent.ID;\n\t\t\t\t\t\tvar geoRelationships = connections.get( geoID );\n\n\t\t\t\t\t\tgeoRelationships.parents.forEach( function ( geoConnParent ) {\n\n\t\t\t\t\t\t\tif ( modelMap.has( geoConnParent.ID ) ) {\n\n\t\t\t\t\t\t\t\tvar model = modelMap.get( geoConnParent.ID );\n\n\t\t\t\t\t\t\t\tmodel.bind( new THREE.Skeleton( skeleton.bones ), bindMatrices[ geoConnParent.ID ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t},\n\n\t\tparsePoseNodes: function () {\n\n\t\t\tvar bindMatrices = {};\n\n\t\t\tif ( 'Pose' in fbxTree.Objects ) {\n\n\t\t\t\tvar BindPoseNode = fbxTree.Objects.Pose;\n\n\t\t\t\tfor ( var nodeID in BindPoseNode ) {\n\n\t\t\t\t\tif ( BindPoseNode[ nodeID ].attrType === 'BindPose' ) {\n\n\t\t\t\t\t\tvar poseNodes = BindPoseNode[ nodeID ].PoseNode;\n\n\t\t\t\t\t\tif ( Array.isArray( poseNodes ) ) {\n\n\t\t\t\t\t\t\tposeNodes.forEach( function ( poseNode ) {\n\n\t\t\t\t\t\t\t\tbindMatrices[ poseNode.Node ] = new THREE.Matrix4().fromArray( poseNode.Matrix.a );\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tbindMatrices[ poseNodes.Node ] = new THREE.Matrix4().fromArray( poseNodes.Matrix.a );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bindMatrices;\n\n\t\t},\n\n\t\t// Parse ambient color in FBXTree.GlobalSettings - if it's not set to black (default), create an ambient light\n\t\tcreateAmbientLight: function () {\n\n\t\t\tif ( 'GlobalSettings' in fbxTree && 'AmbientColor' in fbxTree.GlobalSettings ) {\n\n\t\t\t\tvar ambientColor = fbxTree.GlobalSettings.AmbientColor.value;\n\t\t\t\tvar r = ambientColor[ 0 ];\n\t\t\t\tvar g = ambientColor[ 1 ];\n\t\t\t\tvar b = ambientColor[ 2 ];\n\n\t\t\t\tif ( r !== 0 || g !== 0 || b !== 0 ) {\n\n\t\t\t\t\tvar color = new THREE.Color( r, g, b );\n\t\t\t\t\tsceneGraph.add( new THREE.AmbientLight( color, 1 ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tsetupMorphMaterials: function () {\n\n\t\t\tsceneGraph.traverse( function ( child ) {\n\n\t\t\t\tif ( child.isMesh ) {\n\n\t\t\t\t\tif ( child.geometry.morphAttributes.position || child.geometry.morphAttributes.normal ) {\n\n\t\t\t\t\t\tvar uuid = child.uuid;\n\t\t\t\t\t\tvar matUuid = child.material.uuid;\n\n\t\t\t\t\t\t// if a geometry has morph targets, it cannot share the material with other geometries\n\t\t\t\t\t\tvar sharedMat = false;\n\n\t\t\t\t\t\tsceneGraph.traverse( function ( child ) {\n\n\t\t\t\t\t\t\tif ( child.isMesh ) {\n\n\t\t\t\t\t\t\t\tif ( child.material.uuid === matUuid && child.uuid !== uuid ) sharedMat = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tif ( sharedMat === true ) child.material = child.material.clone();\n\n\t\t\t\t\t\tchild.material.morphTargets = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t},\n\n\t};\n\n\t// parse Geometry data from FBXTree and return map of BufferGeometries\n\tfunction GeometryParser() {}\n\n\tGeometryParser.prototype = {\n\n\t\tconstructor: GeometryParser,\n\n\t\t// Parse nodes in FBXTree.Objects.Geometry\n\t\tparse: function ( deformers ) {\n\n\t\t\tvar geometryMap = new Map();\n\n\t\t\tif ( 'Geometry' in fbxTree.Objects ) {\n\n\t\t\t\tvar geoNodes = fbxTree.Objects.Geometry;\n\n\t\t\t\tfor ( var nodeID in geoNodes ) {\n\n\t\t\t\t\tvar relationships = connections.get( parseInt( nodeID ) );\n\t\t\t\t\tvar geo = this.parseGeometry( relationships, geoNodes[ nodeID ], deformers );\n\n\t\t\t\t\tgeometryMap.set( parseInt( nodeID ), geo );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn geometryMap;\n\n\t\t},\n\n\t\t// Parse single node in FBXTree.Objects.Geometry\n\t\tparseGeometry: function ( relationships, geoNode, deformers ) {\n\n\t\t\tswitch ( geoNode.attrType ) {\n\n\t\t\t\tcase 'Mesh':\n\t\t\t\t\treturn this.parseMeshGeometry( relationships, geoNode, deformers );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'NurbsCurve':\n\t\t\t\t\treturn this.parseNurbsGeometry( geoNode );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t},\n\n\t\t// Parse single node mesh geometry in FBXTree.Objects.Geometry\n\t\tparseMeshGeometry: function ( relationships, geoNode, deformers ) {\n\n\t\t\tvar skeletons = deformers.skeletons;\n\t\t\tvar morphTargets = deformers.morphTargets;\n\n\t\t\tvar modelNodes = relationships.parents.map( function ( parent ) {\n\n\t\t\t\treturn fbxTree.Objects.Model[ parent.ID ];\n\n\t\t\t} );\n\n\t\t\t// don't create geometry if it is not associated with any models\n\t\t\tif ( modelNodes.length === 0 ) return;\n\n\t\t\tvar skeleton = relationships.children.reduce( function ( skeleton, child ) {\n\n\t\t\t\tif ( skeletons[ child.ID ] !== undefined ) skeleton = skeletons[ child.ID ];\n\n\t\t\t\treturn skeleton;\n\n\t\t\t}, null );\n\n\t\t\tvar morphTarget = relationships.children.reduce( function ( morphTarget, child ) {\n\n\t\t\t\tif ( morphTargets[ child.ID ] !== undefined ) morphTarget = morphTargets[ child.ID ];\n\n\t\t\t\treturn morphTarget;\n\n\t\t\t}, null );\n\n\t\t\t// TODO: if there is more than one model associated with the geometry, AND the models have\n\t\t\t// different geometric transforms, then this will cause problems\n\t\t\t// if ( modelNodes.length > 1 ) { }\n\n\t\t\t// For now just assume one model and get the preRotations from that\n\t\t\tvar modelNode = modelNodes[ 0 ];\n\n\t\t\tvar transformData = {};\n\n\t\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = modelNode.RotationOrder.value;\n\t\t\tif ( 'GeometricTranslation' in modelNode ) transformData.translation = modelNode.GeometricTranslation.value;\n\t\t\tif ( 'GeometricRotation' in modelNode ) transformData.rotation = modelNode.GeometricRotation.value;\n\t\t\tif ( 'GeometricScaling' in modelNode ) transformData.scale = modelNode.GeometricScaling.value;\n\n\t\t\tvar transform = generateTransform( transformData );\n\n\t\t\treturn this.genGeometry( geoNode, skeleton, morphTarget, transform );\n\n\t\t},\n\n\t\t// Generate a THREE.BufferGeometry from a node in FBXTree.Objects.Geometry\n\t\tgenGeometry: function ( geoNode, skeleton, morphTarget, preTransform ) {\n\n\t\t\tvar geo = new THREE.BufferGeometry();\n\t\t\tif ( geoNode.attrName ) geo.name = geoNode.attrName;\n\n\t\t\tvar geoInfo = this.parseGeoNode( geoNode, skeleton );\n\t\t\tvar buffers = this.genBuffers( geoInfo );\n\n\t\t\tvar positionAttribute = new THREE.Float32BufferAttribute( buffers.vertex, 3 );\n\n\t\t\tpreTransform.applyToBufferAttribute( positionAttribute );\n\n\t\t\tgeo.addAttribute( 'position', positionAttribute );\n\n\t\t\tif ( buffers.colors.length > 0 ) {\n\n\t\t\t\tgeo.addAttribute( 'color', new THREE.Float32BufferAttribute( buffers.colors, 3 ) );\n\n\t\t\t}\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tgeo.addAttribute( 'skinIndex', new THREE.Uint16BufferAttribute( buffers.weightsIndices, 4 ) );\n\n\t\t\t\tgeo.addAttribute( 'skinWeight', new THREE.Float32BufferAttribute( buffers.vertexWeights, 4 ) );\n\n\t\t\t\t// used later to bind the skeleton to the model\n\t\t\t\tgeo.FBX_Deformer = skeleton;\n\n\t\t\t}\n\n\t\t\tif ( buffers.normal.length > 0 ) {\n\n\t\t\t\tvar normalAttribute = new THREE.Float32BufferAttribute( buffers.normal, 3 );\n\n\t\t\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( preTransform );\n\t\t\t\tnormalMatrix.applyToBufferAttribute( normalAttribute );\n\n\t\t\t\tgeo.addAttribute( 'normal', normalAttribute );\n\n\t\t\t}\n\n\t\t\tbuffers.uvs.forEach( function ( uvBuffer, i ) {\n\n\t\t\t\t// subsequent uv buffers are called 'uv1', 'uv2', ...\n\t\t\t\tvar name = 'uv' + ( i + 1 ).toString();\n\n\t\t\t\t// the first uv buffer is just called 'uv'\n\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\tname = 'uv';\n\n\t\t\t\t}\n\n\t\t\t\tgeo.addAttribute( name, new THREE.Float32BufferAttribute( buffers.uvs[ i ], 2 ) );\n\n\t\t\t} );\n\n\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\t// Convert the material indices of each vertex into rendering groups on the geometry.\n\t\t\t\tvar prevMaterialIndex = buffers.materialIndex[ 0 ];\n\t\t\t\tvar startIndex = 0;\n\n\t\t\t\tbuffers.materialIndex.forEach( function ( currentIndex, i ) {\n\n\t\t\t\t\tif ( currentIndex !== prevMaterialIndex ) {\n\n\t\t\t\t\t\tgeo.addGroup( startIndex, i - startIndex, prevMaterialIndex );\n\n\t\t\t\t\t\tprevMaterialIndex = currentIndex;\n\t\t\t\t\t\tstartIndex = i;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\t// the loop above doesn't add the last group, do that here.\n\t\t\t\tif ( geo.groups.length > 0 ) {\n\n\t\t\t\t\tvar lastGroup = geo.groups[ geo.groups.length - 1 ];\n\t\t\t\t\tvar lastIndex = lastGroup.start + lastGroup.count;\n\n\t\t\t\t\tif ( lastIndex !== buffers.materialIndex.length ) {\n\n\t\t\t\t\t\tgeo.addGroup( lastIndex, buffers.materialIndex.length - lastIndex, prevMaterialIndex );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// case where there are multiple materials but the whole geometry is only\n\t\t\t\t// using one of them\n\t\t\t\tif ( geo.groups.length === 0 ) {\n\n\t\t\t\t\tgeo.addGroup( 0, buffers.materialIndex.length, buffers.materialIndex[ 0 ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.addMorphTargets( geo, geoNode, morphTarget, preTransform );\n\n\t\t\treturn geo;\n\n\t\t},\n\n\t\tparseGeoNode: function ( geoNode, skeleton ) {\n\n\t\t\tvar geoInfo = {};\n\n\t\t\tgeoInfo.vertexPositions = ( geoNode.Vertices !== undefined ) ? geoNode.Vertices.a : [];\n\t\t\tgeoInfo.vertexIndices = ( geoNode.PolygonVertexIndex !== undefined ) ? geoNode.PolygonVertexIndex.a : [];\n\n\t\t\tif ( geoNode.LayerElementColor ) {\n\n\t\t\t\tgeoInfo.color = this.parseVertexColors( geoNode.LayerElementColor[ 0 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoNode.LayerElementMaterial ) {\n\n\t\t\t\tgeoInfo.material = this.parseMaterialIndices( geoNode.LayerElementMaterial[ 0 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoNode.LayerElementNormal ) {\n\n\t\t\t\tgeoInfo.normal = this.parseNormals( geoNode.LayerElementNormal[ 0 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoNode.LayerElementUV ) {\n\n\t\t\t\tgeoInfo.uv = [];\n\n\t\t\t\tvar i = 0;\n\t\t\t\twhile ( geoNode.LayerElementUV[ i ] ) {\n\n\t\t\t\t\tgeoInfo.uv.push( this.parseUVs( geoNode.LayerElementUV[ i ] ) );\n\t\t\t\t\ti ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeoInfo.weightTable = {};\n\n\t\t\tif ( skeleton !== null ) {\n\n\t\t\t\tgeoInfo.skeleton = skeleton;\n\n\t\t\t\tskeleton.rawBones.forEach( function ( rawBone, i ) {\n\n\t\t\t\t\t// loop over the bone's vertex indices and weights\n\t\t\t\t\trawBone.indices.forEach( function ( index, j ) {\n\n\t\t\t\t\t\tif ( geoInfo.weightTable[ index ] === undefined ) geoInfo.weightTable[ index ] = [];\n\n\t\t\t\t\t\tgeoInfo.weightTable[ index ].push( {\n\n\t\t\t\t\t\t\tid: i,\n\t\t\t\t\t\t\tweight: rawBone.weights[ j ],\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn geoInfo;\n\n\t\t},\n\n\t\tgenBuffers: function ( geoInfo ) {\n\n\t\t\tvar buffers = {\n\t\t\t\tvertex: [],\n\t\t\t\tnormal: [],\n\t\t\t\tcolors: [],\n\t\t\t\tuvs: [],\n\t\t\t\tmaterialIndex: [],\n\t\t\t\tvertexWeights: [],\n\t\t\t\tweightsIndices: [],\n\t\t\t};\n\n\t\t\tvar polygonIndex = 0;\n\t\t\tvar faceLength = 0;\n\t\t\tvar displayedWeightsWarning = false;\n\n\t\t\t// these will hold data for a single face\n\t\t\tvar facePositionIndexes = [];\n\t\t\tvar faceNormals = [];\n\t\t\tvar faceColors = [];\n\t\t\tvar faceUVs = [];\n\t\t\tvar faceWeights = [];\n\t\t\tvar faceWeightIndices = [];\n\n\t\t\tvar self = this;\n\t\t\tgeoInfo.vertexIndices.forEach( function ( vertexIndex, polygonVertexIndex ) {\n\n\t\t\t\tvar endOfFace = false;\n\n\t\t\t\t// Face index and vertex index arrays are combined in a single array\n\t\t\t\t// A cube with quad faces looks like this:\n\t\t\t\t// PolygonVertexIndex: *24 {\n\t\t\t\t//  a: 0, 1, 3, -3, 2, 3, 5, -5, 4, 5, 7, -7, 6, 7, 1, -1, 1, 7, 5, -4, 6, 0, 2, -5\n\t\t\t\t//  }\n\t\t\t\t// Negative numbers mark the end of a face - first face here is 0, 1, 3, -3\n\t\t\t\t// to find index of last vertex bit shift the index: ^ - 1\n\t\t\t\tif ( vertexIndex < 0 ) {\n\n\t\t\t\t\tvertexIndex = vertexIndex ^ - 1; // equivalent to ( x * -1 ) - 1\n\t\t\t\t\tendOfFace = true;\n\n\t\t\t\t}\n\n\t\t\t\tvar weightIndices = [];\n\t\t\t\tvar weights = [];\n\n\t\t\t\tfacePositionIndexes.push( vertexIndex * 3, vertexIndex * 3 + 1, vertexIndex * 3 + 2 );\n\n\t\t\t\tif ( geoInfo.color ) {\n\n\t\t\t\t\tvar data = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.color );\n\n\t\t\t\t\tfaceColors.push( data[ 0 ], data[ 1 ], data[ 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.skeleton ) {\n\n\t\t\t\t\tif ( geoInfo.weightTable[ vertexIndex ] !== undefined ) {\n\n\t\t\t\t\t\tgeoInfo.weightTable[ vertexIndex ].forEach( function ( wt ) {\n\n\t\t\t\t\t\t\tweights.push( wt.weight );\n\t\t\t\t\t\t\tweightIndices.push( wt.id );\n\n\t\t\t\t\t\t} );\n\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( weights.length > 4 ) {\n\n\t\t\t\t\t\tif ( ! displayedWeightsWarning ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights.' );\n\t\t\t\t\t\t\tdisplayedWeightsWarning = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar wIndex = [ 0, 0, 0, 0 ];\n\t\t\t\t\t\tvar Weight = [ 0, 0, 0, 0 ];\n\n\t\t\t\t\t\tweights.forEach( function ( weight, weightIndex ) {\n\n\t\t\t\t\t\t\tvar currentWeight = weight;\n\t\t\t\t\t\t\tvar currentIndex = weightIndices[ weightIndex ];\n\n\t\t\t\t\t\t\tWeight.forEach( function ( comparedWeight, comparedWeightIndex, comparedWeightArray ) {\n\n\t\t\t\t\t\t\t\tif ( currentWeight > comparedWeight ) {\n\n\t\t\t\t\t\t\t\t\tcomparedWeightArray[ comparedWeightIndex ] = currentWeight;\n\t\t\t\t\t\t\t\t\tcurrentWeight = comparedWeight;\n\n\t\t\t\t\t\t\t\t\tvar tmp = wIndex[ comparedWeightIndex ];\n\t\t\t\t\t\t\t\t\twIndex[ comparedWeightIndex ] = currentIndex;\n\t\t\t\t\t\t\t\t\tcurrentIndex = tmp;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tweightIndices = wIndex;\n\t\t\t\t\t\tweights = Weight;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// if the weight array is shorter than 4 pad with 0s\n\t\t\t\t\twhile ( weights.length < 4 ) {\n\n\t\t\t\t\t\tweights.push( 0 );\n\t\t\t\t\t\tweightIndices.push( 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0; i < 4; ++ i ) {\n\n\t\t\t\t\t\tfaceWeights.push( weights[ i ] );\n\t\t\t\t\t\tfaceWeightIndices.push( weightIndices[ i ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.normal ) {\n\n\t\t\t\t\tvar data = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.normal );\n\n\t\t\t\t\tfaceNormals.push( data[ 0 ], data[ 1 ], data[ 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\t\tvar materialIndex = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.material )[ 0 ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.uv ) {\n\n\t\t\t\t\tgeoInfo.uv.forEach( function ( uv, i ) {\n\n\t\t\t\t\t\tvar data = getData( polygonVertexIndex, polygonIndex, vertexIndex, uv );\n\n\t\t\t\t\t\tif ( faceUVs[ i ] === undefined ) {\n\n\t\t\t\t\t\t\tfaceUVs[ i ] = [];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfaceUVs[ i ].push( data[ 0 ] );\n\t\t\t\t\t\tfaceUVs[ i ].push( data[ 1 ] );\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t\tfaceLength ++;\n\n\t\t\t\tif ( endOfFace ) {\n\n\t\t\t\t\tself.genFace( buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength );\n\n\t\t\t\t\tpolygonIndex ++;\n\t\t\t\t\tfaceLength = 0;\n\n\t\t\t\t\t// reset arrays for the next face\n\t\t\t\t\tfacePositionIndexes = [];\n\t\t\t\t\tfaceNormals = [];\n\t\t\t\t\tfaceColors = [];\n\t\t\t\t\tfaceUVs = [];\n\t\t\t\t\tfaceWeights = [];\n\t\t\t\t\tfaceWeightIndices = [];\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn buffers;\n\n\t\t},\n\n\t\t// Generate data for a single face in a geometry. If the face is a quad then split it into 2 tris\n\t\tgenFace: function ( buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength ) {\n\n\t\t\tfor ( var i = 2; i < faceLength; i ++ ) {\n\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ 0 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ 1 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ 2 ] ] );\n\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ ( i - 1 ) * 3 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ ( i - 1 ) * 3 + 1 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ ( i - 1 ) * 3 + 2 ] ] );\n\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i * 3 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i * 3 + 1 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i * 3 + 2 ] ] );\n\n\t\t\t\tif ( geoInfo.skeleton ) {\n\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 0 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 1 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 2 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 3 ] );\n\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 + 1 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 + 2 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 + 3 ] );\n\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 + 1 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 + 2 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 + 3 ] );\n\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 0 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 1 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 2 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 3 ] );\n\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 + 1 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 + 2 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 + 3 ] );\n\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 + 1 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 + 2 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 + 3 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.color ) {\n\n\t\t\t\t\tbuffers.colors.push( faceColors[ 0 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ 1 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ 2 ] );\n\n\t\t\t\t\tbuffers.colors.push( faceColors[ ( i - 1 ) * 3 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ ( i - 1 ) * 3 + 1 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ ( i - 1 ) * 3 + 2 ] );\n\n\t\t\t\t\tbuffers.colors.push( faceColors[ i * 3 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ i * 3 + 1 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ i * 3 + 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\t\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\t\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.normal ) {\n\n\t\t\t\t\tbuffers.normal.push( faceNormals[ 0 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ 1 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ 2 ] );\n\n\t\t\t\t\tbuffers.normal.push( faceNormals[ ( i - 1 ) * 3 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ ( i - 1 ) * 3 + 1 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ ( i - 1 ) * 3 + 2 ] );\n\n\t\t\t\t\tbuffers.normal.push( faceNormals[ i * 3 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ i * 3 + 1 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ i * 3 + 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.uv ) {\n\n\t\t\t\t\tgeoInfo.uv.forEach( function ( uv, j ) {\n\n\t\t\t\t\t\tif ( buffers.uvs[ j ] === undefined ) buffers.uvs[ j ] = [];\n\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ 0 ] );\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ 1 ] );\n\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ ( i - 1 ) * 2 ] );\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ ( i - 1 ) * 2 + 1 ] );\n\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i * 2 ] );\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i * 2 + 1 ] );\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\taddMorphTargets: function ( parentGeo, parentGeoNode, morphTarget, preTransform ) {\n\n\t\t\tif ( morphTarget === null ) return;\n\n\t\t\tparentGeo.morphAttributes.position = [];\n\t\t\tparentGeo.morphAttributes.normal = [];\n\n\t\t\tvar self = this;\n\t\t\tmorphTarget.rawTargets.forEach( function ( rawTarget ) {\n\n\t\t\t\tvar morphGeoNode = fbxTree.Objects.Geometry[ rawTarget.geoID ];\n\n\t\t\t\tif ( morphGeoNode !== undefined ) {\n\n\t\t\t\t\tself.genMorphGeometry( parentGeo, parentGeoNode, morphGeoNode, preTransform );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t},\n\n\t\t// a morph geometry node is similar to a standard  node, and the node is also contained\n\t\t// in FBXTree.Objects.Geometry, however it can only have attributes for position, normal\n\t\t// and a special attribute Index defining which vertices of the original geometry are affected\n\t\t// Normal and position attributes only have data for the vertices that are affected by the morph\n\t\tgenMorphGeometry: function ( parentGeo, parentGeoNode, morphGeoNode, preTransform ) {\n\n\t\t\tvar morphGeo = new THREE.BufferGeometry();\n\t\t\tif ( morphGeoNode.attrName ) morphGeo.name = morphGeoNode.attrName;\n\n\t\t\tvar vertexIndices = ( parentGeoNode.PolygonVertexIndex !== undefined ) ? parentGeoNode.PolygonVertexIndex.a : [];\n\n\t\t\t// make a copy of the parent's vertex positions\n\t\t\tvar vertexPositions = ( parentGeoNode.Vertices !== undefined ) ? parentGeoNode.Vertices.a.slice() : [];\n\n\t\t\tvar morphPositions = ( morphGeoNode.Vertices !== undefined ) ? morphGeoNode.Vertices.a : [];\n\t\t\tvar indices = ( morphGeoNode.Indexes !== undefined ) ? morphGeoNode.Indexes.a : [];\n\n\t\t\tfor ( var i = 0; i < indices.length; i ++ ) {\n\n\t\t\t\tvar morphIndex = indices[ i ] * 3;\n\n\t\t\t\t// FBX format uses blend shapes rather than morph targets. This can be converted\n\t\t\t\t// by additively combining the blend shape positions with the original geometry's positions\n\t\t\t\tvertexPositions[ morphIndex ] += morphPositions[ i * 3 ];\n\t\t\t\tvertexPositions[ morphIndex + 1 ] += morphPositions[ i * 3 + 1 ];\n\t\t\t\tvertexPositions[ morphIndex + 2 ] += morphPositions[ i * 3 + 2 ];\n\n\t\t\t}\n\n\t\t\t// TODO: add morph normal support\n\t\t\tvar morphGeoInfo = {\n\t\t\t\tvertexIndices: vertexIndices,\n\t\t\t\tvertexPositions: vertexPositions,\n\t\t\t};\n\n\t\t\tvar morphBuffers = this.genBuffers( morphGeoInfo );\n\n\t\t\tvar positionAttribute = new THREE.Float32BufferAttribute( morphBuffers.vertex, 3 );\n\t\t\tpositionAttribute.name = morphGeoNode.attrName;\n\n\t\t\tpreTransform.applyToBufferAttribute( positionAttribute );\n\n\t\t\tparentGeo.morphAttributes.position.push( positionAttribute );\n\n\t\t},\n\n\t\t// Parse normal from FBXTree.Objects.Geometry.LayerElementNormal if it exists\n\t\tparseNormals: function ( NormalNode ) {\n\n\t\t\tvar mappingType = NormalNode.MappingInformationType;\n\t\t\tvar referenceType = NormalNode.ReferenceInformationType;\n\t\t\tvar buffer = NormalNode.Normals.a;\n\t\t\tvar indexBuffer = [];\n\t\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\t\tif ( 'NormalIndex' in NormalNode ) {\n\n\t\t\t\t\tindexBuffer = NormalNode.NormalIndex.a;\n\n\t\t\t\t} else if ( 'NormalsIndex' in NormalNode ) {\n\n\t\t\t\t\tindexBuffer = NormalNode.NormalsIndex.a;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdataSize: 3,\n\t\t\t\tbuffer: buffer,\n\t\t\t\tindices: indexBuffer,\n\t\t\t\tmappingType: mappingType,\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t},\n\n\t\t// Parse UVs from FBXTree.Objects.Geometry.LayerElementUV if it exists\n\t\tparseUVs: function ( UVNode ) {\n\n\t\t\tvar mappingType = UVNode.MappingInformationType;\n\t\t\tvar referenceType = UVNode.ReferenceInformationType;\n\t\t\tvar buffer = UVNode.UV.a;\n\t\t\tvar indexBuffer = [];\n\t\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\t\tindexBuffer = UVNode.UVIndex.a;\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdataSize: 2,\n\t\t\t\tbuffer: buffer,\n\t\t\t\tindices: indexBuffer,\n\t\t\t\tmappingType: mappingType,\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t},\n\n\t\t// Parse Vertex Colors from FBXTree.Objects.Geometry.LayerElementColor if it exists\n\t\tparseVertexColors: function ( ColorNode ) {\n\n\t\t\tvar mappingType = ColorNode.MappingInformationType;\n\t\t\tvar referenceType = ColorNode.ReferenceInformationType;\n\t\t\tvar buffer = ColorNode.Colors.a;\n\t\t\tvar indexBuffer = [];\n\t\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\t\tindexBuffer = ColorNode.ColorIndex.a;\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdataSize: 4,\n\t\t\t\tbuffer: buffer,\n\t\t\t\tindices: indexBuffer,\n\t\t\t\tmappingType: mappingType,\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t},\n\n\t\t// Parse mapping and material data in FBXTree.Objects.Geometry.LayerElementMaterial if it exists\n\t\tparseMaterialIndices: function ( MaterialNode ) {\n\n\t\t\tvar mappingType = MaterialNode.MappingInformationType;\n\t\t\tvar referenceType = MaterialNode.ReferenceInformationType;\n\n\t\t\tif ( mappingType === 'NoMappingInformation' ) {\n\n\t\t\t\treturn {\n\t\t\t\t\tdataSize: 1,\n\t\t\t\t\tbuffer: [ 0 ],\n\t\t\t\t\tindices: [ 0 ],\n\t\t\t\t\tmappingType: 'AllSame',\n\t\t\t\t\treferenceType: referenceType\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tvar materialIndexBuffer = MaterialNode.Materials.a;\n\n\t\t\t// Since materials are stored as indices, there's a bit of a mismatch between FBX and what\n\t\t\t// we expect.So we create an intermediate buffer that points to the index in the buffer,\n\t\t\t// for conforming with the other functions we've written for other data.\n\t\t\tvar materialIndices = [];\n\n\t\t\tfor ( var i = 0; i < materialIndexBuffer.length; ++ i ) {\n\n\t\t\t\tmaterialIndices.push( i );\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdataSize: 1,\n\t\t\t\tbuffer: materialIndexBuffer,\n\t\t\t\tindices: materialIndices,\n\t\t\t\tmappingType: mappingType,\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t},\n\n\t\t// Generate a NurbGeometry from a node in FBXTree.Objects.Geometry\n\t\tparseNurbsGeometry: function ( geoNode ) {\n\n\t\t\tif ( THREE.NURBSCurve === undefined ) {\n\n\t\t\t\tconsole.error( 'THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry.' );\n\t\t\t\treturn new THREE.BufferGeometry();\n\n\t\t\t}\n\n\t\t\tvar order = parseInt( geoNode.Order );\n\n\t\t\tif ( isNaN( order ) ) {\n\n\t\t\t\tconsole.error( 'THREE.FBXLoader: Invalid Order %s given for geometry ID: %s', geoNode.Order, geoNode.id );\n\t\t\t\treturn new THREE.BufferGeometry();\n\n\t\t\t}\n\n\t\t\tvar degree = order - 1;\n\n\t\t\tvar knots = geoNode.KnotVector.a;\n\t\t\tvar controlPoints = [];\n\t\t\tvar pointsValues = geoNode.Points.a;\n\n\t\t\tfor ( var i = 0, l = pointsValues.length; i < l; i += 4 ) {\n\n\t\t\t\tcontrolPoints.push( new THREE.Vector4().fromArray( pointsValues, i ) );\n\n\t\t\t}\n\n\t\t\tvar startKnot, endKnot;\n\n\t\t\tif ( geoNode.Form === 'Closed' ) {\n\n\t\t\t\tcontrolPoints.push( controlPoints[ 0 ] );\n\n\t\t\t} else if ( geoNode.Form === 'Periodic' ) {\n\n\t\t\t\tstartKnot = degree;\n\t\t\t\tendKnot = knots.length - 1 - startKnot;\n\n\t\t\t\tfor ( var i = 0; i < degree; ++ i ) {\n\n\t\t\t\t\tcontrolPoints.push( controlPoints[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar curve = new THREE.NURBSCurve( degree, knots, controlPoints, startKnot, endKnot );\n\t\t\tvar vertices = curve.getPoints( controlPoints.length * 7 );\n\n\t\t\tvar positions = new Float32Array( vertices.length * 3 );\n\n\t\t\tvertices.forEach( function ( vertex, i ) {\n\n\t\t\t\tvertex.toArray( positions, i * 3 );\n\n\t\t\t} );\n\n\t\t\tvar geometry = new THREE.BufferGeometry();\n\t\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\n\n\t\t\treturn geometry;\n\n\t\t},\n\n\t};\n\n\t// parse animation data from FBXTree\n\tfunction AnimationParser() {}\n\n\tAnimationParser.prototype = {\n\n\t\tconstructor: AnimationParser,\n\n\t\t// take raw animation clips and turn them into three.js animation clips\n\t\tparse: function () {\n\n\t\t\tvar animationClips = [];\n\n\n\t\t\tvar rawClips = this.parseClips();\n\n\t\t\tif ( rawClips === undefined ) return animationClips;\n\n\t\t\tfor ( var key in rawClips ) {\n\n\t\t\t\tvar rawClip = rawClips[ key ];\n\n\t\t\t\tvar clip = this.addClip( rawClip );\n\n\t\t\t\tanimationClips.push( clip );\n\n\t\t\t}\n\n\t\t\treturn animationClips;\n\n\t\t},\n\n\t\tparseClips: function () {\n\n\t\t\t// since the actual transformation data is stored in FBXTree.Objects.AnimationCurve,\n\t\t\t// if this is undefined we can safely assume there are no animations\n\t\t\tif ( fbxTree.Objects.AnimationCurve === undefined ) return undefined;\n\n\t\t\tvar curveNodesMap = this.parseAnimationCurveNodes();\n\n\t\t\tthis.parseAnimationCurves( curveNodesMap );\n\n\t\t\tvar layersMap = this.parseAnimationLayers( curveNodesMap );\n\t\t\tvar rawClips = this.parseAnimStacks( layersMap );\n\n\t\t\treturn rawClips;\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.AnimationCurveNode\n\t\t// each AnimationCurveNode holds data for an animation transform for a model (e.g. left arm rotation )\n\t\t// and is referenced by an AnimationLayer\n\t\tparseAnimationCurveNodes: function () {\n\n\t\t\tvar rawCurveNodes = fbxTree.Objects.AnimationCurveNode;\n\n\t\t\tvar curveNodesMap = new Map();\n\n\t\t\tfor ( var nodeID in rawCurveNodes ) {\n\n\t\t\t\tvar rawCurveNode = rawCurveNodes[ nodeID ];\n\n\t\t\t\tif ( rawCurveNode.attrName.match( /S|R|T|DeformPercent/ ) !== null ) {\n\n\t\t\t\t\tvar curveNode = {\n\n\t\t\t\t\t\tid: rawCurveNode.id,\n\t\t\t\t\t\tattr: rawCurveNode.attrName,\n\t\t\t\t\t\tcurves: {},\n\n\t\t\t\t\t};\n\n\t\t\t\t\tcurveNodesMap.set( curveNode.id, curveNode );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn curveNodesMap;\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.AnimationCurve and connect them up to\n\t\t// previously parsed AnimationCurveNodes. Each AnimationCurve holds data for a single animated\n\t\t// axis ( e.g. times and values of x rotation)\n\t\tparseAnimationCurves: function ( curveNodesMap ) {\n\n\t\t\tvar rawCurves = fbxTree.Objects.AnimationCurve;\n\n\t\t\t// TODO: Many values are identical up to roundoff error, but won't be optimised\n\t\t\t// e.g. position times: [0, 0.4, 0. 8]\n\t\t\t// position values: [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.235384487103147e-7, 93.67520904541016, -0.9982695579528809]\n\t\t\t// clearly, this should be optimised to\n\t\t\t// times: [0], positions [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809]\n\t\t\t// this shows up in nearly every FBX file, and generally time array is length > 100\n\n\t\t\tfor ( var nodeID in rawCurves ) {\n\n\t\t\t\tvar animationCurve = {\n\n\t\t\t\t\tid: rawCurves[ nodeID ].id,\n\t\t\t\t\ttimes: rawCurves[ nodeID ].KeyTime.a.map( convertFBXTimeToSeconds ),\n\t\t\t\t\tvalues: rawCurves[ nodeID ].KeyValueFloat.a,\n\n\t\t\t\t};\n\n\t\t\t\tvar relationships = connections.get( animationCurve.id );\n\n\t\t\t\tif ( relationships !== undefined ) {\n\n\t\t\t\t\tvar animationCurveID = relationships.parents[ 0 ].ID;\n\t\t\t\t\tvar animationCurveRelationship = relationships.parents[ 0 ].relationship;\n\n\t\t\t\t\tif ( animationCurveRelationship.match( /X/ ) ) {\n\n\t\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'x' ] = animationCurve;\n\n\t\t\t\t\t} else if ( animationCurveRelationship.match( /Y/ ) ) {\n\n\t\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'y' ] = animationCurve;\n\n\t\t\t\t\t} else if ( animationCurveRelationship.match( /Z/ ) ) {\n\n\t\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'z' ] = animationCurve;\n\n\t\t\t\t\t} else if ( animationCurveRelationship.match( /d|DeformPercent/ ) && curveNodesMap.has( animationCurveID ) ) {\n\n\t\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'morph' ] = animationCurve;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.AnimationLayer. Each layers holds references\n\t\t// to various AnimationCurveNodes and is referenced by an AnimationStack node\n\t\t// note: theoretically a stack can have multiple layers, however in practice there always seems to be one per stack\n\t\tparseAnimationLayers: function ( curveNodesMap ) {\n\n\t\t\tvar rawLayers = fbxTree.Objects.AnimationLayer;\n\n\t\t\tvar layersMap = new Map();\n\n\t\t\tfor ( var nodeID in rawLayers ) {\n\n\t\t\t\tvar layerCurveNodes = [];\n\n\t\t\t\tvar connection = connections.get( parseInt( nodeID ) );\n\n\t\t\t\tif ( connection !== undefined ) {\n\n\t\t\t\t\t// all the animationCurveNodes used in the layer\n\t\t\t\t\tvar children = connection.children;\n\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tchildren.forEach( function ( child, i ) {\n\n\t\t\t\t\t\tif ( curveNodesMap.has( child.ID ) ) {\n\n\t\t\t\t\t\t\tvar curveNode = curveNodesMap.get( child.ID );\n\n\t\t\t\t\t\t\t// check that the curves are defined for at least one axis, otherwise ignore the curveNode\n\t\t\t\t\t\t\tif ( curveNode.curves.x !== undefined || curveNode.curves.y !== undefined || curveNode.curves.z !== undefined ) {\n\n\t\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] === undefined ) {\n\n\t\t\t\t\t\t\t\t\tvar modelID;\n\n\t\t\t\t\t\t\t\t\tconnections.get( child.ID ).parents.forEach( function ( parent ) {\n\n\t\t\t\t\t\t\t\t\t\tif ( parent.relationship !== undefined ) modelID = parent.ID;\n\n\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t\tvar rawModel = fbxTree.Objects.Model[ modelID.toString() ];\n\n\t\t\t\t\t\t\t\t\tvar node = {\n\n\t\t\t\t\t\t\t\t\t\tmodelName: THREE.PropertyBinding.sanitizeNodeName( rawModel.attrName ),\n\t\t\t\t\t\t\t\t\t\tinitialPosition: [ 0, 0, 0 ],\n\t\t\t\t\t\t\t\t\t\tinitialRotation: [ 0, 0, 0 ],\n\t\t\t\t\t\t\t\t\t\tinitialScale: [ 1, 1, 1 ],\n\t\t\t\t\t\t\t\t\t\ttransform: self.getModelAnimTransform( rawModel ),\n\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t// if the animated model is pre rotated, we'll have to apply the pre rotations to every\n\t\t\t\t\t\t\t\t\t// animation value as well\n\t\t\t\t\t\t\t\t\tif ( 'PreRotation' in rawModel ) node.preRotations = rawModel.PreRotation.value;\n\t\t\t\t\t\t\t\t\tif ( 'PostRotation' in rawModel ) node.postRotations = rawModel.PostRotation.value;\n\n\t\t\t\t\t\t\t\t\tlayerCurveNodes[ i ] = node;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tlayerCurveNodes[ i ][ curveNode.attr ] = curveNode;\n\n\t\t\t\t\t\t\t} else if ( curveNode.curves.morph !== undefined ) {\n\n\t\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] === undefined ) {\n\n\t\t\t\t\t\t\t\t\tvar deformerID;\n\n\t\t\t\t\t\t\t\t\tconnections.get( child.ID ).parents.forEach( function ( parent ) {\n\n\t\t\t\t\t\t\t\t\t\tif ( parent.relationship !== undefined ) deformerID = parent.ID;\n\n\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t\tvar morpherID = connections.get( deformerID ).parents[ 0 ].ID;\n\t\t\t\t\t\t\t\t\tvar geoID = connections.get( morpherID ).parents[ 0 ].ID;\n\n\t\t\t\t\t\t\t\t\t// assuming geometry is not used in more than one model\n\t\t\t\t\t\t\t\t\tvar modelID = connections.get( geoID ).parents[ 0 ].ID;\n\n\t\t\t\t\t\t\t\t\tvar rawModel = fbxTree.Objects.Model[ modelID ];\n\n\t\t\t\t\t\t\t\t\tvar node = {\n\n\t\t\t\t\t\t\t\t\t\tmodelName: THREE.PropertyBinding.sanitizeNodeName( rawModel.attrName ),\n\t\t\t\t\t\t\t\t\t\tmorphName: fbxTree.Objects.Deformer[ deformerID ].attrName,\n\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tlayerCurveNodes[ i ] = node;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tlayerCurveNodes[ i ][ curveNode.attr ] = curveNode;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t\tlayersMap.set( parseInt( nodeID ), layerCurveNodes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn layersMap;\n\n\t\t},\n\n\t\tgetModelAnimTransform: function ( modelNode ) {\n\n\t\t\tvar transformData = {};\n\n\t\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = parseInt( modelNode.RotationOrder.value );\n\n\t\t\tif ( 'Lcl_Translation' in modelNode ) transformData.translation = modelNode.Lcl_Translation.value;\n\t\t\tif ( 'RotationOffset' in modelNode ) transformData.rotationOffset = modelNode.RotationOffset.value;\n\n\t\t\tif ( 'Lcl_Rotation' in modelNode ) transformData.rotation = modelNode.Lcl_Rotation.value;\n\t\t\tif ( 'PreRotation' in modelNode ) transformData.preRotation = modelNode.PreRotation.value;\n\n\t\t\tif ( 'PostRotation' in modelNode ) transformData.postRotation = modelNode.PostRotation.value;\n\n\t\t\tif ( 'Lcl_Scaling' in modelNode ) transformData.scale = modelNode.Lcl_Scaling.value;\n\n\t\t\treturn generateTransform( transformData );\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.AnimationStack. These are the top level node in the animation\n\t\t// hierarchy. Each Stack node will be used to create a THREE.AnimationClip\n\t\tparseAnimStacks: function ( layersMap ) {\n\n\t\t\tvar rawStacks = fbxTree.Objects.AnimationStack;\n\n\t\t\t// connect the stacks (clips) up to the layers\n\t\t\tvar rawClips = {};\n\n\t\t\tfor ( var nodeID in rawStacks ) {\n\n\t\t\t\tvar children = connections.get( parseInt( nodeID ) ).children;\n\n\t\t\t\tif ( children.length > 1 ) {\n\n\t\t\t\t\t// it seems like stacks will always be associated with a single layer. But just in case there are files\n\t\t\t\t\t// where there are multiple layers per stack, we'll display a warning\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.' );\n\n\t\t\t\t}\n\n\t\t\t\tvar layer = layersMap.get( children[ 0 ].ID );\n\n\t\t\t\trawClips[ nodeID ] = {\n\n\t\t\t\t\tname: rawStacks[ nodeID ].attrName,\n\t\t\t\t\tlayer: layer,\n\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\treturn rawClips;\n\n\t\t},\n\n\t\taddClip: function ( rawClip ) {\n\n\t\t\tvar tracks = [];\n\n\t\t\tvar self = this;\n\t\t\trawClip.layer.forEach( function ( rawTracks ) {\n\n\t\t\t\ttracks = tracks.concat( self.generateTracks( rawTracks ) );\n\n\t\t\t} );\n\n\t\t\treturn new THREE.AnimationClip( rawClip.name, - 1, tracks );\n\n\t\t},\n\n\t\tgenerateTracks: function ( rawTracks ) {\n\n\t\t\tvar tracks = [];\n\n\t\t\tvar initialPosition = new THREE.Vector3();\n\t\t\tvar initialRotation = new THREE.Quaternion();\n\t\t\tvar initialScale = new THREE.Vector3();\n\n\t\t\tif ( rawTracks.transform ) rawTracks.transform.decompose( initialPosition, initialRotation, initialScale );\n\n\t\t\tinitialPosition = initialPosition.toArray();\n\t\t\tinitialRotation = new THREE.Euler().setFromQuaternion( initialRotation ).toArray(); // todo: euler order\n\t\t\tinitialScale = initialScale.toArray();\n\n\t\t\tif ( rawTracks.T !== undefined && Object.keys( rawTracks.T.curves ).length > 0 ) {\n\n\t\t\t\tvar positionTrack = this.generateVectorTrack( rawTracks.modelName, rawTracks.T.curves, initialPosition, 'position' );\n\t\t\t\tif ( positionTrack !== undefined ) tracks.push( positionTrack );\n\n\t\t\t}\n\n\t\t\tif ( rawTracks.R !== undefined && Object.keys( rawTracks.R.curves ).length > 0 ) {\n\n\t\t\t\tvar rotationTrack = this.generateRotationTrack( rawTracks.modelName, rawTracks.R.curves, initialRotation, rawTracks.preRotations, rawTracks.postRotations );\n\t\t\t\tif ( rotationTrack !== undefined ) tracks.push( rotationTrack );\n\n\t\t\t}\n\n\t\t\tif ( rawTracks.S !== undefined && Object.keys( rawTracks.S.curves ).length > 0 ) {\n\n\t\t\t\tvar scaleTrack = this.generateVectorTrack( rawTracks.modelName, rawTracks.S.curves, initialScale, 'scale' );\n\t\t\t\tif ( scaleTrack !== undefined ) tracks.push( scaleTrack );\n\n\t\t\t}\n\n\t\t\tif ( rawTracks.DeformPercent !== undefined ) {\n\n\t\t\t\tvar morphTrack = this.generateMorphTrack( rawTracks );\n\t\t\t\tif ( morphTrack !== undefined ) tracks.push( morphTrack );\n\n\t\t\t}\n\n\t\t\treturn tracks;\n\n\t\t},\n\n\t\tgenerateVectorTrack: function ( modelName, curves, initialValue, type ) {\n\n\t\t\tvar times = this.getTimesForAllAxes( curves );\n\t\t\tvar values = this.getKeyframeTrackValues( times, curves, initialValue );\n\n\t\t\treturn new THREE.VectorKeyframeTrack( modelName + '.' + type, times, values );\n\n\t\t},\n\n\t\tgenerateRotationTrack: function ( modelName, curves, initialValue, preRotations, postRotations ) {\n\n\t\t\tif ( curves.x !== undefined ) {\n\n\t\t\t\tthis.interpolateRotations( curves.x );\n\t\t\t\tcurves.x.values = curves.x.values.map( THREE.Math.degToRad );\n\n\t\t\t}\n\t\t\tif ( curves.y !== undefined ) {\n\n\t\t\t\tthis.interpolateRotations( curves.y );\n\t\t\t\tcurves.y.values = curves.y.values.map( THREE.Math.degToRad );\n\n\t\t\t}\n\t\t\tif ( curves.z !== undefined ) {\n\n\t\t\t\tthis.interpolateRotations( curves.z );\n\t\t\t\tcurves.z.values = curves.z.values.map( THREE.Math.degToRad );\n\n\t\t\t}\n\n\t\t\tvar times = this.getTimesForAllAxes( curves );\n\t\t\tvar values = this.getKeyframeTrackValues( times, curves, initialValue );\n\n\t\t\tif ( preRotations !== undefined ) {\n\n\t\t\t\tpreRotations = preRotations.map( THREE.Math.degToRad );\n\t\t\t\tpreRotations.push( 'ZYX' );\n\n\t\t\t\tpreRotations = new THREE.Euler().fromArray( preRotations );\n\t\t\t\tpreRotations = new THREE.Quaternion().setFromEuler( preRotations );\n\n\t\t\t}\n\n\t\t\tif ( postRotations !== undefined ) {\n\n\t\t\t\tpostRotations = postRotations.map( THREE.Math.degToRad );\n\t\t\t\tpostRotations.push( 'ZYX' );\n\n\t\t\t\tpostRotations = new THREE.Euler().fromArray( postRotations );\n\t\t\t\tpostRotations = new THREE.Quaternion().setFromEuler( postRotations ).inverse();\n\n\t\t\t}\n\n\t\t\tvar quaternion = new THREE.Quaternion();\n\t\t\tvar euler = new THREE.Euler();\n\n\t\t\tvar quaternionValues = [];\n\n\t\t\tfor ( var i = 0; i < values.length; i += 3 ) {\n\n\t\t\t\teuler.set( values[ i ], values[ i + 1 ], values[ i + 2 ], 'ZYX' );\n\n\t\t\t\tquaternion.setFromEuler( euler );\n\n\t\t\t\tif ( preRotations !== undefined ) quaternion.premultiply( preRotations );\n\t\t\t\tif ( postRotations !== undefined ) quaternion.multiply( postRotations );\n\n\t\t\t\tquaternion.toArray( quaternionValues, ( i / 3 ) * 4 );\n\n\t\t\t}\n\n\t\t\treturn new THREE.QuaternionKeyframeTrack( modelName + '.quaternion', times, quaternionValues );\n\n\t\t},\n\n\t\tgenerateMorphTrack: function ( rawTracks ) {\n\n\t\t\tvar curves = rawTracks.DeformPercent.curves.morph;\n\t\t\tvar values = curves.values.map( function ( val ) {\n\n\t\t\t\treturn val / 100;\n\n\t\t\t} );\n\n\t\t\tvar morphNum = sceneGraph.getObjectByName( rawTracks.modelName ).morphTargetDictionary[ rawTracks.morphName ];\n\n\t\t\treturn new THREE.NumberKeyframeTrack( rawTracks.modelName + '.morphTargetInfluences[' + morphNum + ']', curves.times, values );\n\n\t\t},\n\n\t\t// For all animated objects, times are defined separately for each axis\n\t\t// Here we'll combine the times into one sorted array without duplicates\n\t\tgetTimesForAllAxes: function ( curves ) {\n\n\t\t\tvar times = [];\n\n\t\t\t// first join together the times for each axis, if defined\n\t\t\tif ( curves.x !== undefined ) times = times.concat( curves.x.times );\n\t\t\tif ( curves.y !== undefined ) times = times.concat( curves.y.times );\n\t\t\tif ( curves.z !== undefined ) times = times.concat( curves.z.times );\n\n\t\t\t// then sort them and remove duplicates\n\t\t\ttimes = times.sort( function ( a, b ) {\n\n\t\t\t\treturn a - b;\n\n\t\t\t} ).filter( function ( elem, index, array ) {\n\n\t\t\t\treturn array.indexOf( elem ) == index;\n\n\t\t\t} );\n\n\t\t\treturn times;\n\n\t\t},\n\n\t\tgetKeyframeTrackValues: function ( times, curves, initialValue ) {\n\n\t\t\tvar prevValue = initialValue;\n\n\t\t\tvar values = [];\n\n\t\t\tvar xIndex = - 1;\n\t\t\tvar yIndex = - 1;\n\t\t\tvar zIndex = - 1;\n\n\t\t\ttimes.forEach( function ( time ) {\n\n\t\t\t\tif ( curves.x ) xIndex = curves.x.times.indexOf( time );\n\t\t\t\tif ( curves.y ) yIndex = curves.y.times.indexOf( time );\n\t\t\t\tif ( curves.z ) zIndex = curves.z.times.indexOf( time );\n\n\t\t\t\t// if there is an x value defined for this frame, use that\n\t\t\t\tif ( xIndex !== - 1 ) {\n\n\t\t\t\t\tvar xValue = curves.x.values[ xIndex ];\n\t\t\t\t\tvalues.push( xValue );\n\t\t\t\t\tprevValue[ 0 ] = xValue;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// otherwise use the x value from the previous frame\n\t\t\t\t\tvalues.push( prevValue[ 0 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( yIndex !== - 1 ) {\n\n\t\t\t\t\tvar yValue = curves.y.values[ yIndex ];\n\t\t\t\t\tvalues.push( yValue );\n\t\t\t\t\tprevValue[ 1 ] = yValue;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvalues.push( prevValue[ 1 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( zIndex !== - 1 ) {\n\n\t\t\t\t\tvar zValue = curves.z.values[ zIndex ];\n\t\t\t\t\tvalues.push( zValue );\n\t\t\t\t\tprevValue[ 2 ] = zValue;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvalues.push( prevValue[ 2 ] );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn values;\n\n\t\t},\n\n\t\t// Rotations are defined as Euler angles which can have values  of any size\n\t\t// These will be converted to quaternions which don't support values greater than\n\t\t// PI, so we'll interpolate large rotations\n\t\tinterpolateRotations: function ( curve ) {\n\n\t\t\tfor ( var i = 1; i < curve.values.length; i ++ ) {\n\n\t\t\t\tvar initialValue = curve.values[ i - 1 ];\n\t\t\t\tvar valuesSpan = curve.values[ i ] - initialValue;\n\n\t\t\t\tvar absoluteSpan = Math.abs( valuesSpan );\n\n\t\t\t\tif ( absoluteSpan >= 180 ) {\n\n\t\t\t\t\tvar numSubIntervals = absoluteSpan / 180;\n\n\t\t\t\t\tvar step = valuesSpan / numSubIntervals;\n\t\t\t\t\tvar nextValue = initialValue + step;\n\n\t\t\t\t\tvar initialTime = curve.times[ i - 1 ];\n\t\t\t\t\tvar timeSpan = curve.times[ i ] - initialTime;\n\t\t\t\t\tvar interval = timeSpan / numSubIntervals;\n\t\t\t\t\tvar nextTime = initialTime + interval;\n\n\t\t\t\t\tvar interpolatedTimes = [];\n\t\t\t\t\tvar interpolatedValues = [];\n\n\t\t\t\t\twhile ( nextTime < curve.times[ i ] ) {\n\n\t\t\t\t\t\tinterpolatedTimes.push( nextTime );\n\t\t\t\t\t\tnextTime += interval;\n\n\t\t\t\t\t\tinterpolatedValues.push( nextValue );\n\t\t\t\t\t\tnextValue += step;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurve.times = inject( curve.times, i, interpolatedTimes );\n\t\t\t\t\tcurve.values = inject( curve.values, i, interpolatedValues );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t};\n\n\t// parse an FBX file in ASCII format\n\tfunction TextParser() {}\n\n\tTextParser.prototype = {\n\n\t\tconstructor: TextParser,\n\n\t\tgetPrevNode: function () {\n\n\t\t\treturn this.nodeStack[ this.currentIndent - 2 ];\n\n\t\t},\n\n\t\tgetCurrentNode: function () {\n\n\t\t\treturn this.nodeStack[ this.currentIndent - 1 ];\n\n\t\t},\n\n\t\tgetCurrentProp: function () {\n\n\t\t\treturn this.currentProp;\n\n\t\t},\n\n\t\tpushStack: function ( node ) {\n\n\t\t\tthis.nodeStack.push( node );\n\t\t\tthis.currentIndent += 1;\n\n\t\t},\n\n\t\tpopStack: function () {\n\n\t\t\tthis.nodeStack.pop();\n\t\t\tthis.currentIndent -= 1;\n\n\t\t},\n\n\t\tsetCurrentProp: function ( val, name ) {\n\n\t\t\tthis.currentProp = val;\n\t\t\tthis.currentPropName = name;\n\n\t\t},\n\n\t\tparse: function ( text ) {\n\n\t\t\tthis.currentIndent = 0;\n\t\t\tconsole.log(\"FBXTree: \", FBXTree);\n\t\t\tthis.allNodes = new FBXTree();\n\t\t\tthis.nodeStack = [];\n\t\t\tthis.currentProp = [];\n\t\t\tthis.currentPropName = '';\n\n\t\t\tvar self = this;\n\n\t\t\tvar split = text.split( /[\\r\\n]+/ );\n\n\t\t\tsplit.forEach( function ( line, i ) {\n\n\t\t\t\tvar matchComment = line.match( /^[\\s\\t]*;/ );\n\t\t\t\tvar matchEmpty = line.match( /^[\\s\\t]*$/ );\n\n\t\t\t\tif ( matchComment || matchEmpty ) return;\n\n\t\t\t\tvar matchBeginning = line.match( '^\\\\t{' + self.currentIndent + '}(\\\\w+):(.*){', '' );\n\t\t\t\tvar matchProperty = line.match( '^\\\\t{' + ( self.currentIndent ) + '}(\\\\w+):[\\\\s\\\\t\\\\r\\\\n](.*)' );\n\t\t\t\tvar matchEnd = line.match( '^\\\\t{' + ( self.currentIndent - 1 ) + '}}' );\n\n\t\t\t\tif ( matchBeginning ) {\n\n\t\t\t\t\tself.parseNodeBegin( line, matchBeginning );\n\n\t\t\t\t} else if ( matchProperty ) {\n\n\t\t\t\t\tself.parseNodeProperty( line, matchProperty, split[ ++ i ] );\n\n\t\t\t\t} else if ( matchEnd ) {\n\n\t\t\t\t\tself.popStack();\n\n\t\t\t\t} else if ( line.match( /^[^\\s\\t}]/ ) ) {\n\n\t\t\t\t\t// large arrays are split over multiple lines terminated with a ',' character\n\t\t\t\t\t// if this is encountered the line needs to be joined to the previous line\n\t\t\t\t\tself.parseNodePropertyContinued( line );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn this.allNodes;\n\n\t\t},\n\n\t\tparseNodeBegin: function ( line, property ) {\n\n\t\t\tvar nodeName = property[ 1 ].trim().replace( /^\"/, '' ).replace( /\"$/, '' );\n\n\t\t\tvar nodeAttrs = property[ 2 ].split( ',' ).map( function ( attr ) {\n\n\t\t\t\treturn attr.trim().replace( /^\"/, '' ).replace( /\"$/, '' );\n\n\t\t\t} );\n\n\t\t\tvar node = { name: nodeName };\n\t\t\tvar attrs = this.parseNodeAttr( nodeAttrs );\n\n\t\t\tvar currentNode = this.getCurrentNode();\n\n\t\t\t// a top node\n\t\t\tif ( this.currentIndent === 0 ) {\n\n\t\t\t\tthis.allNodes.add( nodeName, node );\n\n\t\t\t} else { // a subnode\n\n\t\t\t\t// if the subnode already exists, append it\n\t\t\t\tif ( nodeName in currentNode ) {\n\n\t\t\t\t// special case Pose needs PoseNodes as an array\n\t\t\t\t\tif ( nodeName === 'PoseNode' ) {\n\n\t\t\t\t\t\tcurrentNode.PoseNode.push( node );\n\n\t\t\t\t\t} else if ( currentNode[ nodeName ].id !== undefined ) {\n\n\t\t\t\t\t\tcurrentNode[ nodeName ] = {};\n\t\t\t\t\t\tcurrentNode[ nodeName ][ currentNode[ nodeName ].id ] = currentNode[ nodeName ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attrs.id !== '' ) currentNode[ nodeName ][ attrs.id ] = node;\n\n\t\t\t\t} else if ( typeof attrs.id === 'number' ) {\n\n\t\t\t\t\tcurrentNode[ nodeName ] = {};\n\t\t\t\t\tcurrentNode[ nodeName ][ attrs.id ] = node;\n\n\t\t\t\t} else if ( nodeName !== 'Properties70' ) {\n\n\t\t\t\t\tif ( nodeName === 'PoseNode' )\tcurrentNode[ nodeName ] = [ node ];\n\t\t\t\t\telse currentNode[ nodeName ] = node;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( typeof attrs.id === 'number' ) node.id = attrs.id;\n\t\t\tif ( attrs.name !== '' ) node.attrName = attrs.name;\n\t\t\tif ( attrs.type !== '' ) node.attrType = attrs.type;\n\n\t\t\tthis.pushStack( node );\n\n\t\t},\n\n\t\tparseNodeAttr: function ( attrs ) {\n\n\t\t\tvar id = attrs[ 0 ];\n\n\t\t\tif ( attrs[ 0 ] !== '' ) {\n\n\t\t\t\tid = parseInt( attrs[ 0 ] );\n\n\t\t\t\tif ( isNaN( id ) ) {\n\n\t\t\t\t\tid = attrs[ 0 ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar name = '', type = '';\n\n\t\t\tif ( attrs.length > 1 ) {\n\n\t\t\t\tname = attrs[ 1 ].replace( /^(\\w+)::/, '' );\n\t\t\t\ttype = attrs[ 2 ];\n\n\t\t\t}\n\n\t\t\treturn { id: id, name: name, type: type };\n\n\t\t},\n\n\t\tparseNodeProperty: function ( line, property, contentLine ) {\n\n\t\t\tvar propName = property[ 1 ].replace( /^\"/, '' ).replace( /\"$/, '' ).trim();\n\t\t\tvar propValue = property[ 2 ].replace( /^\"/, '' ).replace( /\"$/, '' ).trim();\n\n\t\t\t// for special case: base64 image data follows \"Content: ,\" line\n\t\t\t//\tContent: ,\n\t\t\t//\t \"/9j/4RDaRXhpZgAATU0A...\"\n\t\t\tif ( propName === 'Content' && propValue === ',' ) {\n\n\t\t\t\tpropValue = contentLine.replace( /\"/g, '' ).replace( /,$/, '' ).trim();\n\n\t\t\t}\n\n\t\t\tvar currentNode = this.getCurrentNode();\n\t\t\tvar parentName = currentNode.name;\n\n\t\t\tif ( parentName === 'Properties70' ) {\n\n\t\t\t\tthis.parseNodeSpecialProperty( line, propName, propValue );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t// Connections\n\t\t\tif ( propName === 'C' ) {\n\n\t\t\t\tvar connProps = propValue.split( ',' ).slice( 1 );\n\t\t\t\tvar from = parseInt( connProps[ 0 ] );\n\t\t\t\tvar to = parseInt( connProps[ 1 ] );\n\n\t\t\t\tvar rest = propValue.split( ',' ).slice( 3 );\n\n\t\t\t\trest = rest.map( function ( elem ) {\n\n\t\t\t\t\treturn elem.trim().replace( /^\"/, '' );\n\n\t\t\t\t} );\n\n\t\t\t\tpropName = 'connections';\n\t\t\t\tpropValue = [ from, to ];\n\t\t\t\tappend( propValue, rest );\n\n\t\t\t\tif ( currentNode[ propName ] === undefined ) {\n\n\t\t\t\t\tcurrentNode[ propName ] = [];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Node\n\t\t\tif ( propName === 'Node' ) currentNode.id = propValue;\n\n\t\t\t// connections\n\t\t\tif ( propName in currentNode && Array.isArray( currentNode[ propName ] ) ) {\n\n\t\t\t\tcurrentNode[ propName ].push( propValue );\n\n\t\t\t} else {\n\n\t\t\t\tif ( propName !== 'a' ) currentNode[ propName ] = propValue;\n\t\t\t\telse currentNode.a = propValue;\n\n\t\t\t}\n\n\t\t\tthis.setCurrentProp( currentNode, propName );\n\n\t\t\t// convert string to array, unless it ends in ',' in which case more will be added to it\n\t\t\tif ( propName === 'a' && propValue.slice( - 1 ) !== ',' ) {\n\n\t\t\t\tcurrentNode.a = parseNumberArray( propValue );\n\n\t\t\t}\n\n\t\t},\n\n\t\tparseNodePropertyContinued: function ( line ) {\n\n\t\t\tvar currentNode = this.getCurrentNode();\n\n\t\t\tcurrentNode.a += line;\n\n\t\t\t// if the line doesn't end in ',' we have reached the end of the property value\n\t\t\t// so convert the string to an array\n\t\t\tif ( line.slice( - 1 ) !== ',' ) {\n\n\t\t\t\tcurrentNode.a = parseNumberArray( currentNode.a );\n\n\t\t\t}\n\n\t\t},\n\n\t\t// parse \"Property70\"\n\t\tparseNodeSpecialProperty: function ( line, propName, propValue ) {\n\n\t\t\t// split this\n\t\t\t// P: \"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\",1,1,1\n\t\t\t// into array like below\n\t\t\t// [\"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\", \"1,1,1\" ]\n\t\t\tvar props = propValue.split( '\",' ).map( function ( prop ) {\n\n\t\t\t\treturn prop.trim().replace( /^\\\"/, '' ).replace( /\\s/, '_' );\n\n\t\t\t} );\n\n\t\t\tvar innerPropName = props[ 0 ];\n\t\t\tvar innerPropType1 = props[ 1 ];\n\t\t\tvar innerPropType2 = props[ 2 ];\n\t\t\tvar innerPropFlag = props[ 3 ];\n\t\t\tvar innerPropValue = props[ 4 ];\n\n\t\t\t// cast values where needed, otherwise leave as strings\n\t\t\tswitch ( innerPropType1 ) {\n\n\t\t\t\tcase 'int':\n\t\t\t\tcase 'enum':\n\t\t\t\tcase 'bool':\n\t\t\t\tcase 'ULongLong':\n\t\t\t\tcase 'double':\n\t\t\t\tcase 'Number':\n\t\t\t\tcase 'FieldOfView':\n\t\t\t\t\tinnerPropValue = parseFloat( innerPropValue );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Color':\n\t\t\t\tcase 'ColorRGB':\n\t\t\t\tcase 'Vector3D':\n\t\t\t\tcase 'Lcl_Translation':\n\t\t\t\tcase 'Lcl_Rotation':\n\t\t\t\tcase 'Lcl_Scaling':\n\t\t\t\t\tinnerPropValue = parseNumberArray( innerPropValue );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\t// CAUTION: these props must append to parent's parent\n\t\t\tthis.getPrevNode()[ innerPropName ] = {\n\n\t\t\t\t'type': innerPropType1,\n\t\t\t\t'type2': innerPropType2,\n\t\t\t\t'flag': innerPropFlag,\n\t\t\t\t'value': innerPropValue\n\n\t\t\t};\n\n\t\t\tthis.setCurrentProp( this.getPrevNode(), innerPropName );\n\n\t\t},\n\n\t};\n\n\t// Parse an FBX file in Binary format\n\tfunction BinaryParser() {}\n\n\tBinaryParser.prototype = {\n\n\t\tconstructor: BinaryParser,\n\n\t\tparse: function ( buffer ) {\n\n\t\t\tvar reader = new BinaryReader( buffer );\n\t\t\treader.skip( 23 ); // skip magic 23 bytes\n\n\t\t\tvar version = reader.getUint32();\n\n\t\t\tconsole.log( 'THREE.FBXLoader: FBX binary version: ' + version );\n\n\t\t\tvar allNodes = new FBXTree();\n\n\t\t\twhile ( ! this.endOfContent( reader ) ) {\n\n\t\t\t\tvar node = this.parseNode( reader, version );\n\t\t\t\tif ( node !== null ) allNodes.add( node.name, node );\n\n\t\t\t}\n\n\t\t\treturn allNodes;\n\n\t\t},\n\n\t\t// Check if reader has reached the end of content.\n\t\tendOfContent: function ( reader ) {\n\n\t\t\t// footer size: 160bytes + 16-byte alignment padding\n\t\t\t// - 16bytes: magic\n\t\t\t// - padding til 16-byte alignment (at least 1byte?)\n\t\t\t//\t(seems like some exporters embed fixed 15 or 16bytes?)\n\t\t\t// - 4bytes: magic\n\t\t\t// - 4bytes: version\n\t\t\t// - 120bytes: zero\n\t\t\t// - 16bytes: magic\n\t\t\tif ( reader.size() % 16 === 0 ) {\n\n\t\t\t\treturn ( ( reader.getOffset() + 160 + 16 ) & ~ 0xf ) >= reader.size();\n\n\t\t\t} else {\n\n\t\t\t\treturn reader.getOffset() + 160 + 16 >= reader.size();\n\n\t\t\t}\n\n\t\t},\n\n\t\t// recursively parse nodes until the end of the file is reached\n\t\tparseNode: function ( reader, version ) {\n\n\t\t\tvar node = {};\n\n\t\t\t// The first three data sizes depends on version.\n\t\t\tvar endOffset = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\t\t\tvar numProperties = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\n\t\t\t// note: do not remove this even if you get a linter warning as it moves the buffer forward\n\t\t\tvar propertyListLen = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\n\t\t\tvar nameLen = reader.getUint8();\n\t\t\tvar name = reader.getString( nameLen );\n\n\t\t\t// Regards this node as NULL-record if endOffset is zero\n\t\t\tif ( endOffset === 0 ) return null;\n\n\t\t\tvar propertyList = [];\n\n\t\t\tfor ( var i = 0; i < numProperties; i ++ ) {\n\n\t\t\t\tpropertyList.push( this.parseProperty( reader ) );\n\n\t\t\t}\n\n\t\t\t// Regards the first three elements in propertyList as id, attrName, and attrType\n\t\t\tvar id = propertyList.length > 0 ? propertyList[ 0 ] : '';\n\t\t\tvar attrName = propertyList.length > 1 ? propertyList[ 1 ] : '';\n\t\t\tvar attrType = propertyList.length > 2 ? propertyList[ 2 ] : '';\n\n\t\t\t// check if this node represents just a single property\n\t\t\t// like (name, 0) set or (name2, [0, 1, 2]) set of {name: 0, name2: [0, 1, 2]}\n\t\t\tnode.singleProperty = ( numProperties === 1 && reader.getOffset() === endOffset ) ? true : false;\n\n\t\t\twhile ( endOffset > reader.getOffset() ) {\n\n\t\t\t\tvar subNode = this.parseNode( reader, version );\n\n\t\t\t\tif ( subNode !== null ) this.parseSubNode( name, node, subNode );\n\n\t\t\t}\n\n\t\t\tnode.propertyList = propertyList; // raw property list used by parent\n\n\t\t\tif ( typeof id === 'number' ) node.id = id;\n\t\t\tif ( attrName !== '' ) node.attrName = attrName;\n\t\t\tif ( attrType !== '' ) node.attrType = attrType;\n\t\t\tif ( name !== '' ) node.name = name;\n\n\t\t\treturn node;\n\n\t\t},\n\n\t\tparseSubNode: function ( name, node, subNode ) {\n\n\t\t\t// special case: child node is single property\n\t\t\tif ( subNode.singleProperty === true ) {\n\n\t\t\t\tvar value = subNode.propertyList[ 0 ];\n\n\t\t\t\tif ( Array.isArray( value ) ) {\n\n\t\t\t\t\tnode[ subNode.name ] = subNode;\n\n\t\t\t\t\tsubNode.a = value;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnode[ subNode.name ] = value;\n\n\t\t\t\t}\n\n\t\t\t} else if ( name === 'Connections' && subNode.name === 'C' ) {\n\n\t\t\t\tvar array = [];\n\n\t\t\t\tsubNode.propertyList.forEach( function ( property, i ) {\n\n\t\t\t\t\t// first Connection is FBX type (OO, OP, etc.). We'll discard these\n\t\t\t\t\tif ( i !== 0 ) array.push( property );\n\n\t\t\t\t} );\n\n\t\t\t\tif ( node.connections === undefined ) {\n\n\t\t\t\t\tnode.connections = [];\n\n\t\t\t\t}\n\n\t\t\t\tnode.connections.push( array );\n\n\t\t\t} else if ( subNode.name === 'Properties70' ) {\n\n\t\t\t\tvar keys = Object.keys( subNode );\n\n\t\t\t\tkeys.forEach( function ( key ) {\n\n\t\t\t\t\tnode[ key ] = subNode[ key ];\n\n\t\t\t\t} );\n\n\t\t\t} else if ( name === 'Properties70' && subNode.name === 'P' ) {\n\n\t\t\t\tvar innerPropName = subNode.propertyList[ 0 ];\n\t\t\t\tvar innerPropType1 = subNode.propertyList[ 1 ];\n\t\t\t\tvar innerPropType2 = subNode.propertyList[ 2 ];\n\t\t\t\tvar innerPropFlag = subNode.propertyList[ 3 ];\n\t\t\t\tvar innerPropValue;\n\n\t\t\t\tif ( innerPropName.indexOf( 'Lcl ' ) === 0 ) innerPropName = innerPropName.replace( 'Lcl ', 'Lcl_' );\n\t\t\t\tif ( innerPropType1.indexOf( 'Lcl ' ) === 0 ) innerPropType1 = innerPropType1.replace( 'Lcl ', 'Lcl_' );\n\n\t\t\t\tif ( innerPropType1 === 'Color' || innerPropType1 === 'ColorRGB' || innerPropType1 === 'Vector' || innerPropType1 === 'Vector3D' || innerPropType1.indexOf( 'Lcl_' ) === 0 ) {\n\n\t\t\t\t\tinnerPropValue = [\n\t\t\t\t\t\tsubNode.propertyList[ 4 ],\n\t\t\t\t\t\tsubNode.propertyList[ 5 ],\n\t\t\t\t\t\tsubNode.propertyList[ 6 ]\n\t\t\t\t\t];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinnerPropValue = subNode.propertyList[ 4 ];\n\n\t\t\t\t}\n\n\t\t\t\t// this will be copied to parent, see above\n\t\t\t\tnode[ innerPropName ] = {\n\n\t\t\t\t\t'type': innerPropType1,\n\t\t\t\t\t'type2': innerPropType2,\n\t\t\t\t\t'flag': innerPropFlag,\n\t\t\t\t\t'value': innerPropValue\n\n\t\t\t\t};\n\n\t\t\t} else if ( node[ subNode.name ] === undefined ) {\n\n\t\t\t\tif ( typeof subNode.id === 'number' ) {\n\n\t\t\t\t\tnode[ subNode.name ] = {};\n\t\t\t\t\tnode[ subNode.name ][ subNode.id ] = subNode;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnode[ subNode.name ] = subNode;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( subNode.name === 'PoseNode' ) {\n\n\t\t\t\t\tif ( ! Array.isArray( node[ subNode.name ] ) ) {\n\n\t\t\t\t\t\tnode[ subNode.name ] = [ node[ subNode.name ] ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tnode[ subNode.name ].push( subNode );\n\n\t\t\t\t} else if ( node[ subNode.name ][ subNode.id ] === undefined ) {\n\n\t\t\t\t\tnode[ subNode.name ][ subNode.id ] = subNode;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tparseProperty: function ( reader ) {\n\n\t\t\tvar type = reader.getString( 1 );\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'C':\n\t\t\t\t\treturn reader.getBoolean();\n\n\t\t\t\tcase 'D':\n\t\t\t\t\treturn reader.getFloat64();\n\n\t\t\t\tcase 'F':\n\t\t\t\t\treturn reader.getFloat32();\n\n\t\t\t\tcase 'I':\n\t\t\t\t\treturn reader.getInt32();\n\n\t\t\t\tcase 'L':\n\t\t\t\t\treturn reader.getInt64();\n\n\t\t\t\tcase 'R':\n\t\t\t\t\tvar length = reader.getUint32();\n\t\t\t\t\treturn reader.getArrayBuffer( length );\n\n\t\t\t\tcase 'S':\n\t\t\t\t\tvar length = reader.getUint32();\n\t\t\t\t\treturn reader.getString( length );\n\n\t\t\t\tcase 'Y':\n\t\t\t\t\treturn reader.getInt16();\n\n\t\t\t\tcase 'b':\n\t\t\t\tcase 'c':\n\t\t\t\tcase 'd':\n\t\t\t\tcase 'f':\n\t\t\t\tcase 'i':\n\t\t\t\tcase 'l':\n\n\t\t\t\t\tvar arrayLength = reader.getUint32();\n\t\t\t\t\tvar encoding = reader.getUint32(); // 0: non-compressed, 1: compressed\n\t\t\t\t\tvar compressedLength = reader.getUint32();\n\n\t\t\t\t\tif ( encoding === 0 ) {\n\n\t\t\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\t\t\tcase 'b':\n\t\t\t\t\t\t\tcase 'c':\n\t\t\t\t\t\t\t\treturn reader.getBooleanArray( arrayLength );\n\n\t\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\t\treturn reader.getFloat64Array( arrayLength );\n\n\t\t\t\t\t\t\tcase 'f':\n\t\t\t\t\t\t\t\treturn reader.getFloat32Array( arrayLength );\n\n\t\t\t\t\t\t\tcase 'i':\n\t\t\t\t\t\t\t\treturn reader.getInt32Array( arrayLength );\n\n\t\t\t\t\t\t\tcase 'l':\n\t\t\t\t\t\t\t\treturn reader.getInt64Array( arrayLength );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( typeof Zlib === 'undefined' ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar inflate = new Zlib.Inflate( new Uint8Array( reader.getArrayBuffer( compressedLength ) ) ); // eslint-disable-line no-undef\n\t\t\t\t\tvar reader2 = new BinaryReader( inflate.decompress().buffer );\n\n\t\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\t\tcase 'b':\n\t\t\t\t\t\tcase 'c':\n\t\t\t\t\t\t\treturn reader2.getBooleanArray( arrayLength );\n\n\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\treturn reader2.getFloat64Array( arrayLength );\n\n\t\t\t\t\t\tcase 'f':\n\t\t\t\t\t\t\treturn reader2.getFloat32Array( arrayLength );\n\n\t\t\t\t\t\tcase 'i':\n\t\t\t\t\t\t\treturn reader2.getInt32Array( arrayLength );\n\n\t\t\t\t\t\tcase 'l':\n\t\t\t\t\t\t\treturn reader2.getInt64Array( arrayLength );\n\n\t\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'THREE.FBXLoader: Unknown property type ' + type );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tfunction BinaryReader( buffer, littleEndian ) {\n\n\t\tthis.dv = new DataView( buffer );\n\t\tthis.offset = 0;\n\t\tthis.littleEndian = ( littleEndian !== undefined ) ? littleEndian : true;\n\n\t}\n\n\tBinaryReader.prototype = {\n\n\t\tconstructor: BinaryReader,\n\n\t\tgetOffset: function () {\n\n\t\t\treturn this.offset;\n\n\t\t},\n\n\t\tsize: function () {\n\n\t\t\treturn this.dv.buffer.byteLength;\n\n\t\t},\n\n\t\tskip: function ( length ) {\n\n\t\t\tthis.offset += length;\n\n\t\t},\n\n\t\t// seems like true/false representation depends on exporter.\n\t\t// true: 1 or 'Y'(=0x59), false: 0 or 'T'(=0x54)\n\t\t// then sees LSB.\n\t\tgetBoolean: function () {\n\n\t\t\treturn ( this.getUint8() & 1 ) === 1;\n\n\t\t},\n\n\t\tgetBooleanArray: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getBoolean() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\tgetUint8: function () {\n\n\t\t\tvar value = this.dv.getUint8( this.offset );\n\t\t\tthis.offset += 1;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetInt16: function () {\n\n\t\t\tvar value = this.dv.getInt16( this.offset, this.littleEndian );\n\t\t\tthis.offset += 2;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetInt32: function () {\n\n\t\t\tvar value = this.dv.getInt32( this.offset, this.littleEndian );\n\t\t\tthis.offset += 4;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetInt32Array: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getInt32() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\tgetUint32: function () {\n\n\t\t\tvar value = this.dv.getUint32( this.offset, this.littleEndian );\n\t\t\tthis.offset += 4;\n\t\t\treturn value;\n\n\t\t},\n\n\t\t// JavaScript doesn't support 64-bit integer so calculate this here\n\t\t// 1 << 32 will return 1 so using multiply operation instead here.\n\t\t// There's a possibility that this method returns wrong value if the value\n\t\t// is out of the range between Number.MAX_SAFE_INTEGER and Number.MIN_SAFE_INTEGER.\n\t\t// TODO: safely handle 64-bit integer\n\t\tgetInt64: function () {\n\n\t\t\tvar low, high;\n\n\t\t\tif ( this.littleEndian ) {\n\n\t\t\t\tlow = this.getUint32();\n\t\t\t\thigh = this.getUint32();\n\n\t\t\t} else {\n\n\t\t\t\thigh = this.getUint32();\n\t\t\t\tlow = this.getUint32();\n\n\t\t\t}\n\n\t\t\t// calculate negative value\n\t\t\tif ( high & 0x80000000 ) {\n\n\t\t\t\thigh = ~ high & 0xFFFFFFFF;\n\t\t\t\tlow = ~ low & 0xFFFFFFFF;\n\n\t\t\t\tif ( low === 0xFFFFFFFF ) high = ( high + 1 ) & 0xFFFFFFFF;\n\n\t\t\t\tlow = ( low + 1 ) & 0xFFFFFFFF;\n\n\t\t\t\treturn - ( high * 0x100000000 + low );\n\n\t\t\t}\n\n\t\t\treturn high * 0x100000000 + low;\n\n\t\t},\n\n\t\tgetInt64Array: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getInt64() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\t// Note: see getInt64() comment\n\t\tgetUint64: function () {\n\n\t\t\tvar low, high;\n\n\t\t\tif ( this.littleEndian ) {\n\n\t\t\t\tlow = this.getUint32();\n\t\t\t\thigh = this.getUint32();\n\n\t\t\t} else {\n\n\t\t\t\thigh = this.getUint32();\n\t\t\t\tlow = this.getUint32();\n\n\t\t\t}\n\n\t\t\treturn high * 0x100000000 + low;\n\n\t\t},\n\n\t\tgetFloat32: function () {\n\n\t\t\tvar value = this.dv.getFloat32( this.offset, this.littleEndian );\n\t\t\tthis.offset += 4;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetFloat32Array: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getFloat32() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\tgetFloat64: function () {\n\n\t\t\tvar value = this.dv.getFloat64( this.offset, this.littleEndian );\n\t\t\tthis.offset += 8;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetFloat64Array: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getFloat64() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\tgetArrayBuffer: function ( size ) {\n\n\t\t\tvar value = this.dv.buffer.slice( this.offset, this.offset + size );\n\t\t\tthis.offset += size;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetString: function ( size ) {\n\n\t\t\t// note: safari 9 doesn't support Uint8Array.indexOf; create intermediate array instead\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta[ i ] = this.getUint8();\n\n\t\t\t}\n\n\t\t\tvar nullByte = a.indexOf( 0 );\n\t\t\tif ( nullByte >= 0 ) a = a.slice( 0, nullByte );\n\n\t\t\treturn THREE.LoaderUtils.decodeText( new Uint8Array( a ) );\n\n\t\t}\n\n\t};\n\n\t// FBXTree holds a representation of the FBX data, returned by the TextParser ( FBX ASCII format)\n\t// and BinaryParser( FBX Binary format)\n\tfunction FBXTree() {}\n\n\tFBXTree.prototype = {\n\n\t\tconstructor: FBXTree,\n\n\t\tadd: function ( key, val ) {\n\n\t\t\tthis[ key ] = val;\n\n\t\t},\n\n\t};\n\n\t// ************** UTILITY FUNCTIONS **************\n\n\tfunction isFbxFormatBinary( buffer ) {\n\n\t\tvar CORRECT = 'Kaydara FBX Binary  \\0';\n\n\t\treturn buffer.byteLength >= CORRECT.length && CORRECT === convertArrayBufferToString( buffer, 0, CORRECT.length );\n\n\t}\n\n\tfunction isFbxFormatASCII( text ) {\n\n\t\tvar CORRECT = [ 'K', 'a', 'y', 'd', 'a', 'r', 'a', '\\\\', 'F', 'B', 'X', '\\\\', 'B', 'i', 'n', 'a', 'r', 'y', '\\\\', '\\\\' ];\n\n\t\tvar cursor = 0;\n\n\t\tfunction read( offset ) {\n\n\t\t\tvar result = text[ offset - 1 ];\n\t\t\ttext = text.slice( cursor + offset );\n\t\t\tcursor ++;\n\t\t\treturn result;\n\n\t\t}\n\n\t\tfor ( var i = 0; i < CORRECT.length; ++ i ) {\n\n\t\t\tvar num = read( 1 );\n\t\t\tif ( num === CORRECT[ i ] ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfunction getFbxVersion( text ) {\n\n\t\tvar versionRegExp = /FBXVersion: (\\d+)/;\n\t\tvar match = text.match( versionRegExp );\n\t\tif ( match ) {\n\n\t\t\tvar version = parseInt( match[ 1 ] );\n\t\t\treturn version;\n\n\t\t}\n\t\tthrow new Error( 'THREE.FBXLoader: Cannot find the version number for the file given.' );\n\n\t}\n\n\t// Converts FBX ticks into real time seconds.\n\tfunction convertFBXTimeToSeconds( time ) {\n\n\t\treturn time / 46186158000;\n\n\t}\n\n\tvar dataArray = [];\n\n\t// extracts the data from the correct position in the FBX array based on indexing type\n\tfunction getData( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {\n\n\t\tvar index;\n\n\t\tswitch ( infoObject.mappingType ) {\n\n\t\t\tcase 'ByPolygonVertex' :\n\t\t\t\tindex = polygonVertexIndex;\n\t\t\t\tbreak;\n\t\t\tcase 'ByPolygon' :\n\t\t\t\tindex = polygonIndex;\n\t\t\t\tbreak;\n\t\t\tcase 'ByVertice' :\n\t\t\t\tindex = vertexIndex;\n\t\t\t\tbreak;\n\t\t\tcase 'AllSame' :\n\t\t\t\tindex = infoObject.indices[ 0 ];\n\t\t\t\tbreak;\n\t\t\tdefault :\n\t\t\t\tconsole.warn( 'THREE.FBXLoader: unknown attribute mapping type ' + infoObject.mappingType );\n\n\t\t}\n\n\t\tif ( infoObject.referenceType === 'IndexToDirect' ) index = infoObject.indices[ index ];\n\n\t\tvar from = index * infoObject.dataSize;\n\t\tvar to = from + infoObject.dataSize;\n\n\t\treturn slice( dataArray, infoObject.buffer, from, to );\n\n\t}\n\n\tvar tempMat = new THREE.Matrix4();\n\tvar tempEuler = new THREE.Euler();\n\tvar tempVec = new THREE.Vector3();\n\tvar translation = new THREE.Vector3();\n\tvar rotation = new THREE.Matrix4();\n\n\t// generate transformation from FBX transform data\n\t// ref: https://help.autodesk.com/view/FBX/2017/ENU/?guid=__files_GUID_10CDD63C_79C1_4F2D_BB28_AD2BE65A02ED_htm\n\t// transformData = {\n\t//\t eulerOrder: int,\n\t//\t translation: [],\n\t//   rotationOffset: [],\n\t//\t preRotation\n\t//\t rotation\n\t//\t postRotation\n\t//   scale\n\t// }\n\t// all entries are optional\n\tfunction generateTransform( transformData ) {\n\n\t\tvar transform = new THREE.Matrix4();\n\t\ttranslation.set( 0, 0, 0 );\n\t\trotation.identity();\n\n\t\tvar order = ( transformData.eulerOrder ) ? getEulerOrder( transformData.eulerOrder ) : getEulerOrder( 0 );\n\n\t\tif ( transformData.translation ) translation.fromArray( transformData.translation );\n\t\tif ( transformData.rotationOffset ) translation.add( tempVec.fromArray( transformData.rotationOffset ) );\n\n\t\tif ( transformData.rotation ) {\n\n\t\t\tvar array = transformData.rotation.map( THREE.Math.degToRad );\n\t\t\tarray.push( order );\n\t\t\trotation.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\n\t\t}\n\n\t\tif ( transformData.preRotation ) {\n\n\t\t\tvar array = transformData.preRotation.map( THREE.Math.degToRad );\n\t\t\tarray.push( order );\n\t\t\ttempMat.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\n\t\t\trotation.premultiply( tempMat );\n\n\t\t}\n\n\t\tif ( transformData.postRotation ) {\n\n\t\t\tvar array = transformData.postRotation.map( THREE.Math.degToRad );\n\t\t\tarray.push( order );\n\t\t\ttempMat.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\n\t\t\ttempMat.getInverse( tempMat );\n\n\t\t\trotation.multiply( tempMat );\n\n\t\t}\n\n\t\tif ( transformData.scale ) transform.scale( tempVec.fromArray( transformData.scale ) );\n\n\t\ttransform.setPosition( translation );\n\t\ttransform.multiply( rotation );\n\n\t\treturn transform;\n\n\t}\n\n\t// Returns the three.js intrinsic Euler order corresponding to FBX extrinsic Euler order\n\t// ref: http://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_class_fbx_euler_html\n\tfunction getEulerOrder( order ) {\n\n\t\tvar enums = [\n\t\t\t'ZYX', // -> XYZ extrinsic\n\t\t\t'YZX', // -> XZY extrinsic\n\t\t\t'XZY', // -> YZX extrinsic\n\t\t\t'ZXY', // -> YXZ extrinsic\n\t\t\t'YXZ', // -> ZXY extrinsic\n\t\t\t'XYZ', // -> ZYX extrinsic\n\t\t//'SphericXYZ', // not possible to support\n\t\t];\n\n\t\tif ( order === 6 ) {\n\n\t\t\tconsole.warn( 'THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.' );\n\t\t\treturn enums[ 0 ];\n\n\t\t}\n\n\t\treturn enums[ order ];\n\n\t}\n\n\t// Parses comma separated list of numbers and returns them an array.\n\t// Used internally by the TextParser\n\tfunction parseNumberArray( value ) {\n\n\t\tvar array = value.split( ',' ).map( function ( val ) {\n\n\t\t\treturn parseFloat( val );\n\n\t\t} );\n\n\t\treturn array;\n\n\t}\n\n\tfunction convertArrayBufferToString( buffer, from, to ) {\n\n\t\tif ( from === undefined ) from = 0;\n\t\tif ( to === undefined ) to = buffer.byteLength;\n\n\t\treturn THREE.LoaderUtils.decodeText( new Uint8Array( buffer, from, to ) );\n\n\t}\n\n\tfunction append( a, b ) {\n\n\t\tfor ( var i = 0, j = a.length, l = b.length; i < l; i ++, j ++ ) {\n\n\t\t\ta[ j ] = b[ i ];\n\n\t\t}\n\n\t}\n\n\tfunction slice( a, b, from, to ) {\n\n\t\tfor ( var i = from, j = 0; i < to; i ++, j ++ ) {\n\n\t\t\ta[ j ] = b[ i ];\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\t// inject array a2 into array a1 at index\n\tfunction inject( a1, index, a2 ) {\n\n\t\treturn a1.slice( 0, index ).concat( a2 ).concat( a1.slice( index ) );\n\n\t}\n\n\treturn FBXLoader;\n\n} )();\n","/**\n * Based on aframe/examples/showcase/tracked-controls.\n *\n * Implement bounding sphere collision detection for entities with a mesh.\n * Sets the specified state on the intersected entities.\n *\n * @property {string} objects - Selector of the entities to test for collision.\n * @property {string} state - State to set on collided entities.\n *\n */\nmodule.exports = AFRAME.registerComponent('sphere-collider', {\n  schema: {\n    objects: {default: ''},\n    state: {default: 'collided'},\n    radius: {default: 0.05},\n    watch: {default: true}\n  },\n\n  init: function () {\n    /** @type {MutationObserver} */\n    this.observer = null;\n    /** @type {Array<Element>} Elements to watch for collisions. */\n    this.els = [];\n    /** @type {Array<Element>} Elements currently in collision state. */\n    this.collisions = [];\n\n    this.handleHit = this.handleHit.bind(this);\n    this.handleHitEnd = this.handleHitEnd.bind(this);\n  },\n\n  remove: function () {\n    this.pause();\n  },\n\n  play: function () {\n    const sceneEl = this.el.sceneEl;\n\n    if (this.data.watch) {\n      this.observer = new MutationObserver(this.update.bind(this, null));\n      this.observer.observe(sceneEl, {childList: true, subtree: true});\n    }\n  },\n\n  pause: function () {\n    if (this.observer) {\n      this.observer.disconnect();\n      this.observer = null;\n    }\n  },\n\n  /**\n   * Update list of entities to test for collision.\n   */\n  update: function () {\n    const data = this.data;\n    let objectEls;\n\n    // Push entities into list of els to intersect.\n    if (data.objects) {\n      objectEls = this.el.sceneEl.querySelectorAll(data.objects);\n    } else {\n      // If objects not defined, intersect with everything.\n      objectEls = this.el.sceneEl.children;\n    }\n    // Convert from NodeList to Array\n    this.els = Array.prototype.slice.call(objectEls);\n  },\n\n  tick: (function () {\n    const position = new THREE.Vector3(),\n        meshPosition = new THREE.Vector3(),\n        colliderScale = new THREE.Vector3(),\n        size = new THREE.Vector3(),\n        box = new THREE.Box3(),\n        distanceMap = new Map();\n    return function () {\n      const el = this.el,\n          data = this.data,\n          mesh = el.getObject3D('mesh'),\n          collisions = [];\n      let colliderRadius;\n\n      if (!mesh) { return; }\n\n      distanceMap.clear();\n      el.object3D.getWorldPosition(position);\n      el.object3D.getWorldScale(colliderScale);\n      colliderRadius = data.radius * scaleFactor(colliderScale);\n      // Update collision list.\n      this.els.forEach(intersect);\n\n      // Emit events and add collision states, in order of distance.\n      collisions\n        .sort((a, b) => distanceMap.get(a) > distanceMap.get(b) ? 1 : -1)\n        .forEach(this.handleHit);\n\n      // Remove collision state from current element.\n      if (collisions.length === 0) { el.emit('hit', {el: null}); }\n\n      // Remove collision state from other elements.\n      this.collisions\n        .filter((el) => !distanceMap.has(el))\n        .forEach(this.handleHitEnd);\n\n      // Store new collisions\n      this.collisions = collisions;\n\n      // Bounding sphere collision detection\n      function intersect (el) {\n        let radius, mesh, distance, extent;\n\n        if (!el.isEntity) { return; }\n\n        mesh = el.getObject3D('mesh');\n\n        if (!mesh) { return; }\n\n        box.setFromObject(mesh).getSize(size);\n        extent = Math.max(size.x, size.y, size.z) / 2;\n        radius = Math.sqrt(2 * extent * extent);\n        box.getCenter(meshPosition);\n\n        if (!radius) { return; }\n\n        distance = position.distanceTo(meshPosition);\n        if (distance < radius + colliderRadius) {\n          collisions.push(el);\n          distanceMap.set(el, distance);\n        }\n      }\n      // use max of scale factors to maintain bounding sphere collision\n      function scaleFactor (scaleVec) {\n        return Math.max.apply(null, scaleVec.toArray());\n      }\n    };\n  })(),\n\n  handleHit: function (targetEl) {\n    targetEl.emit('hit');\n    targetEl.addState(this.data.state);\n    this.el.emit('hit', {el: targetEl});\n  },\n  handleHitEnd: function (targetEl) {\n    targetEl.emit('hitend');\n    targetEl.removeState(this.data.state);\n    this.el.emit('hitend', {el: targetEl});\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\n// `String.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~String(requireObjectCoercible(this))\n      .indexOf(notARegExp(searchString), arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","/**\n * Polyfill for the additional KeyboardEvent properties defined in the D3E and\n * D4E draft specifications, by @inexorabletash.\n *\n * See: https://github.com/inexorabletash/polyfill\n */\n(function(global) {\n  var nativeKeyboardEvent = ('KeyboardEvent' in global);\n  if (!nativeKeyboardEvent)\n    global.KeyboardEvent = function KeyboardEvent() { throw TypeError('Illegal constructor'); };\n\n  if (!('DOM_KEY_LOCATION_STANDARD' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_STANDARD = 0x00; // Default or unknown location\n  if (!('DOM_KEY_LOCATION_LEFT' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_LEFT          = 0x01; // e.g. Left Alt key\n  if (!('DOM_KEY_LOCATION_RIGHT' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_RIGHT         = 0x02; // e.g. Right Alt key\n  if (!('DOM_KEY_LOCATION_NUMPAD' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD        = 0x03; // e.g. Numpad 0 or +\n\n  var STANDARD = window.KeyboardEvent.DOM_KEY_LOCATION_STANDARD,\n      LEFT = window.KeyboardEvent.DOM_KEY_LOCATION_LEFT,\n      RIGHT = window.KeyboardEvent.DOM_KEY_LOCATION_RIGHT,\n      NUMPAD = window.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD;\n\n  //--------------------------------------------------------------------\n  //\n  // Utilities\n  //\n  //--------------------------------------------------------------------\n\n  function contains(s, ss) { return String(s).indexOf(ss) !== -1; }\n\n  var os = (function() {\n    if (contains(navigator.platform, 'Win')) { return 'win'; }\n    if (contains(navigator.platform, 'Mac')) { return 'mac'; }\n    if (contains(navigator.platform, 'CrOS')) { return 'cros'; }\n    if (contains(navigator.platform, 'Linux')) { return 'linux'; }\n    if (contains(navigator.userAgent, 'iPad') || contains(navigator.platform, 'iPod') || contains(navigator.platform, 'iPhone')) { return 'ios'; }\n    return '';\n  } ());\n\n  var browser = (function() {\n    if (contains(navigator.userAgent, 'Chrome/')) { return 'chrome'; }\n    if (contains(navigator.vendor, 'Apple')) { return 'safari'; }\n    if (contains(navigator.userAgent, 'MSIE')) { return 'ie'; }\n    if (contains(navigator.userAgent, 'Gecko/')) { return 'moz'; }\n    if (contains(navigator.userAgent, 'Opera/')) { return 'opera'; }\n    return '';\n  } ());\n\n  var browser_os = browser + '-' + os;\n\n  function mergeIf(baseTable, select, table) {\n    if (browser_os === select || browser === select || os === select) {\n      Object.keys(table).forEach(function(keyCode) {\n        baseTable[keyCode] = table[keyCode];\n      });\n    }\n  }\n\n  function remap(o, key) {\n    var r = {};\n    Object.keys(o).forEach(function(k) {\n      var item = o[k];\n      if (key in item) {\n        r[item[key]] = item;\n      }\n    });\n    return r;\n  }\n\n  function invert(o) {\n    var r = {};\n    Object.keys(o).forEach(function(k) {\n      r[o[k]] = k;\n    });\n    return r;\n  }\n\n  //--------------------------------------------------------------------\n  //\n  // Generic Mappings\n  //\n  //--------------------------------------------------------------------\n\n  // \"keyInfo\" is a dictionary:\n  //   code: string - name from DOM Level 3 KeyboardEvent code Values\n  //     https://dvcs.w3.org/hg/dom3events/raw-file/tip/html/DOM3Events-code.html\n  //   location (optional): number - one of the DOM_KEY_LOCATION values\n  //   keyCap (optional): string - keyboard label in en-US locale\n  // USB code Usage ID from page 0x07 unless otherwise noted (Informative)\n\n  // Map of keyCode to keyInfo\n  var keyCodeToInfoTable = {\n    // 0x01 - VK_LBUTTON\n    // 0x02 - VK_RBUTTON\n    0x03: { code: 'Cancel' }, // [USB: 0x9b] char \\x0018 ??? (Not in D3E)\n    // 0x04 - VK_MBUTTON\n    // 0x05 - VK_XBUTTON1\n    // 0x06 - VK_XBUTTON2\n    0x06: { code: 'Help' }, // [USB: 0x75] ???\n    // 0x07 - undefined\n    0x08: { code: 'Backspace' }, // [USB: 0x2a] Labelled Delete on Macintosh keyboards.\n    0x09: { code: 'Tab' }, // [USB: 0x2b]\n    // 0x0A-0x0B - reserved\n    0X0C: { code: 'Clear' }, // [USB: 0x9c] NumPad Center (Not in D3E)\n    0X0D: { code: 'Enter' }, // [USB: 0x28]\n    // 0x0E-0x0F - undefined\n\n    0x10: { code: 'Shift' },\n    0x11: { code: 'Control' },\n    0x12: { code: 'Alt' },\n    0x13: { code: 'Pause' }, // [USB: 0x48]\n    0x14: { code: 'CapsLock' }, // [USB: 0x39]\n    0x15: { code: 'KanaMode' }, // [USB: 0x88] - \"HangulMode\" for Korean layout\n    0x16: { code: 'HangulMode' }, // [USB: 0x90] 0x15 as well in MSDN VK table ???\n    0x17: { code: 'JunjaMode' }, // (Not in D3E)\n    0x18: { code: 'FinalMode' }, // (Not in D3E)\n    0x19: { code: 'KanjiMode' }, // [USB: 0x91] - \"HanjaMode\" for Korean layout\n    // 0x1A - undefined\n    0x1B: { code: 'Escape' }, // [USB: 0x29]\n    0x1C: { code: 'Convert' }, // [USB: 0x8a]\n    0x1D: { code: 'NonConvert' }, // [USB: 0x8b]\n    0x1E: { code: 'Accept' }, // (Not in D3E)\n    0x1F: { code: 'ModeChange' }, // (Not in D3E)\n\n    0x20: { code: 'Space' }, // [USB: 0x2c]\n    0x21: { code: 'PageUp' }, // [USB: 0x4b]\n    0x22: { code: 'PageDown' }, // [USB: 0x4e]\n    0x23: { code: 'End' }, // [USB: 0x4d]\n    0x24: { code: 'Home' }, // [USB: 0x4a]\n    0x25: { code: 'ArrowLeft' }, // [USB: 0x50]\n    0x26: { code: 'ArrowUp' }, // [USB: 0x52]\n    0x27: { code: 'ArrowRight' }, // [USB: 0x4f]\n    0x28: { code: 'ArrowDown' }, // [USB: 0x51]\n    0x29: { code: 'Select' }, // (Not in D3E)\n    0x2A: { code: 'Print' }, // (Not in D3E)\n    0x2B: { code: 'Execute' }, // [USB: 0x74] (Not in D3E)\n    0x2C: { code: 'PrintScreen' }, // [USB: 0x46]\n    0x2D: { code: 'Insert' }, // [USB: 0x49]\n    0x2E: { code: 'Delete' }, // [USB: 0x4c]\n    0x2F: { code: 'Help' }, // [USB: 0x75] ???\n\n    0x30: { code: 'Digit0', keyCap: '0' }, // [USB: 0x27] 0)\n    0x31: { code: 'Digit1', keyCap: '1' }, // [USB: 0x1e] 1!\n    0x32: { code: 'Digit2', keyCap: '2' }, // [USB: 0x1f] 2@\n    0x33: { code: 'Digit3', keyCap: '3' }, // [USB: 0x20] 3#\n    0x34: { code: 'Digit4', keyCap: '4' }, // [USB: 0x21] 4$\n    0x35: { code: 'Digit5', keyCap: '5' }, // [USB: 0x22] 5%\n    0x36: { code: 'Digit6', keyCap: '6' }, // [USB: 0x23] 6^\n    0x37: { code: 'Digit7', keyCap: '7' }, // [USB: 0x24] 7&\n    0x38: { code: 'Digit8', keyCap: '8' }, // [USB: 0x25] 8*\n    0x39: { code: 'Digit9', keyCap: '9' }, // [USB: 0x26] 9(\n    // 0x3A-0x40 - undefined\n\n    0x41: { code: 'KeyA', keyCap: 'a' }, // [USB: 0x04]\n    0x42: { code: 'KeyB', keyCap: 'b' }, // [USB: 0x05]\n    0x43: { code: 'KeyC', keyCap: 'c' }, // [USB: 0x06]\n    0x44: { code: 'KeyD', keyCap: 'd' }, // [USB: 0x07]\n    0x45: { code: 'KeyE', keyCap: 'e' }, // [USB: 0x08]\n    0x46: { code: 'KeyF', keyCap: 'f' }, // [USB: 0x09]\n    0x47: { code: 'KeyG', keyCap: 'g' }, // [USB: 0x0a]\n    0x48: { code: 'KeyH', keyCap: 'h' }, // [USB: 0x0b]\n    0x49: { code: 'KeyI', keyCap: 'i' }, // [USB: 0x0c]\n    0x4A: { code: 'KeyJ', keyCap: 'j' }, // [USB: 0x0d]\n    0x4B: { code: 'KeyK', keyCap: 'k' }, // [USB: 0x0e]\n    0x4C: { code: 'KeyL', keyCap: 'l' }, // [USB: 0x0f]\n    0x4D: { code: 'KeyM', keyCap: 'm' }, // [USB: 0x10]\n    0x4E: { code: 'KeyN', keyCap: 'n' }, // [USB: 0x11]\n    0x4F: { code: 'KeyO', keyCap: 'o' }, // [USB: 0x12]\n\n    0x50: { code: 'KeyP', keyCap: 'p' }, // [USB: 0x13]\n    0x51: { code: 'KeyQ', keyCap: 'q' }, // [USB: 0x14]\n    0x52: { code: 'KeyR', keyCap: 'r' }, // [USB: 0x15]\n    0x53: { code: 'KeyS', keyCap: 's' }, // [USB: 0x16]\n    0x54: { code: 'KeyT', keyCap: 't' }, // [USB: 0x17]\n    0x55: { code: 'KeyU', keyCap: 'u' }, // [USB: 0x18]\n    0x56: { code: 'KeyV', keyCap: 'v' }, // [USB: 0x19]\n    0x57: { code: 'KeyW', keyCap: 'w' }, // [USB: 0x1a]\n    0x58: { code: 'KeyX', keyCap: 'x' }, // [USB: 0x1b]\n    0x59: { code: 'KeyY', keyCap: 'y' }, // [USB: 0x1c]\n    0x5A: { code: 'KeyZ', keyCap: 'z' }, // [USB: 0x1d]\n    0x5B: { code: 'OSLeft', location: LEFT }, // [USB: 0xe3]\n    0x5C: { code: 'OSRight', location: RIGHT }, // [USB: 0xe7]\n    0x5D: { code: 'ContextMenu' }, // [USB: 0x65] Context Menu\n    // 0x5E - reserved\n    0x5F: { code: 'Standby' }, // [USB: 0x82] Sleep\n\n    0x60: { code: 'Numpad0', keyCap: '0', location: NUMPAD }, // [USB: 0x62]\n    0x61: { code: 'Numpad1', keyCap: '1', location: NUMPAD }, // [USB: 0x59]\n    0x62: { code: 'Numpad2', keyCap: '2', location: NUMPAD }, // [USB: 0x5a]\n    0x63: { code: 'Numpad3', keyCap: '3', location: NUMPAD }, // [USB: 0x5b]\n    0x64: { code: 'Numpad4', keyCap: '4', location: NUMPAD }, // [USB: 0x5c]\n    0x65: { code: 'Numpad5', keyCap: '5', location: NUMPAD }, // [USB: 0x5d]\n    0x66: { code: 'Numpad6', keyCap: '6', location: NUMPAD }, // [USB: 0x5e]\n    0x67: { code: 'Numpad7', keyCap: '7', location: NUMPAD }, // [USB: 0x5f]\n    0x68: { code: 'Numpad8', keyCap: '8', location: NUMPAD }, // [USB: 0x60]\n    0x69: { code: 'Numpad9', keyCap: '9', location: NUMPAD }, // [USB: 0x61]\n    0x6A: { code: 'NumpadMultiply', keyCap: '*', location: NUMPAD }, // [USB: 0x55]\n    0x6B: { code: 'NumpadAdd', keyCap: '+', location: NUMPAD }, // [USB: 0x57]\n    0x6C: { code: 'NumpadComma', keyCap: ',', location: NUMPAD }, // [USB: 0x85]\n    0x6D: { code: 'NumpadSubtract', keyCap: '-', location: NUMPAD }, // [USB: 0x56]\n    0x6E: { code: 'NumpadDecimal', keyCap: '.', location: NUMPAD }, // [USB: 0x63]\n    0x6F: { code: 'NumpadDivide', keyCap: '/', location: NUMPAD }, // [USB: 0x54]\n\n    0x70: { code: 'F1' }, // [USB: 0x3a]\n    0x71: { code: 'F2' }, // [USB: 0x3b]\n    0x72: { code: 'F3' }, // [USB: 0x3c]\n    0x73: { code: 'F4' }, // [USB: 0x3d]\n    0x74: { code: 'F5' }, // [USB: 0x3e]\n    0x75: { code: 'F6' }, // [USB: 0x3f]\n    0x76: { code: 'F7' }, // [USB: 0x40]\n    0x77: { code: 'F8' }, // [USB: 0x41]\n    0x78: { code: 'F9' }, // [USB: 0x42]\n    0x79: { code: 'F10' }, // [USB: 0x43]\n    0x7A: { code: 'F11' }, // [USB: 0x44]\n    0x7B: { code: 'F12' }, // [USB: 0x45]\n    0x7C: { code: 'F13' }, // [USB: 0x68]\n    0x7D: { code: 'F14' }, // [USB: 0x69]\n    0x7E: { code: 'F15' }, // [USB: 0x6a]\n    0x7F: { code: 'F16' }, // [USB: 0x6b]\n\n    0x80: { code: 'F17' }, // [USB: 0x6c]\n    0x81: { code: 'F18' }, // [USB: 0x6d]\n    0x82: { code: 'F19' }, // [USB: 0x6e]\n    0x83: { code: 'F20' }, // [USB: 0x6f]\n    0x84: { code: 'F21' }, // [USB: 0x70]\n    0x85: { code: 'F22' }, // [USB: 0x71]\n    0x86: { code: 'F23' }, // [USB: 0x72]\n    0x87: { code: 'F24' }, // [USB: 0x73]\n    // 0x88-0x8F - unassigned\n\n    0x90: { code: 'NumLock', location: NUMPAD }, // [USB: 0x53]\n    0x91: { code: 'ScrollLock' }, // [USB: 0x47]\n    // 0x92-0x96 - OEM specific\n    // 0x97-0x9F - unassigned\n\n    // NOTE: 0xA0-0xA5 usually mapped to 0x10-0x12 in browsers\n    0xA0: { code: 'ShiftLeft', location: LEFT }, // [USB: 0xe1]\n    0xA1: { code: 'ShiftRight', location: RIGHT }, // [USB: 0xe5]\n    0xA2: { code: 'ControlLeft', location: LEFT }, // [USB: 0xe0]\n    0xA3: { code: 'ControlRight', location: RIGHT }, // [USB: 0xe4]\n    0xA4: { code: 'AltLeft', location: LEFT }, // [USB: 0xe2]\n    0xA5: { code: 'AltRight', location: RIGHT }, // [USB: 0xe6]\n\n    0xA6: { code: 'BrowserBack' }, // [USB: 0x0c/0x0224]\n    0xA7: { code: 'BrowserForward' }, // [USB: 0x0c/0x0225]\n    0xA8: { code: 'BrowserRefresh' }, // [USB: 0x0c/0x0227]\n    0xA9: { code: 'BrowserStop' }, // [USB: 0x0c/0x0226]\n    0xAA: { code: 'BrowserSearch' }, // [USB: 0x0c/0x0221]\n    0xAB: { code: 'BrowserFavorites' }, // [USB: 0x0c/0x0228]\n    0xAC: { code: 'BrowserHome' }, // [USB: 0x0c/0x0222]\n    0xAD: { code: 'VolumeMute' }, // [USB: 0x7f]\n    0xAE: { code: 'VolumeDown' }, // [USB: 0x81]\n    0xAF: { code: 'VolumeUp' }, // [USB: 0x80]\n\n    0xB0: { code: 'MediaTrackNext' }, // [USB: 0x0c/0x00b5]\n    0xB1: { code: 'MediaTrackPrevious' }, // [USB: 0x0c/0x00b6]\n    0xB2: { code: 'MediaStop' }, // [USB: 0x0c/0x00b7]\n    0xB3: { code: 'MediaPlayPause' }, // [USB: 0x0c/0x00cd]\n    0xB4: { code: 'LaunchMail' }, // [USB: 0x0c/0x018a]\n    0xB5: { code: 'MediaSelect' },\n    0xB6: { code: 'LaunchApp1' },\n    0xB7: { code: 'LaunchApp2' },\n    // 0xB8-0xB9 - reserved\n    0xBA: { code: 'Semicolon',  keyCap: ';' }, // [USB: 0x33] ;: (US Standard 101)\n    0xBB: { code: 'Equal', keyCap: '=' }, // [USB: 0x2e] =+\n    0xBC: { code: 'Comma', keyCap: ',' }, // [USB: 0x36] ,<\n    0xBD: { code: 'Minus', keyCap: '-' }, // [USB: 0x2d] -_\n    0xBE: { code: 'Period', keyCap: '.' }, // [USB: 0x37] .>\n    0xBF: { code: 'Slash', keyCap: '/' }, // [USB: 0x38] /? (US Standard 101)\n\n    0xC0: { code: 'Backquote', keyCap: '`' }, // [USB: 0x35] `~ (US Standard 101)\n    // 0xC1-0xCF - reserved\n\n    // 0xD0-0xD7 - reserved\n    // 0xD8-0xDA - unassigned\n    0xDB: { code: 'BracketLeft', keyCap: '[' }, // [USB: 0x2f] [{ (US Standard 101)\n    0xDC: { code: 'Backslash',  keyCap: '\\\\' }, // [USB: 0x31] \\| (US Standard 101)\n    0xDD: { code: 'BracketRight', keyCap: ']' }, // [USB: 0x30] ]} (US Standard 101)\n    0xDE: { code: 'Quote', keyCap: '\\'' }, // [USB: 0x34] '\" (US Standard 101)\n    // 0xDF - miscellaneous/varies\n\n    // 0xE0 - reserved\n    // 0xE1 - OEM specific\n    0xE2: { code: 'IntlBackslash',  keyCap: '\\\\' }, // [USB: 0x64] \\| (UK Standard 102)\n    // 0xE3-0xE4 - OEM specific\n    0xE5: { code: 'Process' }, // (Not in D3E)\n    // 0xE6 - OEM specific\n    // 0xE7 - VK_PACKET\n    // 0xE8 - unassigned\n    // 0xE9-0xEF - OEM specific\n\n    // 0xF0-0xF5 - OEM specific\n    0xF6: { code: 'Attn' }, // [USB: 0x9a] (Not in D3E)\n    0xF7: { code: 'CrSel' }, // [USB: 0xa3] (Not in D3E)\n    0xF8: { code: 'ExSel' }, // [USB: 0xa4] (Not in D3E)\n    0xF9: { code: 'EraseEof' }, // (Not in D3E)\n    0xFA: { code: 'Play' }, // (Not in D3E)\n    0xFB: { code: 'ZoomToggle' }, // (Not in D3E)\n    // 0xFC - VK_NONAME - reserved\n    // 0xFD - VK_PA1\n    0xFE: { code: 'Clear' } // [USB: 0x9c] (Not in D3E)\n  };\n\n  // No legacy keyCode, but listed in D3E:\n\n  // code: usb\n  // 'IntlHash': 0x070032,\n  // 'IntlRo': 0x070087,\n  // 'IntlYen': 0x070089,\n  // 'NumpadBackspace': 0x0700bb,\n  // 'NumpadClear': 0x0700d8,\n  // 'NumpadClearEntry': 0x0700d9,\n  // 'NumpadMemoryAdd': 0x0700d3,\n  // 'NumpadMemoryClear': 0x0700d2,\n  // 'NumpadMemoryRecall': 0x0700d1,\n  // 'NumpadMemoryStore': 0x0700d0,\n  // 'NumpadMemorySubtract': 0x0700d4,\n  // 'NumpadParenLeft': 0x0700b6,\n  // 'NumpadParenRight': 0x0700b7,\n\n  //--------------------------------------------------------------------\n  //\n  // Browser/OS Specific Mappings\n  //\n  //--------------------------------------------------------------------\n\n  mergeIf(keyCodeToInfoTable,\n          'moz', {\n            0x3B: { code: 'Semicolon', keyCap: ';' }, // [USB: 0x33] ;: (US Standard 101)\n            0x3D: { code: 'Equal', keyCap: '=' }, // [USB: 0x2e] =+\n            0x6B: { code: 'Equal', keyCap: '=' }, // [USB: 0x2e] =+\n            0x6D: { code: 'Minus', keyCap: '-' }, // [USB: 0x2d] -_\n            0xBB: { code: 'NumpadAdd', keyCap: '+', location: NUMPAD }, // [USB: 0x57]\n            0xBD: { code: 'NumpadSubtract', keyCap: '-', location: NUMPAD } // [USB: 0x56]\n          });\n\n  mergeIf(keyCodeToInfoTable,\n          'moz-mac', {\n            0x0C: { code: 'NumLock', location: NUMPAD }, // [USB: 0x53]\n            0xAD: { code: 'Minus', keyCap: '-' } // [USB: 0x2d] -_\n          });\n\n  mergeIf(keyCodeToInfoTable,\n          'moz-win', {\n            0xAD: { code: 'Minus', keyCap: '-' } // [USB: 0x2d] -_\n          });\n\n  mergeIf(keyCodeToInfoTable,\n          'chrome-mac', {\n            0x5D: { code: 'OSRight', location: RIGHT } // [USB: 0xe7]\n          });\n\n  // Windows via Bootcamp (!)\n  if (0) {\n    mergeIf(keyCodeToInfoTable,\n            'chrome-win', {\n              0xC0: { code: 'Quote', keyCap: '\\'' }, // [USB: 0x34] '\" (US Standard 101)\n              0xDE: { code: 'Backslash',  keyCap: '\\\\' }, // [USB: 0x31] \\| (US Standard 101)\n              0xDF: { code: 'Backquote', keyCap: '`' } // [USB: 0x35] `~ (US Standard 101)\n            });\n\n    mergeIf(keyCodeToInfoTable,\n            'ie', {\n              0xC0: { code: 'Quote', keyCap: '\\'' }, // [USB: 0x34] '\" (US Standard 101)\n              0xDE: { code: 'Backslash',  keyCap: '\\\\' }, // [USB: 0x31] \\| (US Standard 101)\n              0xDF: { code: 'Backquote', keyCap: '`' } // [USB: 0x35] `~ (US Standard 101)\n            });\n  }\n\n  mergeIf(keyCodeToInfoTable,\n          'safari', {\n            0x03: { code: 'Enter' }, // [USB: 0x28] old Safari\n            0x19: { code: 'Tab' } // [USB: 0x2b] old Safari for Shift+Tab\n          });\n\n  mergeIf(keyCodeToInfoTable,\n          'ios', {\n            0x0A: { code: 'Enter', location: STANDARD } // [USB: 0x28]\n          });\n\n  mergeIf(keyCodeToInfoTable,\n          'safari-mac', {\n            0x5B: { code: 'OSLeft', location: LEFT }, // [USB: 0xe3]\n            0x5D: { code: 'OSRight', location: RIGHT }, // [USB: 0xe7]\n            0xE5: { code: 'KeyQ', keyCap: 'Q' } // [USB: 0x14] On alternate presses, Ctrl+Q sends this\n          });\n\n  //--------------------------------------------------------------------\n  //\n  // Identifier Mappings\n  //\n  //--------------------------------------------------------------------\n\n  // Cases where newer-ish browsers send keyIdentifier which can be\n  // used to disambiguate keys.\n\n  // keyIdentifierTable[keyIdentifier] -> keyInfo\n\n  var keyIdentifierTable = {};\n  if ('cros' === os) {\n    keyIdentifierTable['U+00A0'] = { code: 'ShiftLeft', location: LEFT };\n    keyIdentifierTable['U+00A1'] = { code: 'ShiftRight', location: RIGHT };\n    keyIdentifierTable['U+00A2'] = { code: 'ControlLeft', location: LEFT };\n    keyIdentifierTable['U+00A3'] = { code: 'ControlRight', location: RIGHT };\n    keyIdentifierTable['U+00A4'] = { code: 'AltLeft', location: LEFT };\n    keyIdentifierTable['U+00A5'] = { code: 'AltRight', location: RIGHT };\n  }\n  if ('chrome-mac' === browser_os) {\n    keyIdentifierTable['U+0010'] = { code: 'ContextMenu' };\n  }\n  if ('safari-mac' === browser_os) {\n    keyIdentifierTable['U+0010'] = { code: 'ContextMenu' };\n  }\n  if ('ios' === os) {\n    // These only generate keyup events\n    keyIdentifierTable['U+0010'] = { code: 'Function' };\n\n    keyIdentifierTable['U+001C'] = { code: 'ArrowLeft' };\n    keyIdentifierTable['U+001D'] = { code: 'ArrowRight' };\n    keyIdentifierTable['U+001E'] = { code: 'ArrowUp' };\n    keyIdentifierTable['U+001F'] = { code: 'ArrowDown' };\n\n    keyIdentifierTable['U+0001'] = { code: 'Home' }; // [USB: 0x4a] Fn + ArrowLeft\n    keyIdentifierTable['U+0004'] = { code: 'End' }; // [USB: 0x4d] Fn + ArrowRight\n    keyIdentifierTable['U+000B'] = { code: 'PageUp' }; // [USB: 0x4b] Fn + ArrowUp\n    keyIdentifierTable['U+000C'] = { code: 'PageDown' }; // [USB: 0x4e] Fn + ArrowDown\n  }\n\n  //--------------------------------------------------------------------\n  //\n  // Location Mappings\n  //\n  //--------------------------------------------------------------------\n\n  // Cases where newer-ish browsers send location/keyLocation which\n  // can be used to disambiguate keys.\n\n  // locationTable[location][keyCode] -> keyInfo\n  var locationTable = [];\n  locationTable[LEFT] = {\n    0x10: { code: 'ShiftLeft', location: LEFT }, // [USB: 0xe1]\n    0x11: { code: 'ControlLeft', location: LEFT }, // [USB: 0xe0]\n    0x12: { code: 'AltLeft', location: LEFT } // [USB: 0xe2]\n  };\n  locationTable[RIGHT] = {\n    0x10: { code: 'ShiftRight', location: RIGHT }, // [USB: 0xe5]\n    0x11: { code: 'ControlRight', location: RIGHT }, // [USB: 0xe4]\n    0x12: { code: 'AltRight', location: RIGHT } // [USB: 0xe6]\n  };\n  locationTable[NUMPAD] = {\n    0x0D: { code: 'NumpadEnter', location: NUMPAD } // [USB: 0x58]\n  };\n\n  mergeIf(locationTable[NUMPAD], 'moz', {\n    0x6D: { code: 'NumpadSubtract', location: NUMPAD }, // [USB: 0x56]\n    0x6B: { code: 'NumpadAdd', location: NUMPAD } // [USB: 0x57]\n  });\n  mergeIf(locationTable[LEFT], 'moz-mac', {\n    0xE0: { code: 'OSLeft', location: LEFT } // [USB: 0xe3]\n  });\n  mergeIf(locationTable[RIGHT], 'moz-mac', {\n    0xE0: { code: 'OSRight', location: RIGHT } // [USB: 0xe7]\n  });\n  mergeIf(locationTable[RIGHT], 'moz-win', {\n    0x5B: { code: 'OSRight', location: RIGHT } // [USB: 0xe7]\n  });\n\n\n  mergeIf(locationTable[RIGHT], 'mac', {\n    0x5D: { code: 'OSRight', location: RIGHT } // [USB: 0xe7]\n  });\n\n  mergeIf(locationTable[NUMPAD], 'chrome-mac', {\n    0x0C: { code: 'NumLock', location: NUMPAD } // [USB: 0x53]\n  });\n\n  mergeIf(locationTable[NUMPAD], 'safari-mac', {\n    0x0C: { code: 'NumLock', location: NUMPAD }, // [USB: 0x53]\n    0xBB: { code: 'NumpadAdd', location: NUMPAD }, // [USB: 0x57]\n    0xBD: { code: 'NumpadSubtract', location: NUMPAD }, // [USB: 0x56]\n    0xBE: { code: 'NumpadDecimal', location: NUMPAD }, // [USB: 0x63]\n    0xBF: { code: 'NumpadDivide', location: NUMPAD } // [USB: 0x54]\n  });\n\n\n  //--------------------------------------------------------------------\n  //\n  // Key Values\n  //\n  //--------------------------------------------------------------------\n\n  // Mapping from `code` values to `key` values. Values defined at:\n  // https://dvcs.w3.org/hg/dom3events/raw-file/tip/html/DOM3Events-key.html\n  // Entries are only provided when `key` differs from `code`. If\n  // printable, `shiftKey` has the shifted printable character. This\n  // assumes US Standard 101 layout\n\n  var codeToKeyTable = {\n    // Modifier Keys\n    ShiftLeft: { key: 'Shift' },\n    ShiftRight: { key: 'Shift' },\n    ControlLeft: { key: 'Control' },\n    ControlRight: { key: 'Control' },\n    AltLeft: { key: 'Alt' },\n    AltRight: { key: 'Alt' },\n    OSLeft: { key: 'OS' },\n    OSRight: { key: 'OS' },\n\n    // Whitespace Keys\n    NumpadEnter: { key: 'Enter' },\n    Space: { key: ' ' },\n\n    // Printable Keys\n    Digit0: { key: '0', shiftKey: ')' },\n    Digit1: { key: '1', shiftKey: '!' },\n    Digit2: { key: '2', shiftKey: '@' },\n    Digit3: { key: '3', shiftKey: '#' },\n    Digit4: { key: '4', shiftKey: '$' },\n    Digit5: { key: '5', shiftKey: '%' },\n    Digit6: { key: '6', shiftKey: '^' },\n    Digit7: { key: '7', shiftKey: '&' },\n    Digit8: { key: '8', shiftKey: '*' },\n    Digit9: { key: '9', shiftKey: '(' },\n    KeyA: { key: 'a', shiftKey: 'A' },\n    KeyB: { key: 'b', shiftKey: 'B' },\n    KeyC: { key: 'c', shiftKey: 'C' },\n    KeyD: { key: 'd', shiftKey: 'D' },\n    KeyE: { key: 'e', shiftKey: 'E' },\n    KeyF: { key: 'f', shiftKey: 'F' },\n    KeyG: { key: 'g', shiftKey: 'G' },\n    KeyH: { key: 'h', shiftKey: 'H' },\n    KeyI: { key: 'i', shiftKey: 'I' },\n    KeyJ: { key: 'j', shiftKey: 'J' },\n    KeyK: { key: 'k', shiftKey: 'K' },\n    KeyL: { key: 'l', shiftKey: 'L' },\n    KeyM: { key: 'm', shiftKey: 'M' },\n    KeyN: { key: 'n', shiftKey: 'N' },\n    KeyO: { key: 'o', shiftKey: 'O' },\n    KeyP: { key: 'p', shiftKey: 'P' },\n    KeyQ: { key: 'q', shiftKey: 'Q' },\n    KeyR: { key: 'r', shiftKey: 'R' },\n    KeyS: { key: 's', shiftKey: 'S' },\n    KeyT: { key: 't', shiftKey: 'T' },\n    KeyU: { key: 'u', shiftKey: 'U' },\n    KeyV: { key: 'v', shiftKey: 'V' },\n    KeyW: { key: 'w', shiftKey: 'W' },\n    KeyX: { key: 'x', shiftKey: 'X' },\n    KeyY: { key: 'y', shiftKey: 'Y' },\n    KeyZ: { key: 'z', shiftKey: 'Z' },\n    Numpad0: { key: '0' },\n    Numpad1: { key: '1' },\n    Numpad2: { key: '2' },\n    Numpad3: { key: '3' },\n    Numpad4: { key: '4' },\n    Numpad5: { key: '5' },\n    Numpad6: { key: '6' },\n    Numpad7: { key: '7' },\n    Numpad8: { key: '8' },\n    Numpad9: { key: '9' },\n    NumpadMultiply: { key: '*' },\n    NumpadAdd: { key: '+' },\n    NumpadComma: { key: ',' },\n    NumpadSubtract: { key: '-' },\n    NumpadDecimal: { key: '.' },\n    NumpadDivide: { key: '/' },\n    Semicolon: { key: ';', shiftKey: ':' },\n    Equal: { key: '=', shiftKey: '+' },\n    Comma: { key: ',', shiftKey: '<' },\n    Minus: { key: '-', shiftKey: '_' },\n    Period: { key: '.', shiftKey: '>' },\n    Slash: { key: '/', shiftKey: '?' },\n    Backquote: { key: '`', shiftKey: '~' },\n    BracketLeft: { key: '[', shiftKey: '{' },\n    Backslash: { key: '\\\\', shiftKey: '|' },\n    BracketRight: { key: ']', shiftKey: '}' },\n    Quote: { key: '\\'', shiftKey: '\"' },\n    IntlBackslash: { key: '\\\\', shiftKey: '|' }\n  };\n\n  mergeIf(codeToKeyTable, 'mac', {\n    OSLeft: { key: 'Meta' },\n    OSRight: { key: 'Meta' }\n  });\n\n  // Corrections for 'key' names in older browsers (e.g. FF36-)\n  // https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent.key#Key_values\n  var keyFixTable = {\n    Esc: 'Escape',\n    Nonconvert: 'NonConvert',\n    Left: 'ArrowLeft',\n    Up: 'ArrowUp',\n    Right: 'ArrowRight',\n    Down: 'ArrowDown',\n    Del: 'Delete',\n    Menu: 'ContextMenu',\n    MediaNextTrack: 'MediaTrackNext',\n    MediaPreviousTrack: 'MediaTrackPrevious',\n    SelectMedia: 'MediaSelect',\n    HalfWidth: 'Hankaku',\n    FullWidth: 'Zenkaku',\n    RomanCharacters: 'Romaji',\n    Crsel: 'CrSel',\n    Exsel: 'ExSel',\n    Zoom: 'ZoomToggle'\n  };\n\n  //--------------------------------------------------------------------\n  //\n  // Exported Functions\n  //\n  //--------------------------------------------------------------------\n\n\n  var codeTable = remap(keyCodeToInfoTable, 'code');\n\n  try {\n    var nativeLocation = nativeKeyboardEvent && ('location' in new KeyboardEvent(''));\n  } catch (_) {}\n\n  function keyInfoForEvent(event) {\n    var keyCode = 'keyCode' in event ? event.keyCode : 'which' in event ? event.which : 0;\n\n    var keyInfo = (function(){\n      if (nativeLocation || 'keyLocation' in event) {\n        var location = nativeLocation ? event.location : event.keyLocation;\n        if (location && keyCode in locationTable[location]) {\n          return locationTable[location][keyCode];\n        }\n      }\n      if ('keyIdentifier' in event && event.keyIdentifier in keyIdentifierTable) {\n        return keyIdentifierTable[event.keyIdentifier];\n      }\n      if (keyCode in keyCodeToInfoTable) {\n        return keyCodeToInfoTable[keyCode];\n      }\n      return null;\n    }());\n\n    // TODO: Track these down and move to general tables\n    if (0) {\n      // TODO: Map these for newerish browsers?\n      // TODO: iOS only?\n      // TODO: Override with more common keyIdentifier name?\n      switch (event.keyIdentifier) {\n      case 'U+0010': keyInfo = { code: 'Function' }; break;\n      case 'U+001C': keyInfo = { code: 'ArrowLeft' }; break;\n      case 'U+001D': keyInfo = { code: 'ArrowRight' }; break;\n      case 'U+001E': keyInfo = { code: 'ArrowUp' }; break;\n      case 'U+001F': keyInfo = { code: 'ArrowDown' }; break;\n      }\n    }\n\n    if (!keyInfo)\n      return null;\n\n    var key = (function() {\n      var entry = codeToKeyTable[keyInfo.code];\n      if (!entry) return keyInfo.code;\n      return (event.shiftKey && 'shiftKey' in entry) ? entry.shiftKey : entry.key;\n    }());\n\n    return {\n      code: keyInfo.code,\n      key: key,\n      location: keyInfo.location,\n      keyCap: keyInfo.keyCap\n    };\n  }\n\n  function queryKeyCap(code, locale) {\n    code = String(code);\n    if (!codeTable.hasOwnProperty(code)) return 'Undefined';\n    if (locale && String(locale).toLowerCase() !== 'en-us') throw Error('Unsupported locale');\n    var keyInfo = codeTable[code];\n    return keyInfo.keyCap || keyInfo.code || 'Undefined';\n  }\n\n  if ('KeyboardEvent' in global && 'defineProperty' in Object) {\n    (function() {\n      function define(o, p, v) {\n        if (p in o) return;\n        Object.defineProperty(o, p, v);\n      }\n\n      define(KeyboardEvent.prototype, 'code', { get: function() {\n        var keyInfo = keyInfoForEvent(this);\n        return keyInfo ? keyInfo.code : '';\n      }});\n\n      // Fix for nonstandard `key` values (FF36-)\n      if ('key' in KeyboardEvent.prototype) {\n        var desc = Object.getOwnPropertyDescriptor(KeyboardEvent.prototype, 'key');\n        Object.defineProperty(KeyboardEvent.prototype, 'key', { get: function() {\n          var key = desc.get.call(this);\n          return keyFixTable.hasOwnProperty(key) ? keyFixTable[key] : key;\n        }});\n      }\n\n      define(KeyboardEvent.prototype, 'key', { get: function() {\n        var keyInfo = keyInfoForEvent(this);\n        return (keyInfo && 'key' in keyInfo) ? keyInfo.key : 'Unidentified';\n      }});\n\n      define(KeyboardEvent.prototype, 'location', { get: function() {\n        var keyInfo = keyInfoForEvent(this);\n        return (keyInfo && 'location' in keyInfo) ? keyInfo.location : STANDARD;\n      }});\n\n      define(KeyboardEvent.prototype, 'locale', { get: function() {\n        return '';\n      }});\n    }());\n  }\n\n  if (!('queryKeyCap' in global.KeyboardEvent))\n    global.KeyboardEvent.queryKeyCap = queryKeyCap;\n\n  // Helper for IE8-\n  global.identifyKey = function(event) {\n    if ('code' in event)\n      return;\n\n    var keyInfo = keyInfoForEvent(event);\n    event.code = keyInfo ? keyInfo.code : '';\n    event.key = (keyInfo && 'key' in keyInfo) ? keyInfo.key : 'Unidentified';\n    event.location = ('location' in event) ? event.location :\n      ('keyLocation' in event) ? event.keyLocation :\n      (keyInfo && 'location' in keyInfo) ? keyInfo.location : STANDARD;\n    event.locale = '';\n  };\n\n} (window));\n","'use strict';\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar fails = require('../internals/fails');\nvar flags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar nativeToString = RegExpPrototype[TO_STRING];\n\nvar NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = nativeToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.github.io/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = String(R.source);\n    var rf = R.flags;\n    var f = String(rf === undefined && R instanceof RegExp && !('flags' in RegExpPrototype) ? flags.call(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","require('./src/controls');\nrequire('./src/loaders');\nrequire('./src/misc');\nrequire('./src/pathfinding');\nrequire('./src/primitives');\n","const LoopMode = {\n  once: THREE.LoopOnce,\n  repeat: THREE.LoopRepeat,\n  pingpong: THREE.LoopPingPong\n};\n\n/**\n * animation-mixer\n *\n * Player for animation clips. Intended to be compatible with any model format that supports\n * skeletal or morph animations through THREE.AnimationMixer.\n * See: https://threejs.org/docs/?q=animation#Reference/Animation/AnimationMixer\n */\nmodule.exports = AFRAME.registerComponent('animation-mixer', {\n  schema: {\n    clip:  {default: '*'},\n    duration: {default: 0},\n    clampWhenFinished: {default: false, type: 'boolean'},\n    crossFadeDuration: {default: 0},\n    loop: {default: 'repeat', oneOf: Object.keys(LoopMode)},\n    repetitions: {default: Infinity, min: 0},\n    timeScale: {default: 1}\n  },\n\n  init: function () {\n    /** @type {THREE.Mesh} */\n    this.model = null;\n    /** @type {THREE.AnimationMixer} */\n    this.mixer = null;\n    /** @type {Array<THREE.AnimationAction>} */\n    this.activeActions = [];\n\n    const model = this.el.getObject3D('mesh');\n\n    if (model) {\n      this.load(model);\n    } else {\n      this.el.addEventListener('model-loaded', (e) => {\n        this.load(e.detail.model);\n      });\n    }\n  },\n\n  load: function (model) {\n    const el = this.el;\n    this.model = model;\n    this.mixer = new THREE.AnimationMixer(model);\n    this.mixer.addEventListener('loop', (e) => {\n      el.emit('animation-loop', {action: e.action, loopDelta: e.loopDelta});\n    });\n    this.mixer.addEventListener('finished', (e) => {\n      el.emit('animation-finished', {action: e.action, direction: e.direction});\n    });\n    if (this.data.clip) this.update({});\n  },\n\n  remove: function () {\n    if (this.mixer) this.mixer.stopAllAction();\n  },\n\n  update: function (prevData) {\n    if (!prevData) return;\n\n    const data = this.data;\n    const changes = AFRAME.utils.diff(data, prevData);\n\n    // If selected clips have changed, restart animation.\n    if ('clip' in changes) {\n      this.stopAction();\n      if (data.clip) this.playAction();\n      return;\n    }\n\n    // Otherwise, modify running actions.\n    this.activeActions.forEach((action) => {\n      if ('duration' in changes && data.duration) {\n        action.setDuration(data.duration);\n      }\n      if ('clampWhenFinished' in changes) {\n        action.clampWhenFinished = data.clampWhenFinished;\n      }\n      if ('loop' in changes || 'repetitions' in changes) {\n        action.setLoop(LoopMode[data.loop], data.repetitions);\n      }\n      if ('timeScale' in changes) {\n        action.setEffectiveTimeScale(data.timeScale);\n      }\n    });\n  },\n\n  stopAction: function () {\n    const data = this.data;\n    for (let i = 0; i < this.activeActions.length; i++) {\n      data.crossFadeDuration\n        ? this.activeActions[i].fadeOut(data.crossFadeDuration)\n        : this.activeActions[i].stop();\n    }\n    this.activeActions.length = 0;\n  },\n\n  playAction: function () {\n    if (!this.mixer) return;\n\n    const model = this.model,\n        data = this.data,\n        clips = model.animations || (model.geometry || {}).animations || [];\n\n    if (!clips.length) return;\n\n    const re = wildcardToRegExp(data.clip);\n\n    for (let clip, i = 0; (clip = clips[i]); i++) {\n      if (clip.name.match(re)) {\n        const action = this.mixer.clipAction(clip, model);\n        action.enabled = true;\n        action.clampWhenFinished = data.clampWhenFinished;\n        if (data.duration) action.setDuration(data.duration);\n        if (data.timeScale !== 1) action.setEffectiveTimeScale(data.timeScale);\n        action\n          .setLoop(LoopMode[data.loop], data.repetitions)\n          .fadeIn(data.crossFadeDuration)\n          .play();\n        this.activeActions.push(action);\n      }\n    }\n  },\n\n  tick: function (t, dt) {\n    if (this.mixer && !isNaN(dt)) this.mixer.update(dt / 1000);\n  }\n});\n\n/**\n * Creates a RegExp from the given string, converting asterisks to .* expressions,\n * and escaping all other characters.\n */\nfunction wildcardToRegExp (s) {\n  return new RegExp('^' + s.split(/\\*+/).map(regExpEscape).join('.*') + '$');\n}\n\n/**\n * RegExp-escapes all characters in the given string.\n */\nfunction regExpEscape (s) {\n  return s.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&');\n}\n","var isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.github.io/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) == 'RegExp');\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $some = require('../internals/array-iteration').some;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('some');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('some');\n\n// `Array.prototype.some` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.some\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  some: function some(callbackfn /* , thisArg */) {\n    return $some(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Hud.vue?vue&type=style&index=0&id=ab0a5882&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Hud.vue?vue&type=style&index=0&id=ab0a5882&lang=scss&scoped=true&\"","'use strict';\nvar $ = require('../internals/export');\nvar $padStart = require('../internals/string-pad').start;\nvar WEBKIT_BUG = require('../internals/string-pad-webkit-bug');\n\n// `String.prototype.padStart` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.padstart\n$({ target: 'String', proto: true, forced: WEBKIT_BUG }, {\n  padStart: function padStart(maxLength /* , fillString = ' ' */) {\n    return $padStart(this, maxLength, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","// a string of all valid unicode whitespaces\n// eslint-disable-next-line max-len\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","var isRegExp = require('../internals/is-regexp');\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","/**\n * @param  {Array<THREE.Material>|THREE.Material} material\n * @return {Array<THREE.Material>}\n */\nfunction ensureMaterialArray (material) {\n  if (!material) {\n    return [];\n  } else if (Array.isArray(material)) {\n    return material;\n  } else if (material.materials) {\n    return material.materials;\n  } else {\n    return [material];\n  }\n}\n\n/**\n * @param  {THREE.Object3D} mesh\n * @param  {Array<string>} materialNames\n * @param  {THREE.Texture} envMap\n * @param  {number} reflectivity  [description]\n */\nfunction applyEnvMap (mesh, materialNames, envMap, reflectivity) {\n  if (!mesh) return;\n\n  materialNames = materialNames || [];\n\n  mesh.traverse((node) => {\n\n    if (!node.isMesh) return;\n\n    const meshMaterials = ensureMaterialArray(node.material);\n\n    meshMaterials.forEach((material) => {\n\n      if (material && !('envMap' in material)) return;\n      if (materialNames.length && materialNames.indexOf(material.name) === -1) return;\n\n      material.envMap = envMap;\n      material.reflectivity = reflectivity;\n      material.needsUpdate = true;\n\n    });\n\n  });\n}\n\n/**\n * Specifies an envMap on an entity, without replacing any existing material\n * properties.\n */\nmodule.exports = AFRAME.registerComponent('cube-env-map', {\n  multiple: true,\n\n  schema: {\n    path: {default: ''},\n    extension: {default: 'jpg', oneOf: ['jpg', 'png']},\n    format: {default: 'RGBFormat', oneOf: ['RGBFormat', 'RGBAFormat']},\n    enableBackground: {default: false},\n    reflectivity: {default: 1, min: 0, max: 1},\n    materials: {default: []}\n  },\n\n  init: function () {\n    const data = this.data;\n\n    this.texture = new THREE.CubeTextureLoader().load([\n      data.path + 'posx.' + data.extension, data.path + 'negx.' + data.extension,\n      data.path + 'posy.' + data.extension, data.path + 'negy.' + data.extension,\n      data.path + 'posz.' + data.extension, data.path + 'negz.' + data.extension\n    ]);\n    this.texture.format = THREE[data.format];\n\n    this.object3dsetHandler = () => {\n      const mesh = this.el.getObject3D('mesh');\n      const data = this.data;\n      applyEnvMap(mesh, data.materials, this.texture, data.reflectivity);\n    };\n    this.el.addEventListener('object3dset', this.object3dsetHandler);\n  },\n\n  update: function (oldData) {\n    const data = this.data;\n    const mesh = this.el.getObject3D('mesh');\n\n    let addedMaterialNames = [];\n    let removedMaterialNames = [];\n\n    if (data.materials.length) {\n      if (oldData.materials) {\n        addedMaterialNames = data.materials.filter((name) => !oldData.materials.includes(name));\n        removedMaterialNames = oldData.materials.filter((name) => !data.materials.includes(name));\n      } else {\n        addedMaterialNames = data.materials;\n      }\n    }\n    if (addedMaterialNames.length) {\n      applyEnvMap(mesh, addedMaterialNames, this.texture, data.reflectivity);\n    }\n    if (removedMaterialNames.length) {\n      applyEnvMap(mesh, removedMaterialNames, null, 1);\n    }\n\n    if (oldData.materials && data.reflectivity !== oldData.reflectivity) {\n      const maintainedMaterialNames = data.materials\n        .filter((name) => oldData.materials.includes(name));\n      if (maintainedMaterialNames.length) {\n        applyEnvMap(mesh, maintainedMaterialNames, this.texture, data.reflectivity);\n      }\n    }\n\n    if (this.data.enableBackground && !oldData.enableBackground) {\n      this.setBackground(this.texture);\n    } else if (!this.data.enableBackground && oldData.enableBackground) {\n      this.setBackground(null);\n    }\n  },\n\n  remove: function () {\n    this.el.removeEventListener('object3dset', this.object3dsetHandler);\n    const mesh = this.el.getObject3D('mesh');\n    const data = this.data;\n\n    applyEnvMap(mesh, data.materials, null, 1);\n    if (data.enableBackground) this.setBackground(null);\n  },\n\n  setBackground: function (texture) {\n    this.el.sceneEl.object3D.background = texture;\n  }\n});\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PausedModal.vue?vue&type=style&index=0&id=c3b05f9c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PausedModal.vue?vue&type=style&index=0&id=c3b05f9c&lang=scss&scoped=true&\"","require('./checkpoint');\nrequire('./cube-env-map');\nrequire('./grab');\nrequire('./jump-ability');\nrequire('./kinematic-body');\nrequire('./mesh-smooth');\nrequire('./normal-material');\nrequire('./sphere-collider');\n","require('./a-grid');\nrequire('./a-hexgrid');\nrequire('./a-ocean');\nrequire('./a-tube');\n","var DESCRIPTORS = require('../internals/descriptors');\nvar objectKeys = require('../internals/object-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar propertyIsEnumerable = require('../internals/object-property-is-enumerable').f;\n\n// `Object.{ entries, values }` methods implementation\nvar createMethod = function (TO_ENTRIES) {\n  return function (it) {\n    var O = toIndexedObject(it);\n    var keys = objectKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || propertyIsEnumerable.call(O, key)) {\n        result.push(TO_ENTRIES ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n\nmodule.exports = {\n  // `Object.entries` method\n  // https://tc39.github.io/ecma262/#sec-object.entries\n  entries: createMethod(true),\n  // `Object.values` method\n  // https://tc39.github.io/ecma262/#sec-object.values\n  values: createMethod(false)\n};\n","module.exports = AFRAME.registerComponent('checkpoint', {\n  schema: {\n    offset: {default: {x: 0, y: 0, z: 0}, type: 'vec3'}\n  },\n\n  init: function () {\n    this.active = false;\n    this.targetEl = null;\n    this.fire = this.fire.bind(this);\n    this.offset = new THREE.Vector3();\n  },\n\n  update: function () {\n    this.offset.copy(this.data.offset);\n  },\n\n  play: function () { this.el.addEventListener('click', this.fire); },\n  pause: function () { this.el.removeEventListener('click', this.fire); },\n  remove: function () { this.pause(); },\n\n  fire: function () {\n    const targetEl = this.el.sceneEl.querySelector('[checkpoint-controls]');\n    if (!targetEl) {\n      throw new Error('No `checkpoint-controls` component found.');\n    }\n    targetEl.components['checkpoint-controls'].setCheckpoint(this.el);\n  },\n\n  getOffset: function () {\n    return this.offset.copy(this.data.offset);\n  }\n});\n","var isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    typeof (NewTarget = dummy.constructor) == 'function' &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","/* global CANNON */\n\n/**\n * Based on aframe/examples/showcase/tracked-controls.\n *\n * Handles events coming from the hand-controls.\n * Determines if the entity is grabbed or released.\n * Updates its position to move along the controller.\n */\nmodule.exports = AFRAME.registerComponent('grab', {\n  init: function () {\n    this.system = this.el.sceneEl.systems.physics;\n\n    this.GRABBED_STATE = 'grabbed';\n\n    this.grabbing = false;\n    this.hitEl =      /** @type {AFRAME.Element}    */ null;\n    this.physics =    /** @type {AFRAME.System}     */ this.el.sceneEl.systems.physics;\n    this.constraint = /** @type {CANNON.Constraint} */ null;\n\n    // Bind event handlers\n    this.onHit = this.onHit.bind(this);\n    this.onGripOpen = this.onGripOpen.bind(this);\n    this.onGripClose = this.onGripClose.bind(this);\n  },\n\n  play: function () {\n    const el = this.el;\n    el.addEventListener('hit', this.onHit);\n    el.addEventListener('gripdown', this.onGripClose);\n    el.addEventListener('gripup', this.onGripOpen);\n    el.addEventListener('trackpaddown', this.onGripClose);\n    el.addEventListener('trackpadup', this.onGripOpen);\n    el.addEventListener('triggerdown', this.onGripClose);\n    el.addEventListener('triggerup', this.onGripOpen);\n  },\n\n  pause: function () {\n    const el = this.el;\n    el.removeEventListener('hit', this.onHit);\n    el.removeEventListener('gripdown', this.onGripClose);\n    el.removeEventListener('gripup', this.onGripOpen);\n    el.removeEventListener('trackpaddown', this.onGripClose);\n    el.removeEventListener('trackpadup', this.onGripOpen);\n    el.removeEventListener('triggerdown', this.onGripClose);\n    el.removeEventListener('triggerup', this.onGripOpen);\n  },\n\n  onGripClose: function () {\n    this.grabbing = true;\n  },\n\n  onGripOpen: function () {\n    const hitEl = this.hitEl;\n    this.grabbing = false;\n    if (!hitEl) { return; }\n    hitEl.removeState(this.GRABBED_STATE);\n    this.hitEl = undefined;\n    this.system.removeConstraint(this.constraint);\n    this.constraint = null;\n  },\n\n  onHit: function (evt) {\n    const hitEl = evt.detail.el;\n    // If the element is already grabbed (it could be grabbed by another controller).\n    // If the hand is not grabbing the element does not stick.\n    // If we're already grabbing something you can't grab again.\n    if (!hitEl || hitEl.is(this.GRABBED_STATE) || !this.grabbing || this.hitEl) { return; }\n    hitEl.addState(this.GRABBED_STATE);\n    this.hitEl = hitEl;\n    this.constraint = new CANNON.LockConstraint(this.el.body, hitEl.body);\n    this.system.addConstraint(this.constraint);\n  }\n});\n","require('../../lib/keyboard.polyfill');\n\nconst MAX_DELTA = 0.2,\n    PROXY_FLAG = '__keyboard-controls-proxy';\n\nconst KeyboardEvent = window.KeyboardEvent;\n\n/**\n * Keyboard Controls component.\n *\n * Stripped-down version of: https://github.com/donmccurdy/aframe-keyboard-controls\n *\n * Bind keyboard events to components, or control your entities with the WASD keys.\n *\n * Why use KeyboardEvent.code? \"This is set to a string representing the key that was pressed to\n * generate the KeyboardEvent, without taking the current keyboard layout (e.g., QWERTY vs.\n * Dvorak), locale (e.g., English vs. French), or any modifier keys into account. This is useful\n * when you care about which physical key was pressed, rather thanwhich character it corresponds\n * to. For example, if youre a writing a game, you might want a certain set of keys to move the\n * player in different directions, and that mapping should ideally be independent of keyboard\n * layout. See: https://developers.google.com/web/updates/2016/04/keyboardevent-keys-codes\n *\n * @namespace wasd-controls\n * keys the entity moves and if you release it will stop. Easing simulates friction.\n * to the entity when pressing the keys.\n * @param {bool} [enabled=true] - To completely enable or disable the controls\n */\nmodule.exports = AFRAME.registerComponent('keyboard-controls', {\n  schema: {\n    enabled:           { default: true },\n    debug:             { default: false }\n  },\n\n  init: function () {\n    this.dVelocity = new THREE.Vector3();\n    this.localKeys = {};\n    this.listeners = {\n      keydown: this.onKeyDown.bind(this),\n      keyup: this.onKeyUp.bind(this),\n      blur: this.onBlur.bind(this)\n    };\n    this.attachEventListeners();\n  },\n\n  /*******************************************************************\n  * Movement\n  */\n\n  isVelocityActive: function () {\n    return this.data.enabled && !!Object.keys(this.getKeys()).length;\n  },\n\n  getVelocityDelta: function () {\n    const data = this.data,\n        keys = this.getKeys();\n\n    this.dVelocity.set(0, 0, 0);\n    if (data.enabled) {\n      if (keys.KeyW || keys.ArrowUp)    { this.dVelocity.z -= 1; }\n      if (keys.KeyA || keys.ArrowLeft)  { this.dVelocity.x -= 1; }\n      if (keys.KeyS || keys.ArrowDown)  { this.dVelocity.z += 1; }\n      if (keys.KeyD || keys.ArrowRight) { this.dVelocity.x += 1; }\n    }\n\n    return this.dVelocity.clone();\n  },\n\n  /*******************************************************************\n  * Events\n  */\n\n  play: function () {\n    this.attachEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n  },\n\n  remove: function () {\n    this.pause();\n  },\n\n  attachEventListeners: function () {\n    window.addEventListener('keydown', this.listeners.keydown, false);\n    window.addEventListener('keyup', this.listeners.keyup, false);\n    window.addEventListener('blur', this.listeners.blur, false);\n  },\n\n  removeEventListeners: function () {\n    window.removeEventListener('keydown', this.listeners.keydown);\n    window.removeEventListener('keyup', this.listeners.keyup);\n    window.removeEventListener('blur', this.listeners.blur);\n  },\n\n  onKeyDown: function (event) {\n    if (AFRAME.utils.shouldCaptureKeyEvent(event)) {\n      this.localKeys[event.code] = true;\n      this.emit(event);\n    }\n  },\n\n  onKeyUp: function (event) {\n    if (AFRAME.utils.shouldCaptureKeyEvent(event)) {\n      delete this.localKeys[event.code];\n      this.emit(event);\n    }\n  },\n\n  onBlur: function () {\n    for (let code in this.localKeys) {\n      if (this.localKeys.hasOwnProperty(code)) {\n        delete this.localKeys[code];\n      }\n    }\n  },\n\n  emit: function (event) {\n    // TODO - keydown only initially?\n    // TODO - where the f is the spacebar\n\n    // Emit original event.\n    if (PROXY_FLAG in event) {\n      // TODO - Method never triggered.\n      this.el.emit(event.type, event);\n    }\n\n    // Emit convenience event, identifying key.\n    this.el.emit(event.type + ':' + event.code, new KeyboardEvent(event.type, event));\n    if (this.data.debug) console.log(event.type + ':' + event.code);\n  },\n\n  /*******************************************************************\n  * Accessors\n  */\n\n  isPressed: function (code) {\n    return code in this.getKeys();\n  },\n\n  getKeys: function () {\n    if (this.isProxied()) {\n      return this.el.sceneEl.components['proxy-controls'].getKeyboard();\n    }\n    return this.localKeys;\n  },\n\n  isProxied: function () {\n    const proxyControls = this.el.sceneEl.components['proxy-controls'];\n    return proxyControls && proxyControls.isConnected();\n  }\n\n});\n","/**\n * Movement Controls\n *\n * @author Don McCurdy <dm@donmccurdy.com>\n */\n\nconst COMPONENT_SUFFIX = '-controls',\n    MAX_DELTA = 0.2, // ms\n    EPS = 10e-6;\n\nmodule.exports = AFRAME.registerComponent('movement-controls', {\n\n  /*******************************************************************\n   * Schema\n   */\n\n  dependencies: ['rotation'],\n\n  schema: {\n    enabled:            { default: true },\n    controls:           { default: ['gamepad', 'trackpad', 'keyboard', 'touch'] },\n    speed:              { default: 0.3, min: 0 },\n    fly:                { default: false },\n    constrainToNavMesh: { default: false },\n    camera:             { default: '[movement-controls] [camera]', type: 'selector' }\n  },\n\n  /*******************************************************************\n   * Lifecycle\n   */\n\n  init: function () {\n    const el = this.el;\n\n    this.velocityCtrl = null;\n\n    this.velocity = new THREE.Vector3();\n    this.heading = new THREE.Quaternion();\n\n    // Navigation\n    this.navGroup = null;\n    this.navNode = null;\n\n    if (el.sceneEl.hasLoaded) {\n      this.injectControls();\n    } else {\n      el.sceneEl.addEventListener('loaded', this.injectControls.bind(this));\n    }\n  },\n\n  update: function (prevData) {\n    const el = this.el;\n    const data = this.data;\n    const nav = el.sceneEl.systems.nav;\n    if (el.sceneEl.hasLoaded) {\n      this.injectControls();\n    }\n    if (nav && data.constrainToNavMesh !== prevData.constrainToNavMesh) {\n      data.constrainToNavMesh\n        ? nav.addAgent(this)\n        : nav.removeAgent(this);\n    }\n  },\n\n  injectControls: function () {\n    const data = this.data;\n    var name;\n\n    for (let i = 0; i < data.controls.length; i++) {\n      name = data.controls[i] + COMPONENT_SUFFIX;\n      if (!this.el.components[name]) {\n        this.el.setAttribute(name, '');\n      }\n    }\n  },\n\n  updateNavLocation: function () {\n    this.navGroup = null;\n    this.navNode = null;\n  },\n\n  /*******************************************************************\n   * Tick\n   */\n\n  tick: (function () {\n    const start = new THREE.Vector3();\n    const end = new THREE.Vector3();\n    const clampedEnd = new THREE.Vector3();\n\n    return function (t, dt) {\n      if (!dt) return;\n\n      const el = this.el;\n      const data = this.data;\n\n      if (!data.enabled) return;\n\n      this.updateVelocityCtrl();\n      const velocityCtrl = this.velocityCtrl;\n      const velocity = this.velocity;\n\n      if (!velocityCtrl) return;\n\n      // Update velocity. If FPS is too low, reset.\n      if (dt / 1000 > MAX_DELTA) {\n        velocity.set(0, 0, 0);\n      } else {\n        this.updateVelocity(dt);\n      }\n\n      if (data.constrainToNavMesh\n          && velocityCtrl.isNavMeshConstrained !== false) {\n\n        if (velocity.lengthSq() < EPS) return;\n\n        start.copy(el.object3D.position);\n        end\n          .copy(velocity)\n          .multiplyScalar(dt / 1000)\n          .add(start);\n\n        const nav = el.sceneEl.systems.nav;\n        this.navGroup = this.navGroup === null ? nav.getGroup(start) : this.navGroup;\n        this.navNode = this.navNode || nav.getNode(start, this.navGroup);\n        this.navNode = nav.clampStep(start, end, this.navGroup, this.navNode, clampedEnd);\n        el.object3D.position.copy(clampedEnd);\n      } else if (el.hasAttribute('velocity')) {\n        el.setAttribute('velocity', velocity);\n      } else {\n        el.object3D.position.x += velocity.x * dt / 1000;\n        el.object3D.position.y += velocity.y * dt / 1000;\n        el.object3D.position.z += velocity.z * dt / 1000;\n      }\n\n    };\n  }()),\n\n  /*******************************************************************\n   * Movement\n   */\n\n  updateVelocityCtrl: function () {\n    const data = this.data;\n    if (data.enabled) {\n      for (let i = 0, l = data.controls.length; i < l; i++) {\n        const control = this.el.components[data.controls[i] + COMPONENT_SUFFIX];\n        if (control && control.isVelocityActive()) {\n          this.velocityCtrl = control;\n          return;\n        }\n      }\n      this.velocityCtrl = null;\n    }\n  },\n\n  updateVelocity: (function () {\n    const vector2 = new THREE.Vector2();\n    const quaternion = new THREE.Quaternion();\n\n    return function (dt) {\n      let dVelocity;\n      const el = this.el;\n      const control = this.velocityCtrl;\n      const velocity = this.velocity;\n      const data = this.data;\n\n      if (control) {\n        if (control.getVelocityDelta) {\n          dVelocity = control.getVelocityDelta(dt);\n        } else if (control.getVelocity) {\n          velocity.copy(control.getVelocity());\n          return;\n        } else if (control.getPositionDelta) {\n          velocity.copy(control.getPositionDelta(dt).multiplyScalar(1000 / dt));\n          return;\n        } else {\n          throw new Error('Incompatible movement controls: ', control);\n        }\n      }\n\n      if (el.hasAttribute('velocity') && !data.constrainToNavMesh) {\n        velocity.copy(this.el.getAttribute('velocity'));\n      }\n\n      if (dVelocity && data.enabled) {\n        const cameraEl = data.camera;\n\n        // Rotate to heading\n        quaternion.copy(cameraEl.object3D.quaternion);\n        quaternion.premultiply(el.object3D.quaternion);\n        dVelocity.applyQuaternion(quaternion);\n\n        const factor = dVelocity.length();\n        if (data.fly) {\n          velocity.copy(dVelocity);\n          velocity.multiplyScalar(this.data.speed * 16.66667);\n        } else {\n          vector2.set(dVelocity.x, dVelocity.z);\n          vector2.setLength(factor * this.data.speed * 16.66667);\n          velocity.x = vector2.x;\n          velocity.z = vector2.y;\n        }\n      }\n    };\n\n  }())\n});\n","/**\n * Flat-shaded ocean primitive.\n *\n * Based on a Codrops tutorial:\n * http://tympanus.net/codrops/2016/04/26/the-aviator-animating-basic-3d-scene-threejs/\n */\nmodule.exports.Primitive = AFRAME.registerPrimitive('a-ocean', {\n  defaultComponents: {\n    ocean: {},\n    rotation: {x: -90, y: 0, z: 0}\n  },\n  mappings: {\n    width: 'ocean.width',\n    depth: 'ocean.depth',\n    density: 'ocean.density',\n    amplitude: 'ocean.amplitude',\n    amplitudeVariance: 'ocean.amplitudeVariance',\n    speed: 'ocean.speed',\n    speedVariance: 'ocean.speedVariance',\n    color: 'ocean.color',\n    opacity: 'ocean.opacity'\n  }\n});\n\nmodule.exports.Component = AFRAME.registerComponent('ocean', {\n  schema: {\n    // Dimensions of the ocean area.\n    width: {default: 10, min: 0},\n    depth: {default: 10, min: 0},\n\n    // Density of waves.\n    density: {default: 10},\n\n    // Wave amplitude and variance.\n    amplitude: {default: 0.1},\n    amplitudeVariance: {default: 0.3},\n\n    // Wave speed and variance.\n    speed: {default: 1},\n    speedVariance: {default: 2},\n\n    // Material.\n    color: {default: '#7AD2F7', type: 'color'},\n    opacity: {default: 0.8}\n  },\n\n  /**\n   * Use play() instead of init(), because component mappings  unavailable as dependencies  are\n   * not guaranteed to have parsed when this component is initialized.\n   */\n  play: function () {\n    const el = this.el,\n        data = this.data;\n    let material = el.components.material;\n\n    const geometry = new THREE.PlaneGeometry(data.width, data.depth, data.density, data.density);\n    geometry.mergeVertices();\n    this.waves = [];\n    for (let v, i = 0, l = geometry.vertices.length; i < l; i++) {\n      v = geometry.vertices[i];\n      this.waves.push({\n        z: v.z,\n        ang: Math.random() * Math.PI * 2,\n        amp: data.amplitude + Math.random() * data.amplitudeVariance,\n        speed: (data.speed + Math.random() * data.speedVariance) / 1000 // radians / frame\n      });\n    }\n\n    if (!material) {\n      material = {};\n      material.material = new THREE.MeshPhongMaterial({\n        color: data.color,\n        transparent: data.opacity < 1,\n        opacity: data.opacity,\n        shading: THREE.FlatShading,\n      });\n    }\n\n    this.mesh = new THREE.Mesh(geometry, material.material);\n    el.setObject3D('mesh', this.mesh);\n  },\n\n  remove: function () {\n    this.el.removeObject3D('mesh');\n  },\n\n  tick: function (t, dt) {\n    if (!dt) return;\n\n    const verts = this.mesh.geometry.vertices;\n    for (let v, vprops, i = 0; (v = verts[i]); i++){\n      vprops = this.waves[i];\n      v.z = vprops.z + Math.sin(vprops.ang) * vprops.amp;\n      vprops.ang += vprops.speed * dt;\n    }\n    this.mesh.geometry.verticesNeedUpdate = true;\n  }\n});\n","require('./animation-mixer');\nrequire('./collada-model-legacy');\nrequire('./fbx-model');\nrequire('./gltf-model-legacy');\nrequire('./object-model');\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VAlert.vue?vue&type=style&index=0&id=7e6a8a56&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VAlert.vue?vue&type=style&index=0&id=7e6a8a56&lang=scss&scoped=true&\"","'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  concat: function concat(arg) { // eslint-disable-line no-unused-vars\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = toLength(E.length);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","// https://github.com/zloirock/core-js/issues/280\nvar userAgent = require('../internals/engine-user-agent');\n\n// eslint-disable-next-line unicorn/no-unsafe-regex\nmodule.exports = /Version\\/10\\.\\d+(\\.\\d+)?( Mobile\\/\\w+)? Safari\\//.test(userAgent);\n","require('./nav-mesh');\nrequire('./nav-agent');\nrequire('./system');\n","THREE.ColladaLoader = require('../../lib/ColladaLoader');\n\n/**\n * collada-model-legacy\n *\n * Loader for COLLADA (.dae) format.\n */\nmodule.exports.Component = AFRAME.registerComponent('collada-model-legacy', {\n  schema: {type: 'asset'},\n\n  init: function () {\n    this.model = null;\n    this.loader = new THREE.ColladaLoader();\n  },\n\n  update: function () {\n    var self = this;\n    var el = this.el;\n    var src = this.data;\n    var rendererSystem = this.el.sceneEl.systems.renderer;\n\n    if (!src) { return; }\n\n    this.remove();\n\n    this.loader.load(src, function (colladaModel) {\n      self.model = colladaModel.scene;\n      self.model.traverse(function (object) {\n        if (object.isMesh) {\n          var material = object.material;\n          if (material.color) rendererSystem.applyColorCorrection(material.color);\n          if (material.map) rendererSystem.applyColorCorrection(material.map);\n          if (material.emissive) rendererSystem.applyColorCorrection(material.emissive);\n          if (material.emissiveMap) rendererSystem.applyColorCorrection(material.emissiveMap);\n        }\n      });\n      el.setObject3D('mesh', self.model);\n      el.emit('model-loaded', {format: 'collada', model: self.model});\n    });\n  },\n\n  remove: function () {\n    if (!this.model) { return; }\n    this.el.removeObject3D('mesh');\n  }\n});\n","function GamepadButtonEvent (type, index, details) {\n  this.type = type;\n  this.index = index;\n  this.pressed = details.pressed;\n  this.value = details.value;\n}\n\nmodule.exports = GamepadButtonEvent;\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar has = require('../internals/has');\nvar classof = require('../internals/classof-raw');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar create = require('../internals/object-create');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\n\n// Opera ~12 has broken Object#toString\nvar BROKEN_CLASSOF = classof(create(NumberPrototype)) == NUMBER;\n\n// `ToNumber` abstract operation\n// https://tc39.github.io/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = it.charCodeAt(0);\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = it.slice(2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = digits.charCodeAt(index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.github.io/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var dummy = this;\n    return dummy instanceof NumberWrapper\n      // check on 1..constructor(foo) case\n      && (BROKEN_CLASSOF ? fails(function () { NumberPrototype.valueOf.call(dummy); }) : classof(dummy) != NUMBER)\n        ? inheritIfRequired(new NativeNumber(toNumber(it)), dummy, NumberWrapper) : toNumber(it);\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(NativeNumber, key = keys[j]) && !has(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (e) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (f) { /* empty */ }\n  } return false;\n};\n","'use strict';\nvar anObject = require('../internals/an-object');\n\n// `RegExp.prototype.flags` getter implementation\n// https://tc39.github.io/ecma262/#sec-get-regexp.prototype.flags\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.dotAll) result += 's';\n  if (that.unicode) result += 'u';\n  if (that.sticky) result += 'y';\n  return result;\n};\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Health.vue?vue&type=style&index=0&id=009e1f4e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Health.vue?vue&type=style&index=0&id=009e1f4e&lang=scss&scoped=true&\"","const fetchScript = require('../../lib/fetch-script')();\n\nconst LOADER_SRC = 'https://cdn.jsdelivr.net/gh/mrdoob/three.js@r86/examples/js/loaders/GLTFLoader.js';\n\nconst loadLoader = (function () {\n  let promise;\n  return function () {\n    promise = promise || fetchScript(LOADER_SRC);\n    return promise;\n  };\n}());\n\n/**\n * Legacy loader for glTF 1.0 models.\n * Asynchronously loads THREE.GLTFLoader from jsdelivr.\n */\nmodule.exports = AFRAME.registerComponent('gltf-model-legacy', {\n  schema: {type: 'model'},\n\n  init: function () {\n    this.model = null;\n    this.loader = null;\n    this.loaderPromise = loadLoader().then(() => {\n      this.loader = new THREE.GLTFLoader();\n      this.loader.setCrossOrigin('Anonymous');\n    });\n  },\n\n  update: function () {\n    const self = this;\n    const el = this.el;\n    const src = this.data;\n\n    if (!src) { return; }\n\n    this.remove();\n\n    this.loaderPromise.then(() => {\n      this.loader.load(src, function gltfLoaded (gltfModel) {\n        self.model = gltfModel.scene;\n        self.model.animations = gltfModel.animations;\n        el.setObject3D('mesh', self.model);\n        el.emit('model-loaded', {format: 'gltf', model: self.model});\n      });\n    });\n  },\n\n  remove: function () {\n    if (!this.model) { return; }\n    this.el.removeObject3D('mesh');\n  }\n});\n","var e=function(){};e.computeCentroids=function(e){var t,n,r;for(t=0,n=e.faces.length;t<n;t++)(r=e.faces[t]).centroid=new THREE.Vector3(0,0,0),r.centroid.add(e.vertices[r.a]),r.centroid.add(e.vertices[r.b]),r.centroid.add(e.vertices[r.c]),r.centroid.divideScalar(3)},e.roundNumber=function(e,t){return Number(e.toFixed(t))},e.sample=function(e){return e[Math.floor(Math.random()*e.length)]},e.mergeVertexIds=function(e,t){var n=[];if(e.forEach(function(e){t.indexOf(e)>=0&&n.push(e)}),n.length<2)return[];n.includes(e[0])&&n.includes(e[e.length-1])&&e.push(e.shift()),n.includes(t[0])&&n.includes(t[t.length-1])&&t.push(t.shift()),n=[],e.forEach(function(e){t.includes(e)&&n.push(e)});for(var r=n[1],o=n[0],i=e.slice();i[0]!==r;)i.push(i.shift());for(var s=0,u=t.slice();u[0]!==o;)if(u.push(u.shift()),s++>10)throw new Error(\"Unexpected state\");return u.shift(),u.pop(),i=i.concat(u)},e.setPolygonCentroid=function(e,t){var n=new THREE.Vector3,r=t.vertices;e.vertexIds.forEach(function(e){n.add(r[e])}),n.divideScalar(e.vertexIds.length),e.centroid.copy(n)},e.cleanPolygon=function(e,t){for(var n=[],r=t.vertices,o=0;o<e.vertexIds.length;o++){var i,s,u,c=r[e.vertexIds[o]];0===o?(i=e.vertexIds[1],s=e.vertexIds[e.vertexIds.length-1]):o===e.vertexIds.length-1?(i=e.vertexIds[0],s=e.vertexIds[e.vertexIds.length-2]):(i=e.vertexIds[o+1],s=e.vertexIds[o-1]),u=r[s];var h=r[i].clone().sub(c),a=u.clone().sub(c),d=h.angleTo(a);if(d>Math.PI-.01&&d<Math.PI+.01){var f=[];e.neighbours.forEach(function(t){t.vertexIds.includes(e.vertexIds[o])||f.push(t)}),e.neighbours=f}else n.push(e.vertexIds[o])}e.vertexIds=n,this.setPolygonCentroid(e,t)},e.isConvex=function(e,t){var n=t.vertices;if(e.vertexIds.length<3)return!1;for(var r=!0,o=[],i=0;i<e.vertexIds.length;i++){var s,u,c=n[e.vertexIds[i]];0===i?(s=n[e.vertexIds[1]],u=n[e.vertexIds[e.vertexIds.length-1]]):i===e.vertexIds.length-1?(s=n[e.vertexIds[0]],u=n[e.vertexIds[e.vertexIds.length-2]]):(s=n[e.vertexIds[i+1]],u=n[e.vertexIds[i-1]]);var h=s.clone().sub(c),a=u.clone().sub(c),d=h.angleTo(a);if(d===Math.PI||0===d)return!1;var f=h.cross(a).y;o.push(f)}return o.forEach(function(e){0===e&&(r=!1)}),o.forEach(o[0]>0?function(e){e<0&&(r=!1)}:function(e){e>0&&(r=!1)}),r},e.distanceToSquared=function(e,t){var n=e.x-t.x,r=e.y-t.y,o=e.z-t.z;return n*n+r*r+o*o},e.isPointInPoly=function(e,t){for(var n=!1,r=-1,o=e.length,i=o-1;++r<o;i=r)(e[r].z<=t.z&&t.z<e[i].z||e[i].z<=t.z&&t.z<e[r].z)&&t.x<(e[i].x-e[r].x)*(t.z-e[r].z)/(e[i].z-e[r].z)+e[r].x&&(n=!n);return n},e.isVectorInPolygon=function(e,t,n){var r=1e5,o=-1e5,i=[];return t.vertexIds.forEach(function(e){r=Math.min(n[e].y,r),o=Math.max(n[e].y,o),i.push(n[e])}),!!(e.y<o+.5&&e.y>r-.5&&this.isPointInPoly(i,e))},e.triarea2=function(e,t,n){return(n.x-e.x)*(t.z-e.z)-(t.x-e.x)*(n.z-e.z)},e.vequal=function(e,t){return this.distanceToSquared(e,t)<1e-5};var t=function(e){this.content=[],this.scoreFunction=e};t.prototype.push=function(e){this.content.push(e),this.sinkDown(this.content.length-1)},t.prototype.pop=function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),e},t.prototype.remove=function(e){var t=this.content.indexOf(e),n=this.content.pop();t!==this.content.length-1&&(this.content[t]=n,this.scoreFunction(n)<this.scoreFunction(e)?this.sinkDown(t):this.bubbleUp(t))},t.prototype.size=function(){return this.content.length},t.prototype.rescoreElement=function(e){this.sinkDown(this.content.indexOf(e))},t.prototype.sinkDown=function(e){for(var t=this.content[e];e>0;){var n=(e+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(t)<this.scoreFunction(r)))break;this.content[n]=t,this.content[e]=r,e=n}},t.prototype.bubbleUp=function(e){for(var t=this.content.length,n=this.content[e],r=this.scoreFunction(n);;){var o=e+1<<1,i=o-1,s=null,u=void 0;if(i<t)(u=this.scoreFunction(this.content[i]))<r&&(s=i);if(o<t)this.scoreFunction(this.content[o])<(null===s?r:u)&&(s=o);if(null===s)break;this.content[e]=this.content[s],this.content[s]=n,e=s}};var n=function(){};n.init=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.f=0,n.g=0,n.h=0,n.cost=1,n.visited=!1,n.closed=!1,n.parent=null}},n.cleanUp=function(e){for(var t=0;t<e.length;t++){var n=e[t];delete n.f,delete n.g,delete n.h,delete n.cost,delete n.visited,delete n.closed,delete n.parent}},n.heap=function(){return new t(function(e){return e.f})},n.search=function(e,t,n){this.init(e);var r=this.heap();for(r.push(t);r.size()>0;){var o=r.pop();if(o===n){for(var i=o,s=[];i.parent;)s.push(i),i=i.parent;return this.cleanUp(s),s.reverse()}o.closed=!0;for(var u=this.neighbours(e,o),c=0,h=u.length;c<h;c++){var a=u[c];if(!a.closed){var d=o.g+a.cost,f=a.visited;if(!f||d<a.g){if(a.visited=!0,a.parent=o,!a.centroid||!n.centroid)throw new Error(\"Unexpected state\");a.h=a.h||this.heuristic(a.centroid,n.centroid),a.g=d,a.f=a.g+a.h,f?r.rescoreElement(a):r.push(a)}}}}return[]},n.heuristic=function(t,n){return e.distanceToSquared(t,n)},n.neighbours=function(e,t){for(var n=[],r=0;r<t.neighbours.length;r++)n.push(e[t.neighbours[r]]);return n};var r=1,o=function(){};o.buildZone=function(t){var n=this,r=this._buildNavigationMesh(t),o={};r.vertices.forEach(function(t){t.x=e.roundNumber(t.x,2),t.y=e.roundNumber(t.y,2),t.z=e.roundNumber(t.z,2)}),o.vertices=r.vertices;var i=this._buildPolygonGroups(r);o.groups=[];var s=function(e,t){for(var n=0;n<e.length;n++)if(t===e[n])return n};return i.forEach(function(t){var r=[];t.forEach(function(o){var i=o.neighbours.map(function(e){return s(t,e)}),u=o.neighbours.map(function(e){return n._getSharedVerticesInOrder(o,e)});o.centroid.x=e.roundNumber(o.centroid.x,2),o.centroid.y=e.roundNumber(o.centroid.y,2),o.centroid.z=e.roundNumber(o.centroid.z,2),r.push({id:s(t,o),neighbours:i,vertexIds:o.vertexIds,centroid:o.centroid,portals:u})}),o.groups.push(r)}),o},o._buildNavigationMesh=function(t){return e.computeCentroids(t),t.mergeVertices(),this._buildPolygonsFromGeometry(t)},o._buildPolygonGroups=function(e){var t=[],n=0,r=function(e){e.neighbours.forEach(function(t){void 0===t.group&&(t.group=e.group,r(t))})};return e.polygons.forEach(function(e){void 0===e.group&&(e.group=n++,r(e)),t[e.group]||(t[e.group]=[]),t[e.group].push(e)}),t},o._buildPolygonNeighbours=function(e,t,n){var r=new Set,o=n.get(e.vertexIds[0]),i=n.get(e.vertexIds[1]),s=n.get(e.vertexIds[2]);o.forEach(function(e){(i.has(e)||s.has(e))&&r.add(t.polygons[e])}),i.forEach(function(e){s.has(e)&&r.add(t.polygons[e])}),e.neighbours=Array.from(r)},o._buildPolygonsFromGeometry=function(e){for(var t=this,n=[],o=e.vertices,i=e.faceVertexUvs,s=new Map,u=0;u<o.length;u++)s.set(u,new Set);e.faces.forEach(function(e){n.push({id:r++,vertexIds:[e.a,e.b,e.c],centroid:e.centroid,normal:e.normal,neighbours:[]}),s.get(e.a).add(n.length-1),s.get(e.b).add(n.length-1),s.get(e.c).add(n.length-1)});var c={polygons:n,vertices:o,faceVertexUvs:i};return n.forEach(function(e){t._buildPolygonNeighbours(e,c,s)}),c},o._getSharedVerticesInOrder=function(e,t){var n=e.vertexIds,r=t.vertexIds,o=new Set;if(n.forEach(function(e){r.includes(e)&&o.add(e)}),o.size<2)return[];o.has(n[0])&&o.has(n[n.length-1])&&n.push(n.shift()),o.has(r[0])&&o.has(r[r.length-1])&&r.push(r.shift());var i=[];return n.forEach(function(e){r.includes(e)&&i.push(e)}),i};var i=function(){this.portals=[]};i.prototype.push=function(e,t){void 0===t&&(t=e),this.portals.push({left:e,right:t})},i.prototype.stringPull=function(){var t,n,r,o=this.portals,i=[],s=0,u=0,c=0;n=o[0].left,r=o[0].right,i.push(t=o[0].left);for(var h=1;h<o.length;h++){var a=o[h].left,d=o[h].right;if(e.triarea2(t,r,d)<=0){if(!(e.vequal(t,r)||e.triarea2(t,n,d)>0)){i.push(n),n=t=n,r=t,u=s=u,c=s,h=s;continue}r=d,c=h}if(e.triarea2(t,n,a)>=0){if(!(e.vequal(t,n)||e.triarea2(t,r,a)<0)){i.push(r),n=t=r,r=t,u=s=c,c=s,h=s;continue}n=a,u=h}}return 0!==i.length&&e.vequal(i[i.length-1],o[o.length-1].left)||i.push(o[o.length-1].left),this.path=i,i};var s,u,c,h,a,d,f=function(){this.zones={}};f.createZone=function(e){return o.buildZone(e)},f.prototype.setZoneData=function(e,t){this.zones[e]=t},f.prototype.getGroup=function(t,n){if(!this.zones[t])return null;var r=null,o=Math.pow(50,2);return this.zones[t].groups.forEach(function(t,i){t.forEach(function(t){var s=e.distanceToSquared(t.centroid,n);s<o&&(r=i,o=s)})}),r},f.prototype.getRandomNode=function(t,n,r,o){if(!this.zones[t])return new THREE.Vector3;r=r||null,o=o||0;var i=[];return this.zones[t].groups[n].forEach(function(t){r&&o?e.distanceToSquared(r,t.centroid)<o*o&&i.push(t.centroid):i.push(t.centroid)}),e.sample(i)||new THREE.Vector3},f.prototype.getClosestNode=function(t,n,r,o){void 0===o&&(o=!1);var i=this.zones[n].vertices,s=null,u=Infinity;return this.zones[n].groups[r].forEach(function(n){var r=e.distanceToSquared(n.centroid,t);r<u&&(!o||e.isVectorInPolygon(t,n,i))&&(s=n,u=r)}),s},f.prototype.findPath=function(e,t,r,o){var s=this.zones[r].groups[o],u=this.zones[r].vertices,c=this.getClosestNode(e,r,o),h=this.getClosestNode(t,r,o,!0);if(!c||!h)return null;var a=n.search(s,c,h),d=function(e,t){for(var n=0;n<e.neighbours.length;n++)if(e.neighbours[n]===t.id)return e.portals[n]},f=new i;f.push(e);for(var l=0;l<a.length;l++){var v=a[l+1];if(v){var p=d(a[l],v);f.push(u[p[0]],u[p[1]])}}f.push(t),f.stringPull();var g=f.path.map(function(e){return new THREE.Vector3(e.x,e.y,e.z)});return g.shift(),g},f.prototype.clampStep=(c=new THREE.Vector3,h=new THREE.Plane,a=new THREE.Triangle,d=new THREE.Vector3,function(e,t,n,r,o,i){var f=this.zones[r].vertices,l=this.zones[r].groups[o],v=[n],p={};p[n.id]=0,s=void 0,d.set(0,0,0),u=Infinity,h.setFromCoplanarPoints(f[n.vertexIds[0]],f[n.vertexIds[1]],f[n.vertexIds[2]]),h.projectPoint(t,c),t.copy(c);for(var g=v.pop();g;g=v.pop()){a.set(f[g.vertexIds[0]],f[g.vertexIds[1]],f[g.vertexIds[2]]),a.closestPointToPoint(t,c),c.distanceToSquared(t)<u&&(s=g,d.copy(c),u=c.distanceToSquared(t));var x=p[g];if(!(x>2))for(var I=0;I<g.neighbours.length;I++){var b=l[g.neighbours[I]];b.id in p||(v.push(b),p[b.id]=x+1)}}return i.copy(d),s});export{f as Pathfinding};\n//# sourceMappingURL=three-pathfinding.module.js.map\n","/**\n * Listen to event and forward to another entity or entities.\n */\nAFRAME.registerComponent('proxy-event', {\n  schema: {\n    captureBubbles: {default: false},\n    enabled: {default: true},\n    event: {type: 'string'},\n    from: {type: 'string'},\n    to: {type: 'string'},\n    as: {type: 'string'},\n    bubbles: {default: false}\n  },\n\n  multiple: true,\n\n  init: function () {\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var i;\n    var to;\n    var self = this;\n\n    if (data.from) {\n      if (data.from === 'PARENT') {\n        from = [el.parentNode];\n      } else {\n        from = document.querySelectorAll(data.from);\n      }\n    } else {\n      if (data.to === 'CHILDREN') {\n        to = el.querySelectorAll('*');\n      } else if (data.to === 'SELF') {\n        to = [el];\n      } else {\n        to = document.querySelectorAll(data.to);\n      }\n    }\n\n    if (data.from) {\n      for (i = 0; i < from.length; i++) {\n        this.addEventListenerFrom(from[i]);\n      }\n    } else {\n      el.addEventListener(data.event, function (evt) {\n        var data = self.data;\n        if (!data.enabled) { return; }\n        if (!data.captureBubbles && evt.target !== el) { return; }\n        for (i = 0; i < to.length; i++) {\n          to[i].emit(data.as || data.event, evt['detail'] ? evt.detail : null, data.bubbles);\n        }\n      });\n    }\n  },\n\n  addEventListenerFrom: function (fromEl) {\n    var data = this.data;\n    var self = this;\n    fromEl.addEventListener(data.event, function (evt) {\n      var data = self.data;\n      if (!data.enabled) { return; }\n      if (!data.captureBubbles && evt.target !== fromEl) { return; }\n      self.el.emit(data.as || data.event, evt['detail'] ? evt.detail : null, false);\n    });\n  }\n});\n","var debug = AFRAME.utils.debug;\nvar coordinates = AFRAME.utils.coordinates;\n\nvar warn = debug('components:look-at:warn');\nvar isCoordinates = coordinates.isCoordinates || coordinates.isCoordinate;\n\ndelete AFRAME.components['look-at'];\n\n/**\n * Look-at component.\n *\n * Modifies rotation to either track another entity OR do a one-time turn towards a position\n * vector.\n *\n * If tracking an object via setting the component value via a selector, look-at will register\n * a behavior to the scene to update rotation on every tick.\n */\nAFRAME.registerComponent('look-at', {\n  schema: {\n    default: '0 0 0',\n\n    parse: function (value) {\n      // A static position to look at.\n      if (isCoordinates(value) || typeof value === 'object') {\n        return coordinates.parse(value);\n      }\n      // A selector to a target entity.\n      return value;\n    },\n\n    stringify: function (data) {\n      if (typeof data === 'object') {\n        return coordinates.stringify(data);\n      }\n      return data;\n    }\n  },\n\n  init: function () {\n    this.target3D = null;\n    this.vector = new THREE.Vector3();\n    this.cameraListener = AFRAME.utils.bind(this.cameraListener, this);\n    this.el.addEventListener('componentinitialized', this.cameraListener);\n    this.el.addEventListener('componentremoved', this.cameraListener);\n  },\n\n  /**\n   * If tracking an object, this will be called on every tick.\n   * If looking at a position vector, this will only be called once (until further updates).\n   */\n  update: function () {\n    var self = this;\n    var target = self.data;\n    var targetEl;\n\n    // No longer looking at anything (i.e., look-at=\"\").\n    if (!target || (typeof target === 'object' && !Object.keys(target).length)) {\n      return self.remove();\n    }\n\n    // Look at a position.\n    if (typeof target === 'object') {\n      return this.lookAt(new THREE.Vector3(target.x, target.y, target.z));\n    }\n\n    // Assume target is a string.\n    // Query for the element, grab its object3D, then register a behavior on the scene to\n    // track the target on every tick.\n    targetEl = self.el.sceneEl.querySelector(target);\n    if (!targetEl) {\n      warn('\"' + target + '\" does not point to a valid entity to look-at');\n      return;\n    }\n    if (!targetEl.hasLoaded) {\n      return targetEl.addEventListener('loaded', function () {\n        self.beginTracking(targetEl);\n      });\n    }\n    return self.beginTracking(targetEl);\n  },\n\n  tick: (function () {\n    var vec3 = new THREE.Vector3();\n\n    return function (t) {\n      // Track target object position. Depends on parent object keeping global transforms up\n      // to state with updateMatrixWorld(). In practice, this is handled by the renderer.\n      var target3D = this.target3D;\n      if (target3D) {\n        target3D.getWorldPosition(vec3);\n        this.lookAt(vec3);\n      }\n    }\n  })(),\n\n  remove: function () {\n    this.el.removeEventListener('componentinitialized', this.cameraListener);\n    this.el.removeEventListener('componentremoved', this.cameraListener);\n  },\n\n  beginTracking: function (targetEl) {\n    this.target3D = targetEl.object3D;\n  },\n\n  cameraListener: function (e) {\n    if (e.detail && e.detail.name === 'camera') {\n      this.update();\n    }\n  },\n\n  lookAt: function (position) {\n    var vector = this.vector;\n    var object3D = this.el.object3D;\n\n    if (this.el.getObject3D('camera')) {\n      // Flip the vector to -z, looking away from target for camera entities. When using\n      // lookat from THREE camera objects, this is applied for you, but since the camera is\n      // nested into a Object3D, we need to apply this manually.\n      vector.subVectors(object3D.position, position).add(object3D.position);\n    } else {\n      vector.copy(position);\n    }\n\n    object3D.lookAt(vector);\n  }\n});\n","/**\n * 3dof (Gear VR, Daydream) controls for mobile.\n */\nmodule.exports = AFRAME.registerComponent('trackpad-controls', {\n  schema: {\n    enabled: { default: true },\n    enableNegX: { default: true },\n    enablePosX: { default: true },\n    enableNegZ: { default: true },\n    enablePosZ: { default: true },\n    mode: { default: 'touch', oneOf: ['swipe', 'touch', 'press'] }\n\n  },\n\n  init: function () {\n    this.dVelocity = new THREE.Vector3();\n    this.zVel      = 0;\n    this.xVel      = 0;\n    this.bindMethods();\n  },\n\n  play: function () {\n    this.addEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.dVelocity.set(0, 0, 0);\n  },\n\n  remove: function () {\n    this.pause();\n  },\n\n  addEventListeners: function () {\n    const data = this.data;\n    const sceneEl = this.el.sceneEl;\n\n    sceneEl.addEventListener('axismove', this.onAxisMove);\n\n    switch (data.mode) {\n      case 'swipe':\n      case 'touch':\n        sceneEl.addEventListener('trackpadtouchstart', this.onTouchStart);\n        sceneEl.addEventListener('trackpadtouchend', this.onTouchEnd);\n        break;\n\n      case 'press':\n        sceneEl.addEventListener('trackpaddown', this.onTouchStart);\n        sceneEl.addEventListener('trackpadup', this.onTouchEnd);\n        break;\n    }\n\n  },\n\n  removeEventListeners: function () {\n    const sceneEl = this.el.sceneEl;\n\n    sceneEl.removeEventListener('axismove', this.onAxisMove);\n    sceneEl.removeEventListener('trackpadtouchstart', this.onTouchStart);\n    sceneEl.removeEventListener('trackpadtouchend', this.onTouchEnd);\n    sceneEl.removeEventListener('trackpaddown', this.onTouchStart);\n    sceneEl.removeEventListener('trackpadup', this.onTouchEnd);\n  },\n\n  isVelocityActive: function () {\n    return this.data.enabled && this.isMoving;\n  },\n\n  getVelocityDelta: function () {\n    this.dVelocity.z = this.isMoving ? -this.zVel : 1;\n    this.dVelocity.x = this.isMoving ? this.xVel : 1;\n    return this.dVelocity.clone();\n  },\n\n  bindMethods: function () {\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n    this.onAxisMove = this.onAxisMove.bind(this);\n  },\n\n  onTouchStart: function (e) {\n    switch(this.data.mode){\n      case 'swipe':\n        this.canRecordAxis = true;\n        this.startingAxisData = [];\n        break;\n      case 'touch':\n        this.isMoving = true;\n        break;\n      case 'press':\n        this.isMoving = true;\n        break;\n    }\n\n    e.preventDefault();\n  },\n\n  onTouchEnd: function (e) {\n    if(this.data.mode == 'swipe') {\n        this.startingAxisData = [];\n    }\n\n    this.isMoving = false;\n    e.preventDefault();\n  },\n\n  onAxisMove: function(e){\n    switch (this.data.mode) {\n      case 'swipe':\n        return this.handleSwipeAxis(e);\n      case 'touch':\n      case 'press':\n        return this.handleTouchAxis(e);\n    }\n  },\n\n  handleSwipeAxis: function(e) {\n    const data = this.data;\n    const axisData = e.detail.axis;\n\n    if(this.startingAxisData.length === 0 && this.canRecordAxis){\n      this.canRecordAxis = false;\n      this.startingAxisData[0] = axisData[0];\n      this.startingAxisData[1] = axisData[1];\n    }\n\n    if(this.startingAxisData.length > 0){\n      let velX = 0;\n      let velZ = 0;\n\n      if (data.enableNegX && axisData[0] < this.startingAxisData[0]) {\n        velX = -1;\n      }\n\n      if (data.enablePosX && axisData[0] > this.startingAxisData[0]) {\n        velX = 1;\n      }\n\n      if (data.enablePosZ && axisData[1] > this.startingAxisData[1]) {\n        velZ = -1;\n      }\n\n      if (data.enableNegZ && axisData[1] < this.startingAxisData[1]) {\n        velZ = 1;\n      }\n\n      const absChangeZ  = Math.abs(this.startingAxisData[1] - axisData[1]);\n      const absChangeX  = Math.abs(this.startingAxisData[0] - axisData[0]);\n\n      if (absChangeX > absChangeZ) {\n        this.zVel = 0;\n        this.xVel = velX;\n        this.isMoving = true;\n      } else {\n        this.xVel = 0;\n        this.zVel = velZ;\n        this.isMoving = true;\n      }\n\n    }\n  },\n\n  handleTouchAxis: function(e) {\n    const data = this.data;\n    const axisData = e.detail.axis;\n\n    let velX = 0;\n    let velZ = 0;\n\n    if (data.enableNegX && axisData[0] < 0) {\n      velX = -1;\n    }\n\n    if (data.enablePosX && axisData[0] > 0) {\n      velX = 1;\n    }\n\n    if (data.enablePosZ && axisData[1] > 0) {\n      velZ = -1;\n    }\n\n    if (data.enableNegZ && axisData[1] < 0) {\n      velZ = 1;\n    }\n\n    if (Math.abs(axisData[0]) > Math.abs(axisData[1])) {\n      this.zVel = 0;\n      this.xVel = velX;\n    } else {\n      this.xVel = 0;\n      this.zVel = velZ;\n    }\n\n  }\n\n});\n\n","'use strict';\nvar $ = require('../internals/export');\nvar $indexOf = require('../internals/array-includes').indexOf;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('indexOf');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.indexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true, forced: !USES_TO_LENGTH }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n","var vg=module.exports={VERSION:\"0.1.1\",PI:Math.PI,TAU:2*Math.PI,DEG_TO_RAD:.0174532925,RAD_TO_DEG:57.2957795,SQRT3:Math.sqrt(3),TILE:\"tile\",ENT:\"entity\",STR:\"structure\",HEX:\"hex\",SQR:\"square\",ABS:\"abstract\"};vg.Board=function(e,t){if(!e)throw new Error(\"You must pass in a grid system for the board to use.\");this.tiles=[],this.tileGroup=null,this.group=new THREE.Object3D,this.grid=null,this.overlay=null,this.finder=new vg.AStarFinder(t),vg.Loader.init(),this.setGrid(e)},vg.Board.prototype={setEntityOnTile:function(e,t){var i=this.grid.cellToPixel(t.cell);e.position.copy(i),e.position.y+=e.heightOffset||0,e.tile&&(e.tile.entity=null),e.tile=t,t.entity=e},addTile:function(e){var t=this.tiles.indexOf(e);-1===t&&(this.tiles.push(e),this.snapTileToGrid(e),e.position.y=0,this.tileGroup.add(e.mesh),this.grid.add(e.cell),e.cell.tile=e)},removeTile:function(e){if(e){var t=this.tiles.indexOf(e);this.grid.remove(e.cell),-1!==t&&this.tiles.splice(t,1),e.dispose()}},removeAllTiles:function(){if(this.tileGroup)for(var e=this.tileGroup.children,t=0;t<e.length;t++)this.tileGroup.remove(e[t])},getTileAtCell:function(e){var t=this.grid.cellToHash(e);return e.tile||(\"undefined\"!=typeof this.grid.cells[t]?this.grid.cells[t].tile:null)},snapToGrid:function(e){var t=this.grid.pixelToCell(e);e.copy(this.grid.cellToPixel(t))},snapTileToGrid:function(e){if(e.cell)e.position.copy(this.grid.cellToPixel(e.cell));else{var t=this.grid.pixelToCell(e.position);e.position.copy(this.grid.cellToPixel(t))}return e},getRandomTile:function(){var e=vg.Tools.randomInt(0,this.tiles.length-1);return this.tiles[e]},findPath:function(e,t,i){return this.finder.findPath(e.cell,t.cell,i,this.grid)},setGrid:function(e){this.group.remove(this.tileGroup),this.grid&&e!==this.grid&&(this.removeAllTiles(),this.tiles.forEach(function(e){this.grid.remove(e.cell),e.dispose()}),this.grid.dispose()),this.grid=e,this.tiles=[],this.tileGroup=new THREE.Object3D,this.group.add(this.tileGroup)},generateOverlay:function(e){var t=new THREE.LineBasicMaterial({color:0,opacity:.3});this.overlay&&this.group.remove(this.overlay),this.overlay=new THREE.Object3D,this.grid.generateOverlay(e,this.overlay,t),this.group.add(this.overlay)},generateTilemap:function(e){this.reset();var t=this.grid.generateTiles(e);this.tiles=t,this.tileGroup=new THREE.Object3D;for(var i=0;i<t.length;i++)this.tileGroup.add(t[i].mesh);this.group.add(this.tileGroup)},reset:function(){this.removeAllTiles(),this.tileGroup&&this.group.remove(this.tileGroup)}},vg.Board.prototype.constructor=vg.Board,vg.Cell=function(e,t,i,s){this.q=e||0,this.r=t||0,this.s=i||0,this.h=s||1,this.tile=null,this.userData={},this.walkable=!0,this._calcCost=0,this._priority=0,this._visited=!1,this._parent=null,this.uniqueID=vg.LinkedList.generateID()},vg.Cell.prototype={set:function(e,t,i){return this.q=e,this.r=t,this.s=i,this},copy:function(e){return this.q=e.q,this.r=e.r,this.s=e.s,this.h=e.h,this.tile=e.tile||null,this.userData=e.userData||{},this.walkable=e.walkable,this},add:function(e){return this.q+=e.q,this.r+=e.r,this.s+=e.s,this},equals:function(e){return this.q===e.q&&this.r===e.r&&this.s===e.s}},vg.Cell.prototype.constructor=vg.Cell,vg.HexGrid=function(e){e=e||{},this.type=vg.HEX,this.size=5,this.cellSize=\"undefined\"==typeof e.cellSize?10:e.cellSize,this.cells={},this.numCells=0,this.extrudeSettings=null,this.autogenerated=!1;var t,i=[];for(t=0;6>t;t++)i.push(this._createVertex(t));for(this.cellShape=new THREE.Shape,this.cellShape.moveTo(i[0].x,i[0].y),t=1;6>t;t++)this.cellShape.lineTo(i[t].x,i[t].y);this.cellShape.lineTo(i[0].x,i[0].y),this.cellShape.autoClose=!0,this.cellGeo=new THREE.Geometry,this.cellGeo.vertices=i,this.cellGeo.verticesNeedUpdate=!0,this.cellShapeGeo=new THREE.ShapeGeometry(this.cellShape),this._cellWidth=2*this.cellSize,this._cellLength=.5*vg.SQRT3*this._cellWidth,this._hashDelimeter=\".\",this._directions=[new vg.Cell(1,-1,0),new vg.Cell(1,0,-1),new vg.Cell(0,1,-1),new vg.Cell(-1,1,0),new vg.Cell(-1,0,1),new vg.Cell(0,-1,1)],this._diagonals=[new vg.Cell(2,-1,-1),new vg.Cell(1,1,-2),new vg.Cell(-1,2,-1),new vg.Cell(-2,1,1),new vg.Cell(-1,-1,2),new vg.Cell(1,-2,1)],this._list=[],this._vec3=new THREE.Vector3,this._cel=new vg.Cell,this._conversionVec=new THREE.Vector3,this._geoCache=[],this._matCache=[]},vg.HexGrid.TWO_THIRDS=2/3,vg.HexGrid.prototype={cellToPixel:function(e){return this._vec3.x=e.q*this._cellWidth*.75,this._vec3.y=e.h,this._vec3.z=-((e.s-e.r)*this._cellLength*.5),this._vec3},pixelToCell:function(e){var t=e.x*(vg.HexGrid.TWO_THIRDS/this.cellSize),i=(-e.x/3+vg.SQRT3/3*e.z)/this.cellSize;return this._cel.set(t,i,-t-i),this._cubeRound(this._cel)},getCellAt:function(e){var t=e.x*(vg.HexGrid.TWO_THIRDS/this.cellSize),i=(-e.x/3+vg.SQRT3/3*e.z)/this.cellSize;return this._cel.set(t,i,-t-i),this._cubeRound(this._cel),this.cells[this.cellToHash(this._cel)]},getNeighbors:function(e,t,i){var s,n,l=this._directions.length;for(this._list.length=0,s=0;l>s;s++)this._cel.copy(e),this._cel.add(this._directions[s]),n=this.cells[this.cellToHash(this._cel)],!n||i&&!i(e,n)||this._list.push(n);if(t)for(s=0;l>s;s++)this._cel.copy(e),this._cel.add(this._diagonals[s]),n=this.cells[this.cellToHash(this._cel)],!n||i&&!i(e,n)||this._list.push(n);return this._list},getRandomCell:function(){var e,t=0,i=vg.Tools.randomInt(0,this.numCells);for(e in this.cells){if(t===i)return this.cells[e];t++}return this.cells[e]},cellToHash:function(e){return e.q+this._hashDelimeter+e.r+this._hashDelimeter+e.s},distance:function(e,t){var i=Math.max(Math.abs(e.q-t.q),Math.abs(e.r-t.r),Math.abs(e.s-t.s));return i+=t.h-e.h},clearPath:function(){var e,t;for(e in this.cells)t=this.cells[e],t._calcCost=0,t._priority=0,t._parent=null,t._visited=!1},traverse:function(e){var t;for(t in this.cells)e(this.cells[t])},generateTile:function(e,t,i){var s=Math.abs(e.h);1>s&&(s=1);var n=this._geoCache[s];n||(this.extrudeSettings.amount=s,n=new THREE.ExtrudeGeometry(this.cellShape,this.extrudeSettings),this._geoCache[s]=n);var l=new vg.Tile({size:this.cellSize,scale:t,cell:e,geometry:n,material:i});return e.tile=l,l},generateTiles:function(e){e=e||{};var t=[],i={tileScale:.95,cellSize:this.cellSize,material:null,extrudeSettings:{amount:1,bevelEnabled:!0,bevelSegments:1,steps:1,bevelSize:.5,bevelThickness:.5}};i=vg.Tools.merge(i,e),this.cellSize=i.cellSize,this._cellWidth=2*this.cellSize,this._cellLength=.5*vg.SQRT3*this._cellWidth,this.autogenerated=!0,this.extrudeSettings=i.extrudeSettings;var s,n,l;for(s in this.cells)l=this.cells[s],n=this.generateTile(l,i.tileScale,i.material),n.position.copy(this.cellToPixel(l)),n.position.y=0,t.push(n);return t},generateTilePoly:function(e){e||(e=new THREE.MeshBasicMaterial({color:2405631}));var t=new THREE.Mesh(this.cellShapeGeo,e);return this._vec3.set(1,0,0),t.rotateOnAxis(this._vec3,vg.PI/2),t},generate:function(e){e=e||{},this.size=\"undefined\"==typeof e.size?this.size:e.size;var t,i,s,n;for(t=-this.size;t<this.size+1;t++)for(i=-this.size;i<this.size+1;i++)s=-t-i,Math.abs(t)<=this.size&&Math.abs(i)<=this.size&&Math.abs(s)<=this.size&&(n=new vg.Cell(t,i,s),this.add(n))},generateOverlay:function(e,t,i){var s,n,l,r=this.cellShape.createPointsGeometry();for(s=-e;e+1>s;s++)for(n=-e;e+1>n;n++)if(l=-s-n,Math.abs(s)<=e&&Math.abs(n)<=e&&Math.abs(l)<=e){this._cel.set(s,n,l);var h=new THREE.Line(r,i);h.position.copy(this.cellToPixel(this._cel)),h.rotation.x=90*vg.DEG_TO_RAD,t.add(h)}},add:function(e){var t=this.cellToHash(e);if(!this.cells[t])return this.cells[t]=e,this.numCells++,e},remove:function(e){var t=this.cellToHash(e);this.cells[t]&&(delete this.cells[t],this.numCells--)},dispose:function(){this.cells=null,this.numCells=0,this.cellShape=null,this.cellGeo.dispose(),this.cellGeo=null,this.cellShapeGeo.dispose(),this.cellShapeGeo=null,this._list=null,this._vec3=null,this._conversionVec=null,this._geoCache=null,this._matCache=null},load:function(e,t,i){var s=this;vg.Tools.getJSON({url:e,callback:function(e){s.fromJSON(e),t.call(i||null,e)},cache:!1,scope:s})},fromJSON:function(e){var t,i,s=e.cells;for(this.cells={},this.numCells=0,this.size=e.size,this.cellSize=e.cellSize,this._cellWidth=2*this.cellSize,this._cellLength=.5*vg.SQRT3*this._cellWidth,this.extrudeSettings=e.extrudeSettings,this.autogenerated=e.autogenerated,t=0;t<s.length;t++)i=new vg.Cell,i.copy(s[t]),this.add(i)},toJSON:function(){var e,t,i={size:this.size,cellSize:this.cellSize,extrudeSettings:this.extrudeSettings,autogenerated:this.autogenerated},s=[];for(t in this.cells)e=this.cells[t],s.push({q:e.q,r:e.r,s:e.s,h:e.h,walkable:e.walkable,userData:e.userData});return i.cells=s,i},_createVertex:function(e){var t=vg.TAU/6*e;return new THREE.Vector3(this.cellSize*Math.cos(t),this.cellSize*Math.sin(t),0)},_cubeRound:function(e){var t=Math.round(e.q),i=Math.round(e.r),s=Math.round(e.s),n=Math.abs(t-e.q),l=Math.abs(i-e.r),r=Math.abs(s-e.s);return n>l&&n>r?t=-i-s:l>r?i=-t-s:s=-t-i,this._cel.set(t,i,s)}},vg.HexGrid.prototype.constructor=vg.HexGrid,vg.SqrGrid=function(e){e=e||{},this.type=vg.SQR,this.size=5,this.cellSize=\"undefined\"==typeof e.cellSize?10:e.cellSize,this.cells={},this.numCells=0,this.extrudeSettings=null,this.autogenerated=!1;var t=[];t.push(new THREE.Vector3),t.push(new THREE.Vector3(-this.cellSize,this.cellSize)),t.push(new THREE.Vector3(this.cellSize,this.cellSize)),t.push(new THREE.Vector3(this.cellSize,-this.cellSize)),this.cellShape=new THREE.Shape,this.cellShape.moveTo(-this.cellSize,-this.cellSize),this.cellShape.lineTo(-this.cellSize,this.cellSize),this.cellShape.lineTo(this.cellSize,this.cellSize),this.cellShape.lineTo(this.cellSize,-this.cellSize),this.cellShape.lineTo(-this.cellSize,-this.cellSize),this.cellGeo=new THREE.Geometry,this.cellGeo.vertices=t,this.cellGeo.verticesNeedUpdate=!0,this.cellShapeGeo=new THREE.ShapeGeometry(this.cellShape),this._fullCellSize=2*this.cellSize,this._hashDelimeter=\".\",this._directions=[new vg.Cell(1,0,0),new vg.Cell(0,-1,0),new vg.Cell(-1,0,0),new vg.Cell(0,1,0)],this._diagonals=[new vg.Cell(-1,-1,0),new vg.Cell(-1,1,0),new vg.Cell(1,1,0),new vg.Cell(1,-1,0)],this._list=[],this._vec3=new THREE.Vector3,this._cel=new vg.Cell,this._conversionVec=new THREE.Vector3,this._geoCache=[],this._matCache=[]},vg.SqrGrid.prototype={cellToPixel:function(e){return this._vec3.x=e.q*this._fullCellSize,this._vec3.y=e.h,this._vec3.z=e.r*this._fullCellSize,this._vec3},pixelToCell:function(e){var t=Math.round(e.x/this._fullCellSize),i=Math.round(e.z/this._fullCellSize);return this._cel.set(t,i,0)},getCellAt:function(e){var t=Math.round(e.x/this._fullCellSize),i=Math.round(e.z/this._fullCellSize);return this._cel.set(t,i),this.cells[this.cellToHash(this._cel)]},getNeighbors:function(e,t,i){var s,n,l=this._directions.length;for(this._list.length=0,s=0;l>s;s++)this._cel.copy(e),this._cel.add(this._directions[s]),n=this.cells[this.cellToHash(this._cel)],!n||i&&!i(e,n)||this._list.push(n);if(t)for(s=0;l>s;s++)this._cel.copy(e),this._cel.add(this._diagonals[s]),n=this.cells[this.cellToHash(this._cel)],!n||i&&!i(e,n)||this._list.push(n);return this._list},getRandomCell:function(){var e,t=0,i=vg.Tools.randomInt(0,this.numCells);for(e in this.cells){if(t===i)return this.cells[e];t++}return this.cells[e]},cellToHash:function(e){return e.q+this._hashDelimeter+e.r},distance:function(e,t){var i=Math.max(Math.abs(e.q-t.q),Math.abs(e.r-t.r));return i+=t.h-e.h},clearPath:function(){var e,t;for(e in this.cells)t=this.cells[e],t._calcCost=0,t._priority=0,t._parent=null,t._visited=!1},traverse:function(e){var t;for(t in this.cells)e(this.cells[t])},generateTile:function(e,t,i){var s=Math.abs(e.h);1>s&&(s=1);var n=this._geoCache[s];n||(this.extrudeSettings.amount=s,n=new THREE.ExtrudeGeometry(this.cellShape,this.extrudeSettings),this._geoCache[s]=n);var l=new vg.Tile({size:this.cellSize,scale:t,cell:e,geometry:n,material:i});return e.tile=l,l},generateTiles:function(e){e=e||{};var t=[],i={tileScale:.95,cellSize:this.cellSize,material:null,extrudeSettings:{amount:1,bevelEnabled:!0,bevelSegments:1,steps:1,bevelSize:.5,bevelThickness:.5}};i=vg.Tools.merge(i,e),this.cellSize=i.cellSize,this._fullCellSize=2*this.cellSize,this.autogenerated=!0,this.extrudeSettings=i.extrudeSettings;var s,n,l;for(s in this.cells)l=this.cells[s],n=this.generateTile(l,i.tileScale,i.material),n.position.copy(this.cellToPixel(l)),n.position.y=0,t.push(n);return t},generateTilePoly:function(e){e||(e=new THREE.MeshBasicMaterial({color:2405631}));var t=new THREE.Mesh(this.cellShapeGeo,e);return this._vec3.set(1,0,0),t.rotateOnAxis(this._vec3,vg.PI/2),t},generate:function(e){e=e||{},this.size=\"undefined\"==typeof e.size?this.size:e.size;var t,i,s,n=Math.ceil(this.size/2);for(t=-n;n>t;t++)for(i=-n;n>i;i++)s=new vg.Cell(t,i+1),this.add(s)},generateOverlay:function(e,t,i){var s,n,l=Math.ceil(e/2);for(s=-l;l>s;s++)for(n=-l;l>n;n++){this._cel.set(s,n);var r=new THREE.Line(this.cellGeo,i);r.position.copy(this.cellToPixel(this._cel)),r.rotation.x=90*vg.DEG_TO_RAD,t.add(r)}},add:function(e){var t=this.cellToHash(e);if(!this.cells[t])return this.cells[t]=e,this.numCells++,e},remove:function(e){var t=this.cellToHash(e);this.cells[t]&&(delete this.cells[t],this.numCells--)},dispose:function(){this.cells=null,this.numCells=0,this.cellShape=null,this.cellGeo.dispose(),this.cellGeo=null,this.cellShapeGeo.dispose(),this.cellShapeGeo=null,this._list=null,this._vec3=null,this._conversionVec=null,this._geoCache=null,this._matCache=null},load:function(e,t,i){vg.Tools.getJSON({url:e,callback:function(e){this.fromJSON(e),t.call(i||null,e)},cache:!1,scope:this})},fromJSON:function(e){var t,i,s=e.cells;for(this.cells={},this.numCells=0,this.size=e.size,this.cellSize=e.cellSize,this._fullCellSize=2*this.cellSize,this.extrudeSettings=e.extrudeSettings,this.autogenerated=e.autogenerated,t=0;t<s.length;t++)i=new vg.Cell,i.copy(s[t]),this.add(i)},toJSON:function(){var e,t,i={size:this.size,cellSize:this.cellSize,extrudeSettings:this.extrudeSettings,autogenerated:this.autogenerated},s=[];for(t in this.cells)e=this.cells[t],s.push({q:e.q,r:e.r,s:e.s,h:e.h,walkable:e.walkable,userData:e.userData});return i.cells=s,i}},vg.SqrGrid.prototype.constructor=vg.SqrGrid,vg.Tile=function(e){e=e||{};var t={cell:null,geometry:null,material:null};if(t=vg.Tools.merge(t,e),!t.cell||!t.geometry)throw new Error(\"Missing vg.Tile configuration\");this.cell=t.cell,this.cell.tile&&this.cell.tile!==this&&this.cell.tile.dispose(),this.cell.tile=this,this.uniqueID=vg.Tools.generateID(),this.geometry=t.geometry,this.material=t.material,this.material||(this.material=new THREE.MeshPhongMaterial({color:vg.Tools.randomizeRGB(\"30, 30, 30\",13)})),this.objectType=vg.TILE,this.entity=null,this.userData={},this.selected=!1,this.highlight=\"0x0084cc\",this.mesh=new THREE.Mesh(this.geometry,this.material),this.mesh.userData.structure=this,this.position=this.mesh.position,this.rotation=this.mesh.rotation,this.rotation.x=-90*vg.DEG_TO_RAD,this.mesh.scale.set(t.scale,t.scale,1),this.material.emissive?this._emissive=this.material.emissive.getHex():this._emissive=null},vg.Tile.prototype={select:function(){return this.material.emissive&&this.material.emissive.setHex(this.highlight),this.selected=!0,this},deselect:function(){return null!==this._emissive&&this.material.emissive&&this.material.emissive.setHex(this._emissive),this.selected=!1,this},toggle:function(){return this.selected?this.deselect():this.select(),this},dispose:function(){this.cell&&this.cell.tile&&(this.cell.tile=null),this.cell=null,this.position=null,this.rotation=null,this.mesh.parent&&this.mesh.parent.remove(this.mesh),this.mesh.userData.structure=null,this.mesh=null,this.material=null,this.userData=null,this.entity=null,this.geometry=null,this._emissive=null}},vg.Tile.prototype.constructor=vg.Tile,function(){var e=function(){this.obj=null,this.next=null,this.prev=null,this.free=!0},t=function(){this.first=null,this.last=null,this.length=0,this.objToNodeMap={},this.uniqueID=Date.now()+\"\"+Math.floor(1e3*Math.random()),this.sortArray=[]};t.generateID=function(){return Math.random().toString(36).slice(2)+Date.now()},t.prototype={getNode:function(e){return this.objToNodeMap[e.uniqueID]},addNode:function(i){var s=new e;if(!i.uniqueID)try{i.uniqueID=t.generateID()}catch(n){return console.error(\"[LinkedList.addNode] obj passed is immutable: cannot attach necessary identifier\"),null}return s.obj=i,s.free=!1,this.objToNodeMap[i.uniqueID]=s,s},swapObjects:function(e,t){this.objToNodeMap[e.obj.uniqueID]=null,this.objToNodeMap[t.uniqueID]=e,e.obj=t},add:function(e){var t=this.objToNodeMap[e.uniqueID];if(t){if(t.free===!1)return;t.obj=e,t.free=!1,t.next=null,t.prev=null}else t=this.addNode(e);if(this.first){if(!this.last)throw new Error(\"[LinkedList.add] No last in the list -- that shouldn't happen here\");this.last.next=t,t.prev=this.last,this.last=t,t.next=null}else this.first=t,this.last=t,t.next=null,t.prev=null;this.length++,this.showDebug&&this.dump(\"after add\")},has:function(e){return!!this.objToNodeMap[e.uniqueID]},moveUp:function(e){this.dump(\"before move up\");var t=this.getNode(e);if(!t)throw\"Oops, trying to move an object that isn't in the list\";if(t.prev){var i=t.prev,s=i.prev;t==this.last&&(this.last=i);var n=t.next;s&&(s.next=t),t.next=i,t.prev=i.prev,i.next=n,i.prev=t,this.first==i&&(this.first=t)}},moveDown:function(e){var t=this.getNode(e);if(!t)throw\"Oops, trying to move an object that isn't in the list\";if(t.next){var i=t.next;this.moveUp(i.obj),this.last==i&&(this.last=t)}},sort:function(e){var t,i,s=this.sortArray,n=this.first;for(s.length=0;n;)s.push(n.obj),n=n.next;for(this.clear(),s.sort(e),i=s.length,t=0;i>t;t++)this.add(s[t])},remove:function(e){var t=this.getNode(e);return!t||t.free?!1:(t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t.prev||(this.first=t.next),t.next||(this.last=t.prev),t.free=!0,t.prev=null,t.next=null,this.length--,!0)},shift:function(){var e=this.first;return 0===this.length?null:(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this.first=e.next,e.next||(this.last=null),e.free=!0,e.prev=null,e.next=null,this.length--,e.obj)},pop:function(){var e=this.last;return 0===this.length?null:(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this.last=e.prev,e.prev||(this.first=null),e.free=!0,e.prev=null,e.next=null,this.length--,e.obj)},concat:function(e){for(var t=e.first;t;)this.add(t.obj),t=t.next},clear:function(){for(var e=this.first;e;)e.free=!0,e=e.next;this.first=null,this.length=0},dispose:function(){for(var e=this.first;e;)e.obj=null,e=e.next;this.first=null,this.objToNodeMap=null},dump:function(e){console.log(\"====================\"+e+\"=====================\");for(var t=this.first;t;)console.log(\"{\"+t.obj.toString()+\"} previous=\"+(t.prev?t.prev.obj:\"NULL\")),t=t.next();console.log(\"===================================\"),console.log(\"Last: {\"+(this.last?this.last.obj:\"NULL\")+\"} First: {\"+(this.first?this.first.obj:\"NULL\")+\"}\")}},t.prototype.constructor=t,vg.LinkedList=t}(),function(){var e=function(e,t,i,s,n){this._listener=t,this.isOnce=i,this.context=s,this.signal=e,this._priority=n||0};e.prototype={active:!0,params:null,execute:function(e){var t,i;return this.active&&this._listener&&(i=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,i),this.isOnce&&this.detach()),t},detach:function(){return this.isBound()?this.signal.remove(this._listener,this.context):null},isBound:function(){return!!this.signal&&!!this._listener},_destroy:function(){delete this.signal,delete this._listener,delete this.context},toString:function(){return\"[SignalBinding isOnce:\"+this.isOnce+\", isBound:\"+this.isBound()+\", active:\"+this.active+\"]\"}},e.prototype.constructor=e;var t=function(){this._bindings=[],this._prevParams=null;var e=this;this.dispatch=function(){t.prototype.dispatch.apply(e,arguments)}};t.prototype={memorize:!1,_shouldPropagate:!0,active:!0,validateListener:function(e,t){if(\"function\"!=typeof e)throw new Error(\"Signal: listener is a required param of {fn}() and should be a Function.\".replace(\"{fn}\",t))},_registerListener:function(t,i,s,n){var l,r=this._indexOfListener(t,s);if(-1!==r){if(l=this._bindings[r],l.isOnce!==i)throw new Error(\"You cannot add\"+(i?\"\":\"Once\")+\"() then add\"+(i?\"Once\":\"\")+\"() the same listener without removing the relationship first.\")}else l=new e(this,t,i,s,n),this._addBinding(l);return this.memorize&&this._prevParams&&l.execute(this._prevParams),l},_addBinding:function(e){var t=this._bindings.length;do t--;while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var i,s=this._bindings.length;s--;)if(i=this._bindings[s],i._listener===e&&i.context===t)return s;return-1},has:function(e,t){return-1!==this._indexOfListener(e,t)},add:function(e,t,i){return this.validateListener(e,\"add\"),this._registerListener(e,!1,t,i)},addOnce:function(e,t,i){return this.validateListener(e,\"addOnce\"),this._registerListener(e,!0,t,i)},remove:function(e,t){this.validateListener(e,\"remove\");var i=this._indexOfListener(e,t);return-1!==i&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),e},removeAll:function(e){\"undefined\"==typeof e&&(e=null);for(var t=this._bindings.length;t--;)e?this._bindings[t].context===e&&(this._bindings[t]._destroy(),this._bindings.splice(t,1)):this._bindings[t]._destroy();e||(this._bindings.length=0)},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var e,t=Array.prototype.slice.call(arguments),i=this._bindings.length;if(this.memorize&&(this._prevParams=t),i){e=this._bindings.slice(),this._shouldPropagate=!0;do i--;while(e[i]&&this._shouldPropagate&&e[i].execute(t)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return\"[Signal active:\"+this.active+\" numListeners:\"+this.getNumListeners()+\"]\"}},t.prototype.constructor=t,vg.Signal=t}(),vg.AStarFinder=function(e){e=e||{};var t={allowDiagonal:!1,heuristicFilter:null};t=vg.Tools.merge(t,e),this.allowDiagonal=t.allowDiagonal,this.heuristicFilter=t.heuristicFilter,this.list=new vg.LinkedList},vg.AStarFinder.prototype={findPath:function(e,t,i,s){var n,l,r,h,o,a;for(i=i||this.heuristicFilter,s.clearPath(),this.list.clear(),this.list.add(e);this.list.length>0;){if(this.list.sort(this.compare),n=this.list.shift(),n._visited=!0,n===t)return vg.PathUtil.backtrace(t);for(r=s.getNeighbors(n,this.allowDiagonal,i),o=0,a=r.length;a>o;o++)if(h=r[o],h.walkable&&(l=n._calcCost+s.distance(n,h),!h._visited||l<h._calcCost)){if(h._visited=!0,h._parent=n,h._calcCost=l,h._priority=l+s.distance(t,h),h===t)return vg.PathUtil.backtrace(t);this.list.add(h)}}return null},compare:function(e,t){return e._priority-t._priority}},vg.AStarFinder.prototype.constructor=vg.AStarFinder,vg.PathUtil={backtrace:function(e){for(var t=[e];e._parent;)e=e._parent,t.push(e);return t.reverse()},biBacktrace:function(e,t){var i=this.backtrace(e),s=this.backtrace(t);return i.concat(s.reverse())},pathLength:function(e){var t,i,s,n,l,r=0;for(t=1;t<e.length;++t)i=e[t-1],s=e[t],n=i[0]-s[0],l=i[1]-s[1],r+=Math.sqrt(n*n+l*l);return r},interpolate:function(e,t,i,s){var n,l,r,h,o,a,c=Math.abs,u=[];for(r=c(i-e),h=c(s-t),n=i>e?1:-1,l=s>t?1:-1,o=r-h;e!==i||t!==s;)u.push([e,t]),a=2*o,a>-h&&(o-=h,e+=n),r>a&&(o+=r,t+=l);return u},expandPath:function(e){var t,i,s,n,l,r,h=[],o=e.length;if(2>o)return h;for(l=0;o-1>l;++l)for(t=e[l],i=e[l+1],s=this.interpolate(t[0],t[1],i[0],i[1]),n=s.length,r=0;n-1>r;++r)h.push(s[r]);return h.push(e[o-1]),h},smoothenPath:function(e,t){var i,s,n,l,r,h,o,a,c,u,d,g,p=t.length,v=t[0][0],f=t[0][1],m=t[p-1][0],_=t[p-1][1];for(i=v,s=f,r=[[i,s]],o=2;p>o;++o){for(c=t[o],n=c[0],l=c[1],u=this.interpolate(i,s,n,l),g=!1,a=1;a<u.length;++a)if(d=u[a],!e.isWalkableAt(d[0],d[1])){g=!0;break}g&&(h=t[o-1],r.push(h),i=h[0],s=h[1])}return r.push([m,_]),r},compressPath:function(e){if(e.length<3)return e;var t,i,s,n,l,r,h=[],o=e[0][0],a=e[0][1],c=e[1][0],u=e[1][1],d=c-o,g=u-a;for(l=Math.sqrt(d*d+g*g),d/=l,g/=l,h.push([o,a]),r=2;r<e.length;r++)t=c,i=u,s=d,n=g,c=e[r][0],u=e[r][1],d=c-t,g=u-i,l=Math.sqrt(d*d+g*g),d/=l,g/=l,(d!==s||g!==n)&&h.push([t,i]);return h.push([c,u]),h}},vg.Loader={manager:null,imageLoader:null,crossOrigin:!1,init:function(e){this.crossOrigin=e||!1,this.manager=new THREE.LoadingManager(function(){},function(){},function(){console.warn(\"Error loading images\")}),this.imageLoader=new THREE.ImageLoader(this.manager),this.imageLoader.crossOrigin=e},loadTexture:function(e,t,i,s){var n=new THREE.Texture(null,t);return this.imageLoader.load(e,function(e){n.image=e,n.needsUpdate=!0,i&&i(n)},null,function(e){s&&s(e)}),n.sourceFile=e,n}},vg.MouseCaster=function(e,t,i){this.down=!1,this.rightDown=!1,this.pickedObject=null,this.selectedObject=null,this.allHits=null,this.active=!0,this.shift=!1,this.ctrl=!1,this.wheel=0,this.position=new THREE.Vector3,this.screenPosition=new THREE.Vector2,this.signal=new vg.Signal,this.group=e,this._camera=t,this._raycaster=new THREE.Raycaster,this._preventDefault=!1,i=i||document,i.addEventListener(\"mousemove\",this._onDocumentMouseMove.bind(this),!1),i.addEventListener(\"mousedown\",this._onDocumentMouseDown.bind(this),!1),i.addEventListener(\"mouseup\",this._onDocumentMouseUp.bind(this),!1),i.addEventListener(\"mousewheel\",this._onMouseWheel.bind(this),!1),i.addEventListener(\"DOMMouseScroll\",this._onMouseWheel.bind(this),!1)},vg.MouseCaster.OVER=\"over\",vg.MouseCaster.OUT=\"out\",vg.MouseCaster.DOWN=\"down\",vg.MouseCaster.UP=\"up\",vg.MouseCaster.CLICK=\"click\",vg.MouseCaster.WHEEL=\"wheel\",vg.MouseCaster.prototype={update:function(){if(this.active){this._raycaster.setFromCamera(this.screenPosition,this._camera);var e,t,i=this._raycaster.intersectObject(this.group,!0);i.length>0?(e=i[0],t=e.object.userData.structure,this.pickedObject!=t&&(this.pickedObject&&this.signal.dispatch(vg.MouseCaster.OUT,this.pickedObject),this.pickedObject=t,this.selectedObject=null,this.signal.dispatch(vg.MouseCaster.OVER,this.pickedObject)),this.position.copy(e.point),this.screenPosition.z=e.distance):(this.pickedObject&&this.signal.dispatch(vg.MouseCaster.OUT,this.pickedObject),this.pickedObject=null,this.selectedObject=null),this.allHits=i}},preventDefault:function(){this._preventDefault=!0},_onDocumentMouseDown:function(e){return e=e||window.event,e.preventDefault(),this._preventDefault?(this._preventDefault=!1,!1):(this.pickedObject&&(this.selectedObject=this.pickedObject),this.shift=e.shiftKey,this.ctrl=e.ctrlKey,this.down=1===e.which,this.rightDown=3===e.which,void this.signal.dispatch(vg.MouseCaster.DOWN,this.pickedObject))},_onDocumentMouseUp:function(e){return e.preventDefault(),this._preventDefault?(this._preventDefault=!1,!1):(this.shift=e.shiftKey,this.ctrl=e.ctrlKey,this.signal.dispatch(vg.MouseCaster.UP,this.pickedObject),this.selectedObject&&this.pickedObject&&this.selectedObject.uniqueID===this.pickedObject.uniqueID&&this.signal.dispatch(vg.MouseCaster.CLICK,this.pickedObject),this.down=1===e.which?!1:this.down,void(this.rightDown=3===e.which?!1:this.rightDown))},_onDocumentMouseMove:function(e){e.preventDefault(),this.screenPosition.x=e.clientX/window.innerWidth*2-1,this.screenPosition.y=2*-(e.clientY/window.innerHeight)+1},_onMouseWheel:function(e){if(this.active){e.preventDefault(),e.stopPropagation();var t=0;void 0!==e.wheelDelta?t=e.wheelDelta:void 0!==e.detail&&(t=-e.detail),t>0?this.wheel++:this.wheel--,this.signal.dispatch(vg.MouseCaster.WHEEL,this.wheel)}}},vg.MouseCaster.prototype.constructor=vg.MouseCaster,vg.Scene=function(e,t){var i={element:document.body,alpha:!0,antialias:!0,clearColor:\"#fff\",sortObjects:!1,fog:null,light:new THREE.DirectionalLight(16777215),lightPosition:null,cameraType:\"PerspectiveCamera\",cameraPosition:null,orthoZoom:4},s={minDistance:100,maxDistance:1e3,zoomSpeed:2,noZoom:!1};if(i=vg.Tools.merge(i,e),\"boolean\"!=typeof t&&(s=vg.Tools.merge(s,t)),this.renderer=new THREE.WebGLRenderer({alpha:i.alpha,antialias:i.antialias}),this.renderer.setClearColor(i.clearColor,0),this.renderer.sortObjects=i.sortObjects,this.width=window.innerWidth,this.height=window.innerHeight,this.orthoZoom=i.orthoZoom,this.container=new THREE.Scene,this.container.fog=i.fog,this.container.add(new THREE.AmbientLight(14540253)),i.lightPosition||i.light.position.set(-1,1,-1).normalize(),this.container.add(i.light),\"OrthographicCamera\"===i.cameraType){var n=window.innerWidth/this.orthoZoom,l=window.innerHeight/this.orthoZoom;this.camera=new THREE.OrthographicCamera(n/-2,n/2,l/2,l/-2,1,5e3)}else this.camera=new THREE.PerspectiveCamera(50,this.width/this.height,1,5e3);this.contolled=!!t,this.contolled&&(this.controls=new THREE.OrbitControls(this.camera,this.renderer.domElement),this.controls.minDistance=s.minDistance,this.controls.maxDistance=s.maxDistance,this.controls.zoomSpeed=s.zoomSpeed,this.controls.noZoom=s.noZoom),i.cameraPosition&&this.camera.position.copy(i.cameraPosition),window.addEventListener(\"resize\",function(){if(this.width=window.innerWidth,this.height=window.innerHeight,\"OrthographicCamera\"===this.camera.type){var e=this.width/this.orthoZoom,t=this.height/this.orthoZoom;this.camera.left=e/-2,this.camera.right=e/2,this.camera.top=t/2,this.camera.bottom=t/-2}else this.camera.aspect=this.width/this.height;this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height)}.bind(this),!1),this.attachTo(i.element)},vg.Scene.prototype={attachTo:function(e){e.style.width=this.width+\"px\",e.style.height=this.height+\"px\",this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),e.appendChild(this.renderer.domElement)},add:function(e){this.container.add(e)},remove:function(e){this.container.remove(e)},render:function(){this.contolled&&this.controls.update(),this.renderer.render(this.container,this.camera)},updateOrthoZoom:function(){if(this.orthoZoom<=0)return void(this.orthoZoom=0);var e=this.width/this.orthoZoom,t=this.height/this.orthoZoom;this.camera.left=e/-2,this.camera.right=e/2,this.camera.top=t/2,this.camera.bottom=t/-2,this.camera.updateProjectionMatrix()},focusOn:function(e){this.camera.lookAt(e.position)}},vg.Scene.prototype.constructor=vg.Scene,vg.SelectionManager=function(e){this.mouse=e,this.onSelect=new vg.Signal,this.onDeselect=new vg.Signal,this.selected=null,this.toggleSelection=!1,this.mouse.signal.add(this.onMouse,this)},vg.SelectionManager.prototype={select:function(e,t){e&&(t=t||!0,this.selected!==e&&this.clearSelection(t),e.selected?this.toggleSelection&&(t&&this.onDeselect.dispatch(e),e.deselect()):e.select(),this.selected=e,t&&this.onSelect.dispatch(e))},clearSelection:function(e){e=e||!0,this.selected&&(e&&this.onDeselect.dispatch(this.selected),this.selected.deselect()),this.selected=null},onMouse:function(e,t){switch(e){case vg.MouseCaster.DOWN:t||this.clearSelection();break;case vg.MouseCaster.CLICK:this.select(t)}}},vg.SelectionManager.prototype.constructor=vg.SelectionManager,vg.Tools={clamp:function(e,t,i){return Math.max(t,Math.min(i,e))},sign:function(e){return e&&e/Math.abs(e)},random:function(e,t){return 1===arguments.length?Math.random()*e-.5*e:Math.random()*(t-e)+e},randomInt:function(e,t){return 1===arguments.length?Math.random()*e-.5*e|0:Math.random()*(t-e+1)+e|0},normalize:function(e,t,i){return(e-t)/(i-t)},getShortRotation:function(e){return e%=this.TAU,e>this.PI?e-=this.TAU:e<-this.PI&&(e+=this.TAU),e},generateID:function(){return Math.random().toString(36).slice(2)+Date.now()},isPlainObject:function(e){if(\"object\"!=typeof e||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!Object.prototype.hasOwnProperty.call(e.constructor.prototype,\"isPrototypeOf\"))return!1}catch(t){return!1}return!0},merge:function(e,t){var i=this,s=Array.isArray(t),n=s&&[]||{};return s?(e=e||[],n=n.concat(e),t.forEach(function(t,s){\"undefined\"==typeof n[s]?n[s]=t:i.isPlainObject(t)?n[s]=i.merge(e[s],t):-1===e.indexOf(t)&&n.push(t)}),n):(e&&i.isPlainObject(e)&&Object.keys(e).forEach(function(t){n[t]=e[t];\n}),Object.keys(t).forEach(function(s){t[s]&&i.isPlainObject(t[s])&&e[s]?n[s]=i.merge(e[s],t[s]):n[s]=t[s]}),n)},now:function(){return window.nwf?window.nwf.system.Performance.elapsedTime:window.performance.now()},empty:function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},radixSort:function(e,t,i,s){if(t=t||0,i=i||e.length,s=s||31,!(t>=i-1||0>s)){for(var n=t,l=i,r=1<<s;l>n;)if(e[n]&r){--l;var h=e[n];e[n]=e[l],e[l]=h}else++n;this.radixSort(e,t,l,s-1),this.radixSort(e,l,i,s-1)}},randomizeRGB:function(e,t){var i,s,n=e.split(\",\"),l=\"rgb(\";for(t=this.randomInt(t),i=0;3>i;i++)s=parseInt(n[i])+t,0>s?s=0:s>255&&(s=255),l+=s+\",\";return l=l.substring(0,l.length-1),l+=\")\"},getJSON:function(e){var t=new XMLHttpRequest,i=\"undefined\"==typeof e.cache?!1:e.cache,s=i?e.url:e.url+\"?t=\"+Math.floor(1e4*Math.random())+Date.now();t.onreadystatechange=function(){if(200===this.status){var t=null;try{t=JSON.parse(this.responseText)}catch(i){return}return void e.callback.call(e.scope||null,t)}0!==this.status&&console.warn(\"[Tools.getJSON] Error: \"+this.status+\" (\"+this.statusText+\") :: \"+e.url)},t.open(\"GET\",s,!0),t.setRequestHeader(\"Accept\",\"application/json\"),t.setRequestHeader(\"Content-Type\",\"application/json\"),t.send(\"\")}};\n//# sourceMappingURL=hex-grid.min.js.map\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"game\"},[_c('a-scene',{attrs:{\"vr-mode-ui\":\"enabled: false\"}},[_c('a-assets',{ref:\"assets\"}),_c('a-entity',{attrs:{\"sound\":\"src: #soundtrack;\\n                     positional: false;\\n                     autoplay: true;\\n                     loop: true\"}}),_c('a-entity',{attrs:{\"bullet\":\"name: normal; speed: 30.0; poolSize: 20\",\"geometry\":\"primitive: icosahedron; radius: 0.1;\",\"material\":\"color: #000; emissiveIntensity: 0.5; emissive: #000\"}}),_c('a-entity',{attrs:{\"bullet\":\"name: doubleBullets; speed: 30.0; poolSize: 20; damagePoints: 2.0\",\"geometry\":\"primitive: icosahedron; radius: 0.1;\",\"material\":\"color: #000; emissiveIntensity: 0.5; emissive: #000\"}}),_c('a-entity',{attrs:{\"bullet\":\"name: enemy; speed: 10.0; poolSize: 20\",\"geometry\":\"primitive: icosahedron; radius: 0.1;\",\"material\":\"color: #ff0000; emissiveIntensity: 0.5; emissive: #ff0000\"}}),_vm._l((_vm.game.enemies),function(enemy){return _c('a-entity',{key:enemy._id,staticClass:\"enemies\",attrs:{\"animation-mixer\":(\"clip: \" + (_vm.game.animationClips.enemyIdle || '*')),\"target\":(\"static: false;\\n                ignoreBullets: enemy;\\n                healthPoints: \" + (enemy.shotsToDie)),\"enemy\":(\"assetId: \" + (enemy.assetId) + \";\\n               playerDamage: \" + (enemy.playerDamage) + \";\\n               score: \" + (enemy.score) + \";\\n               spawnProbability: \" + (enemy.spawn.probability) + \";\\n               spawnMinScore: \" + (enemy.spawn.minScore) + \";\\n               spawnMaxScore: \" + (enemy.spawn.maxScore)),\"random-spawn\":\"min: -10 -1 -10;\\n                    max: 10 2 10;\\n                    radius: 2\",\"visible\":\"false\",\"animation\":\"property: position;\\n                to: 0 1.6 0;\\n                dur: 20000;\\n                easing: easeInOutCubic;\\n                startEvents: spawn;\\n                pauseEvents: despawn\",\"proxy-event__spawn\":\"event: spawn; to: CHILDREN\",\"proxy-event__despawn\":\"event: despawn; to: CHILDREN\",\"camera\":\"active: false\",\"look-at\":\"#player\"}},[_c('a-entity',{attrs:{\"shooter\":\"activeBulletType: enemy\",\"enemy-shooter\":(\"shootingDelay: \" + (enemy.shootingDelay) + \";\\n                         shootingDistance: \" + (enemy.shootingDistance)),\"position\":\"0 0 -1\"}})],1)}),_vm._l((_vm.game.powerUps),function(powerup){return _c('a-entity',{key:powerup._id,attrs:{\"target\":\"static: false\",\"powerup\":(\"type: \" + (powerup.type) + \";\\n                 assetId: \" + (powerup.assetId) + \";\\n                 displayDuration: \" + (powerup.displayDuration) + \";\\n                 spawnProbability: \" + (powerup.spawnProbability)),\"random-spawn\":\"min: -10 -1 -10;\\n                    max: 10 2 10;\\n                    radius: 2\",\"visible\":\"false\",\"scale\":\"5 5 5\"}})}),_c('a-entity',{attrs:{\"id\":\"player\",\"sphere-collider\":\"objects: .enemies; radius: 0.5\",\"target\":\"\",\"geometry\":\"primitive: sphere; radius: 0.5\",\"position\":\"0 1.6 0\",\"proxy-event\":\"event: die; to: #gun;\"}},[_c('a-camera',{attrs:{\"active\":\"true\",\"position\":\"0 0 0\"}},[_c('a-entity',{attrs:{\"id\":\"gun\",\"position\":\"0 0 -1\",\"shooter\":\"activeBulletType: normal\",\"player\":\"ammo: 10\",\"animation-mixer\":(\"clip: \" + (_vm.game.animationClips.gunFire || '*'))}})],1)],1),_c('a-entity',{attrs:{\"sound\":\"src: #shootSound;\\n             positional: false;\\n             on: shoot;\\n             poolSize: 10\",\"proxy-event\":\"event: shoot; from: #gun\"}})],2),_c(_vm.hudComponent,{tag:\"component\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const powerUpTypes = {\n  SCORE_MULTIPLIER: 'ScoreMultiplier',\n  HEALTH: 'Health',\n  DOUBLE_BULLETS: 'DoubleBullets',\n};\n\nexport default {\n  powerUpTypes,\n};\n","/**\n * Player\n *\n * Implement the player mechanics, such as clickToShoot and damage.\n *\n * @property {number} ammo - Number of shots the player has (ammunition).\n * @property {number} hitDamage - Damage taken by each hit of enemy.\n *\n */\n\nimport AFRAME from 'aframe';\nimport store from '@/store';\nimport { powerUpTypes } from '@/helpers/enums';\n\nAFRAME.registerComponent('player', {\n  schema: {\n    ammo: { type: 'number', default: 5 },\n    hitDamage: { type: 'number', default: 10 },\n  },\n\n  init() {\n    const { el, data } = this;\n    this.ammo = data.ammo;\n\n    // Set gun model\n    el.setAttribute('gltf-model', '#gunModel');\n\n    this.shoot = this.shoot.bind(this);\n    el.sceneEl.addEventListener('mousedown', this.shoot);\n\n    this.reload = this.reload.bind(this);\n    el.sceneEl.addEventListener('reload', this.reload);\n\n    // Used die event instead of hit because collision with enemy emits the same event\n    this.die = this.die.bind(this);\n    el.addEventListener('die', this.die);\n  },\n\n  playAnimation() {\n    const { el } = this;\n    const { animationClips } = store.getters['config/game'];\n\n    if (animationClips.gunFire) {\n      el.setAttribute('animation-mixer', {\n        loop: 'once',\n        clip: animationClips.gunFire,\n      });\n    }\n  },\n\n  shoot() {\n    if (this.ammo > 0) {\n      this.ammo -= 1;\n      this.changeBullets();\n      this.el.emit('shoot');\n      this.playAnimation();\n    } else {\n      this.el.sceneEl.removeEventListener('mousedown', this.shoot);\n    }\n  },\n\n  changeBullets() {\n    const { activeBulletType } = this.el.components.shooter.data;\n    const hasDoubleBullets = store.getters['game/activePowerups'].includes(powerUpTypes.DOUBLE_BULLETS);\n\n    // If enemy has doubleBullets powerup change activeBullet of player\n    if (hasDoubleBullets && activeBulletType !== 'doubleBullets') {\n      this.el.setAttribute('shooter', 'activeBulletType', 'doubleBullets');\n    }\n\n    if (!hasDoubleBullets && activeBulletType !== 'normal') {\n      this.el.setAttribute('shooter', 'activeBulletType', 'normal');\n    }\n  },\n\n  reload() {\n    this.ammo = this.data.ammo;\n\n    this.el.sceneEl.addEventListener('mousedown', this.shoot);\n  },\n\n  die() {\n    const { data } = this;\n\n    store.dispatch('game/decrementHealth', data.hitDamage);\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener('mousedown', this.shoot);\n    this.el.sceneEl.removeEventListener('reload', this.reload);\n  },\n});\n","/**\n * Enemy Component\n *\n * Implement controlling the enemies of the game.\n * Requires randomSpawn Component.\n *\n * @property {string} assetId - Id of the a-asset-item (not a selector).\n * @property {number} playerDamage - Amount of damage it inflicts on player.\n * @property {number} score - Score amount it gives to the player if killed.\n * @property {number} spawnProbability - Probability of spawning.\n * @property {number} spawnMinScore - Minimum score value for spawning enemy.\n * @property {number} spawnMaxScore - Maximum score value for spawning enemy.\n *\n */\n\nimport AFRAME from 'aframe';\nimport store from '@/store';\nimport { powerUpTypes } from '@/helpers/enums';\n\nAFRAME.registerComponent('enemy', {\n  schema: {\n    assetId: { type: 'string' },\n    playerDamage: { type: 'number', default: 15 },\n    score: { type: 'number', default: 10 },\n    spawnProbability: { type: 'number', default: 50 },\n    spawnMinScore: { type: 'number', default: 0 },\n    spawnMaxScore: { type: 'number', default: 10 },\n  },\n\n  init() {\n    const { el, data } = this;\n\n    el.setAttribute('gltf-model', `#${data.assetId}`);\n\n    // Attach damagePlayer function to player sphere collision\n    this.damagePlayer = this.damagePlayer.bind(this);\n    el.addEventListener('stateadded', this.damagePlayer);\n\n    this.die = this.die.bind(this);\n    el.addEventListener('die', this.die);\n  },\n\n  play() {\n    // Spawn on play in order to enable animation startEvents\n    this.spawn();\n  },\n\n  die() {\n    const { el, data } = this;\n    const hasMultiplier = store.getters['game/activePowerups'].includes(powerUpTypes.SCORE_MULTIPLIER);\n    const score = hasMultiplier ? data.score * 2 : data.score;\n\n    this.reSpawn(el);\n    store.dispatch('game/incrementScore', score);\n  },\n\n  damagePlayer() {\n    const { el, data } = this;\n\n    if (el.is('collided')) {\n      this.reSpawn(el);\n      store.dispatch('game/decrementHealth', data.playerDamage);\n    }\n  },\n\n  spawn() {\n    const { el, data } = this;\n    clearInterval(this.spawnInterval);\n\n    this.spawnInterval = setInterval(() => {\n      const score = store.getters['game/score'];\n      const isPlaying = store.getters['game/isPlaying'];\n      const amount = Math.random() * 100;\n\n      if (!isPlaying || score < data.spawnMinScore || score > data.spawnMaxScore) {\n        return;\n      }\n\n      // Calculate probability of spawning enemy\n      if (amount <= data.spawnProbability) {\n        el.emit('spawn');\n        clearInterval(this.spawnInterval);\n      }\n    }, 5000);\n  },\n\n  reSpawn(el) {\n    el.setAttribute('visible', 'false');\n    el.setAttribute('position', '100 100 100');\n    el.emit('despawn');\n    this.spawn();\n  },\n\n  remove() {\n    clearInterval(this.spawnInterval);\n    this.el.removeEventListener('stateadded', this.damagePlayer);\n  },\n});\n","import AFRAME from 'aframe';\nimport store from '@/store';\n\n/**\n * Enemy Shooter Component\n *\n * Implement shooting rules for enemies.\n * Requires enemy Component.\n *\n * @property {vec3} playerPos - Vector3 playerPos default '0 1.6 0'.\n * @property {number} shootingDelay - Amount of delay in seconds for each shot.\n * @property {number} shootingDistance - Minimum distance to start shooting.\n *\n */\n\nAFRAME.registerComponent('enemy-shooter', {\n  schema: {\n    playerPos: { type: 'vec3', default: { x: 0, y: 1.6, z: 0 } },\n    shootingDelay: { type: 'number', default: 5 },\n    shootingDistance: { type: 'number', default: 5 },\n  },\n\n  init() {\n    const { el } = this;\n\n    this.onSpawn = this.onSpawn.bind(this);\n    el.addEventListener('spawn', this.onSpawn);\n\n    this.onDespawn = this.onDespawn.bind(this);\n    el.addEventListener('despawn', this.onDespawn);\n  },\n\n  onSpawn() {\n    const { el } = this;\n\n    el.addState('spawned');\n  },\n\n  onDespawn() {\n    const { el } = this;\n\n    clearInterval(this.shootInterval);\n    el.removeState('spawned');\n    el.removeState('shooting');\n  },\n\n  tick() {\n    // Calculate distance to the player and if enemy is in fire range start shooting\n    if (this.el.is('spawned')) {\n      const distance = this.el.object3D.position.distanceTo(this.data.playerPos);\n\n      if (distance < this.data.shootingDistance) this.startShooting();\n    }\n  },\n\n  startShooting() {\n    if (!this.el.is('shooting')) {\n      this.shoot();\n      this.el.addState('shooting');\n    }\n  },\n\n  shoot() {\n    const { el, data } = this;\n\n    this.shootInterval = setInterval(() => {\n      const isPlaying = store.getters['game/isPlaying'];\n\n      if (!isPlaying) return;\n\n      el.emit('shoot');\n    }, data.shootingDelay * 1000);\n  },\n\n  remove() {\n    clearInterval(this.shootInterval);\n  },\n});\n","/**\n * Enemy Spawn\n *\n * Implement random spawning of an entity.\n *\n * @property {vec3} min - Minimum Vector3 position default '0 0 0'.\n * @property {vec3} max - Maximum Vector3 position default '0 0 0'.\n * @property {vec3} playerPos - Position of the player collision sphere.\n * @property {number} radius - Exclude positions within a radius from the center '0 0 0'.\n * Best used to limit spawn positions from being too close from the player collision sphere.\n *\n */\n\nimport AFRAME from 'aframe';\n\nAFRAME.registerComponent('random-spawn', {\n  schema: {\n    min: { type: 'vec3', default: { x: 0, y: 0, z: 0 } },\n    max: { type: 'vec3', default: { x: 0, y: 0, z: 0 } },\n    playerPos: { type: 'vec3', default: { x: 0, y: 1.6, z: 0 } },\n    radius: { type: 'number', default: 1 },\n  },\n\n  init() {\n    const { el } = this;\n\n    this.spawn = this.spawn.bind(this);\n    el.addEventListener('spawn', this.spawn);\n  },\n\n  randomNumber(min, max) {\n    return Math.random() * (max - min) + min;\n  },\n\n  /**\n   * Calculate if point is inside sphere radius.\n   * @returns {boolean}\n   */\n  pointIsInSphere(point, sphereCenter, radius) {\n    return Math.sqrt(\n      ((point.x - sphereCenter.x) ** 2)\n      + ((point.y - sphereCenter.y) ** 2)\n      + ((point.z - sphereCenter.z) ** 2),\n    ) <= radius;\n  },\n\n  spawn() {\n    const { el, data } = this;\n    const x = this.randomNumber(data.min.x, data.max.x);\n    const y = this.randomNumber(data.min.y, data.max.y);\n    const z = this.randomNumber(data.min.z, data.max.z);\n    const isInRadius = this.pointIsInSphere({ x, y, z }, data.playerPos, data.radius);\n\n    if (isInRadius) {\n      this.spawn();\n    } else {\n      el.setAttribute('position', `${x} ${y} ${z}`);\n      el.setAttribute('visible', 'true');\n    }\n  },\n\n  remove() {\n    this.el.removeEventListener('spawn', this.spawn);\n  },\n});\n","/**\n * Powerup Component\n *\n * Implement controlling powerups of the game.\n * Requires randomSpawn Component.\n *\n * @property {string} type - Powerup type, same as configured in the backend.\n * @property {string} assetId - Id of the a-asset-item (not a selector).\n * @property {number} displayDuration - Duration in seconds the powerup is shown to the player.\n * @property {number} spawnProbability - Probability of spawning.\n *\n */\n\nimport AFRAME from 'aframe';\nimport store from '@/store';\nimport { powerUpTypes } from '@/helpers/enums';\n\nAFRAME.registerComponent('powerup', {\n  schema: {\n    type: { type: 'string' },\n    assetId: { type: 'string' },\n    displayDuration: { type: 'number', default: 10 },\n    spawnProbability: { type: 'number', default: 25 },\n  },\n\n  init() {\n    const { el, data } = this;\n\n    el.setAttribute('gltf-model', `#${data.assetId}`);\n\n    // Collect powerup on player shooting it\n    this.collect = this.collect.bind(this);\n    el.addEventListener('die', this.collect);\n\n    this.spawn();\n  },\n\n  spawn() {\n    const { el, data } = this;\n    clearInterval(this.spawnInterval);\n\n    this.spawnInterval = setInterval(() => {\n      const score = store.getters['game/score'];\n      const isPlaying = store.getters['game/isPlaying'];\n      const amount = Math.random() * 100;\n\n      if (!isPlaying) return;\n\n      if (score >= 300 && data.type === powerUpTypes.HEALTH) {\n        data.spawnProbability *= 2;\n      }\n\n      // Calculate probability of spawning powerup\n      if (amount <= data.spawnProbability) {\n        el.emit('spawn');\n        this.display();\n        clearInterval(this.spawnInterval);\n      }\n    }, 5000);\n  },\n\n  display() {\n    const { el, data } = this;\n\n    this.displayTimeout = setTimeout(() => {\n      this.reSpawn(el);\n    }, data.displayDuration * 1000);\n  },\n\n  reSpawn(el) {\n    el.setAttribute('visible', 'false');\n    el.setAttribute('position', '100 100 100');\n    this.spawn();\n  },\n\n  collect() {\n    const { el, data } = this;\n\n    if (data.type === powerUpTypes.HEALTH) {\n      store.dispatch('game/incrementHealth', 20);\n    } else {\n      store.dispatch('game/addPowerup', data.type);\n      this.activate();\n    }\n\n    this.reSpawn(el);\n  },\n\n  activate() {\n    const { data } = this;\n\n    this.activeTimeout = setTimeout(() => {\n      store.dispatch('game/removePowerup', data.type);\n    }, 5000);\n  },\n\n  remove() {\n    clearInterval(this.spawnInterval);\n    clearTimeout(this.displayTimeout);\n    clearTimeout(this.activeTimeout);\n  },\n});\n","/**\n * Bullet template component\n * Extracted from https://github.com/supermedium/aframe-super-shooter-kit/blob/master/index.js\n *\n * @property {float} damagePoints - Damage points inflicted on target.\n * @property {float} maxTime - Maximum time the bullet is alive.\n * @property {string} name - Bullet name.\n * @property {integer} poolSize - Size of the pool of bullets.\n * @property {float} speed - Speed of the bullet.\n */\nimport AFRAME from 'aframe';\n\nAFRAME.registerComponent('bullet', {\n  dependencies: ['material'],\n\n  schema: {\n    damagePoints: { default: 1.0, type: 'float' },\n    maxTime: { default: 4.0, type: 'float' }, // seconds.\n    name: { default: 'normal', type: 'string' },\n    poolSize: { default: 10, type: 'int', min: 0 },\n    speed: { default: 8.0, type: 'float' }, // meters / sec.\n  },\n\n  init() {\n    const { el } = this;\n    el.object3D.visible = false;\n    el.addEventListener('object3dset', () => {\n      el.sceneEl.systems.bullet.registerBullet(this);\n    });\n  },\n});\n","/**\n * Shooter. Entity that spawns bullets and handles bullet types.\n * Extracted from https://github.com/supermedium/aframe-super-shooter-kit/blob/master/index.js\n *\n * @property {string} activeBulletType - Active bullet type 'name' to be used.\n * @property {array} bulletTypes - Array of bullet types ['name', 'name'] is available for cycling.\n * @property {boolean} cycle - Boolean if cycling bullets is available.\n */\nimport AFRAME from 'aframe';\n\nAFRAME.registerComponent('shooter', {\n  schema: {\n    activeBulletType: { type: 'string', default: 'normal' },\n    bulletTypes: { type: 'array', default: ['normal'] },\n    cycle: { default: false },\n  },\n\n  init() {\n    this.el.addEventListener('shoot', this.onShoot.bind(this));\n    this.el.addEventListener('changebullet', this.onChangeBullet.bind(this));\n    this.bulletSystem = this.el.sceneEl.systems.bullet;\n  },\n\n  /**\n   * Listent to `shoot` action / event to tell bullet system to fire a bullet.\n   */\n  onShoot() {\n    this.bulletSystem.shoot(this.data.activeBulletType, this.el.object3D);\n  },\n\n  /**\n   * Listen to `changebullet` action / event telling the shooter to change bullet type.\n   */\n  onChangeBullet(evt) {\n    const { data } = this;\n    const { el } = this;\n    let idx;\n\n    // Cycle to next bullet type.\n    if (evt.detail === 'next') {\n      idx = data.bulletTypes.indexOf(data.activeBulletType);\n      if (idx === -1) { return; }\n      idx = data.cycle\n        ? (idx + 1) % data.bulletTypes.length\n        : Math.min(data.bulletTypes.length - 1, idx + 1);\n      data.activeBulletType = data.bulletTypes[idx];\n      el.setAttribute('shooter', 'activeBulletType', data.bulletTypes[idx]);\n      return;\n    }\n\n    // Cycle to previous bullet type.\n    if (evt.detail === 'prev') {\n      idx = data.bulletTypes.indexOf(data.activeBulletType);\n      if (idx === -1) { return; }\n      idx = data.cycle\n        ? (idx - 1) % data.bulletTypes.length\n        : Math.max(0, idx - 1);\n      data.activeBulletType = data.bulletTypes[idx];\n      el.setAttribute('shooter', 'activeBulletType', data.bulletTypes[idx]);\n      return;\n    }\n\n    // Direct set bullet type.\n    el.setAttribute('shooter', 'activeBulletType', evt.detail);\n  },\n});\n","/**\n * Target component\n * Extracted from https://github.com/supermedium/aframe-super-shooter-kit/blob/master/index.js\n *\n * @property {boolean} active - Boolean if the target is active/inactive.\n * @property {float} healthPoints - Amount of health points the target has.\n * @property {boolean} static - If target is static bounding box is calculated once.\n * @property {array} ignoreBullets - Bullets to ignore collision with target.\n */\n\nimport AFRAME from 'aframe';\n\nAFRAME.registerComponent('target', {\n  schema: {\n    active: { default: true },\n    healthPoints: { default: 1, type: 'float' },\n    static: { default: true },\n    ignoreBullets: { type: 'array' },\n  },\n\n  init() {\n    const { el } = this;\n    el.addEventListener('object3dset', () => {\n      el.sceneEl.systems.bullet.registerTarget(this, this.data.static);\n    });\n  },\n\n  update() {\n    // `this.healthPoints` is current hit points with taken damage.\n    // `this.data.healthPoints` is total hit points.\n    this.healthPoints = this.data.healthPoints;\n  },\n\n  /**\n   * Take damage.\n   */\n  onBulletHit(bullet) {\n    const ignoreHit = this.data.ignoreBullets.some((item) => item === bullet.type);\n\n    if (!this.data.active) { return; }\n    if (ignoreHit) { return; }\n\n    this.lastBulletHit = bullet;\n    this.healthPoints -= bullet.damagePoints;\n    if (this.healthPoints <= 0) { this.el.emit('die'); }\n  },\n});\n","/**\n * Bullet system for collision detection.\n * Extracted from https://github.com/supermedium/aframe-super-shooter-kit/blob/master/index.js\n */\n\n/* eslint-disable no-continue */\n/* eslint-disable func-names */\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-plusplus */\nimport AFRAME from 'aframe';\n\nAFRAME.registerSystem('bullet', {\n  init() {\n    const bulletContainer = document.createElement('a-entity');\n    bulletContainer.id = 'superShooterBulletContainer';\n    this.el.sceneEl.appendChild(bulletContainer);\n\n    this.container = bulletContainer.object3D;\n    this.pool = {};\n    this.targets = [];\n  },\n\n  /**\n   * Register and initialize bullet type.\n   */\n  registerBullet(bulletComponent) {\n    let bullet;\n    let i;\n\n    const model = bulletComponent.el.object3D;\n    if (!model) { return; }\n    const bulletData = bulletComponent.data;\n\n    // Initialize pool and bullets.\n    this.pool[bulletData.name] = [];\n    for (i = 0; i < bulletData.poolSize; i++) {\n      bullet = model.clone();\n      bullet.damagePoints = bulletData.damagePoints;\n      bullet.direction = new AFRAME.THREE.Vector3(0, 0, -1);\n      bullet.maxTime = bulletData.maxTime * 1000;\n      bullet.name = bulletData.name + i;\n      bullet.type = bulletData.name;\n      bullet.speed = bulletData.speed;\n      bullet.time = 0;\n      bullet.visible = false;\n      this.pool[bulletData.name].push(bullet);\n    }\n  },\n\n  /**\n   * Register single target.\n   */\n  registerTarget(targetComponent, isStatic) {\n    this.targets.push(targetComponent.el);\n    if (!isStatic) { return; }\n\n    // Precalculate bounding box of bullet.\n    const targetObj = targetComponent.el.object3D;\n    targetObj.boundingBox = new AFRAME.THREE.Box3().setFromObject(targetObj);\n  },\n\n  shoot(bulletName, gun) {\n    let i;\n    let oldest = 0;\n    let oldestTime = 0;\n    const pool = this.pool[bulletName];\n\n    if (pool === undefined) { return null; }\n\n    // Find available bullet and initialize it.\n    for (i = 0; i < pool.length; i++) {\n      if (pool[i].visible === false) {\n        return this.shootBullet(pool[i], gun);\n      } if (pool[i].time > oldestTime) {\n        oldest = i;\n        oldestTime = pool[i].time;\n      }\n    }\n\n    // All bullets are active, pool is full, grab oldest bullet.\n    return this.shootBullet(pool[oldest], gun);\n  },\n\n  shootBullet(bullet, gun) {\n    bullet.visible = true;\n    bullet.time = 0;\n    gun.getWorldPosition(bullet.position);\n    gun.getWorldDirection(bullet.direction);\n    bullet.direction.multiplyScalar(-bullet.speed);\n    this.container.add(bullet);\n    return bullet;\n  },\n\n  tick: (function () {\n    const bulletBox = new AFRAME.THREE.Box3();\n    const bulletTranslation = new AFRAME.THREE.Vector3();\n    const targetBox = new AFRAME.THREE.Box3();\n\n    return function (time, delta) {\n      let bullet;\n      let i;\n      let isHit;\n      let targetObj;\n      let t;\n\n      for (i = 0; i < this.container.children.length; i++) {\n        bullet = this.container.children[i];\n        if (!bullet.visible) { continue; }\n        bullet.time += delta;\n        if (bullet.time >= bullet.maxTime) {\n          this.killBullet(bullet);\n          continue;\n        }\n        bulletTranslation.copy(bullet.direction).multiplyScalar(delta / 850);\n        bullet.position.add(bulletTranslation);\n\n        // Check collisions.\n        bulletBox.setFromObject(bullet);\n        for (t = 0; t < this.targets.length; t++) {\n          const target = this.targets[t];\n          if (!target.getAttribute('target').active) { continue; }\n          targetObj = target.object3D;\n          if (!targetObj.visible) { continue; }\n          isHit = false;\n          if (targetObj.boundingBox) {\n            isHit = targetObj.boundingBox.intersectsBox(bulletBox);\n          } else {\n            targetBox.setFromObject(targetObj);\n            isHit = targetBox.intersectsBox(bulletBox);\n          }\n          if (isHit) {\n            this.killBullet(bullet);\n            target.components.target.onBulletHit(bullet);\n            target.emit('hit', null);\n            break;\n          }\n        }\n      }\n    };\n  }()),\n\n  killBullet(bullet) {\n    bullet.visible = false;\n  },\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hud\"},[_c('health',{staticClass:\"hud__health\"}),_c('timer',{staticClass:\"hud__timer\"}),_c('score',{staticClass:\"hud__score\"}),_c('cross-hair-icon',{staticClass:\"hud__crosshair\"}),_c('v-alert',{staticClass:\"hud__alert\",attrs:{\"duration\":5000}},[_c('p',[_vm._v(\"Move your phone to look around.\")]),_c('p',[_vm._v(\"Tap anywhere to shoot.\")])]),_c('v-button',{staticClass:\"hud__reload\",attrs:{\"fab\":\"\"},on:{\"click\":_vm.reload}},[_c('reload-icon')],1),_c('toggle-fullscreen',{staticClass:\"hud__fullscreen\"}),(!_vm.isPlaying)?_c('paused-modal'):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"height\":\"36\",\"viewBox\":\"0 0 24 24\",\"width\":\"36\"}},[_c('path',{attrs:{\"d\":\"M0 0h24v24H0z\",\"fill\":\"none\"}}),_c('path',{attrs:{\"d\":\"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"36\" viewBox=\"0 0 24 24\" width=\"36\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z\"/></svg>\n</template>\n\n<script>\nexport default {\n  name: 'Reload',\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Reload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Reload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Reload.vue?vue&type=template&id=ecacb646&\"\nimport script from \"./Reload.vue?vue&type=script&lang=js&\"\nexport * from \"./Reload.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{attrs:{\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"viewBox\":\"0 0 512 512\",\"width\":\"48\",\"height\":\"48\",\"xml:space\":\"preserve\",\"fill\":\"#a4a4a4\"}},[_c('path',{attrs:{\"d\":\"M256,0c-48.551,0-95.818,13.675-136.693,39.545\\n           l16.044,25.35C171.419,42.066,213.139,30,256,30\\n           c42.861,0,84.581,12.066,120.648,34.895l16.044-25.35C351.818,13.675,304.551,0,256,0z\"}}),_c('path',{attrs:{\"d\":\"M376.649,447.105C340.581,469.934,298.861,482,256,482\\n           c-42.861,0-84.581-12.066-120.648-34.895l-16.044,25.35\\n           C160.182,498.325,207.449,512,256,512c48.551,0,95.818-13.675,136.693-39.545\\n           L376.649,447.105z\"}}),_c('path',{attrs:{\"d\":\"M472.455,119.307l-25.35,16.044C469.934,171.419,482,213.139,482,256\\n           c0,42.861-12.066,84.581-34.895,120.648l25.35,16.044\\n           C498.325,351.818,512,304.551,512,256\\n           C512,207.449,498.325,160.182,472.455,119.307z\"}}),_c('path',{attrs:{\"d\":\"M64.895,135.352l-25.35-16.045C13.675,160.182,0,207.449,0,256\\n           c0,48.551,13.675,95.818,39.545,136.693l25.35-16.044\\n           C42.066,340.581,30,298.861,30,256\\n           C30,213.139,42.066,171.419,64.895,135.352z\"}}),_c('path',{attrs:{\"d\":\"M256,204c-28.673,0-52,23.327-52,52c0,28.673,23.327,52,52,52\\n           c28.673,0,52-23.327,52-52C308,227.327,284.673,204,256,204z\\n           M256,278c-12.131,0-22-9.869-22-22s9.869-22,22-22\\n           c12.131,0,22,9.869,22,22S268.131,278,256,278z\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <svg\n    version=\"1.1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n    viewBox=\"0 0 512 512\"\n    width=\"48\"\n    height=\"48\"\n    xml:space=\"preserve\"\n    fill=\"#a4a4a4\">\n\n    <path d=\"M256,0c-48.551,0-95.818,13.675-136.693,39.545\n             l16.044,25.35C171.419,42.066,213.139,30,256,30\n             c42.861,0,84.581,12.066,120.648,34.895l16.044-25.35C351.818,13.675,304.551,0,256,0z\"/>\n    <path d=\"M376.649,447.105C340.581,469.934,298.861,482,256,482\n             c-42.861,0-84.581-12.066-120.648-34.895l-16.044,25.35\n             C160.182,498.325,207.449,512,256,512c48.551,0,95.818-13.675,136.693-39.545\n             L376.649,447.105z\"/>\n    <path d=\"M472.455,119.307l-25.35,16.044C469.934,171.419,482,213.139,482,256\n             c0,42.861-12.066,84.581-34.895,120.648l25.35,16.044\n             C498.325,351.818,512,304.551,512,256\n             C512,207.449,498.325,160.182,472.455,119.307z\"/>\n    <path d=\"M64.895,135.352l-25.35-16.045C13.675,160.182,0,207.449,0,256\n             c0,48.551,13.675,95.818,39.545,136.693l25.35-16.044\n             C42.066,340.581,30,298.861,30,256\n             C30,213.139,42.066,171.419,64.895,135.352z\"/>\n    <path d=\"M256,204c-28.673,0-52,23.327-52,52c0,28.673,23.327,52,52,52\n             c28.673,0,52-23.327,52-52C308,227.327,284.673,204,256,204z\n             M256,278c-12.131,0-22-9.869-22-22s9.869-22,22-22\n             c12.131,0,22,9.869,22,22S268.131,278,256,278z\"/>\n  </svg>\n</template>\n\n<script>\nexport default {\n  name: 'CrossHair',\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CrossHair.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CrossHair.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CrossHair.vue?vue&type=template&id=a6ceaf66&\"\nimport script from \"./CrossHair.vue?vue&type=script&lang=js&\"\nexport * from \"./CrossHair.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"alert\",staticClass:\"alert\"},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"alert\" ref=\"alert\">\n    <slot></slot>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Alert',\n  props: {\n    duration: {\n      type: Number,\n      default: 3000,\n    },\n  },\n  methods: {\n    show() {\n      const { alert } = this.$refs;\n\n      alert.classList.add('alert--active');\n    },\n    hide() {\n      const { alert } = this.$refs;\n\n      alert.classList.remove('alert--active');\n    },\n  },\n  mounted() {\n    this.show();\n\n    setTimeout(() => {\n      this.hide();\n    }, this.duration);\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.alert {\n  visibility: hidden;\n  color: #a4a4a4;\n  opacity: 0;\n  transition: all .5s;\n  font-size: 1rem;\n\n  &--active {\n    visibility: initial;\n    opacity: 1;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VAlert.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VAlert.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VAlert.vue?vue&type=template&id=7e6a8a56&scoped=true&\"\nimport script from \"./VAlert.vue?vue&type=script&lang=js&\"\nexport * from \"./VAlert.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VAlert.vue?vue&type=style&index=0&id=7e6a8a56&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7e6a8a56\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"health\"},[_c('div',{staticClass:\"health__percent\"},[_c('span',{staticClass:\"health__percent__text\"},[_vm._v(_vm._s(_vm.health)+\"%\")])]),_c('div',{staticClass:\"health__bar\"},[_c('span',{staticClass:\"health__bar__progress\",style:({ transform: (\"scaleX(\" + (_vm.health / 100) + \")\") })})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"health\">\n    <div class=\"health__percent\">\n      <span class=\"health__percent__text\">{{ health }}%</span>\n    </div>\n\n    <div class=\"health__bar\">\n      <span\n        class=\"health__bar__progress\"\n        :style=\"{ transform: `scaleX(${health / 100})` }\"\n      ></span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\n\nexport default {\n  name: 'Health',\n  computed: {\n    ...mapGetters('game', [\n      'health',\n    ]),\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n$percent-background: #72716c;\n$progress-background: #d4d4d4;\n$progress-inner: #a4a4a4;\n\n.health {\n  display: flex;\n  align-items: center;\n}\n\n.health__percent {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  margin-right: -2px;\n  z-index: 1;\n  background-color: $percent-background;\n\n  &__text {\n    color: #fff;\n    font-weight: bold;\n    font-size: 0.8rem;\n  }\n}\n\n.health__bar {\n  width: 150px;\n  height: 8px;\n  line-height: 0;\n  border-radius: 15px;\n  background-color: $progress-background;\n  z-index: -1;\n}\n\n.health__bar__progress {\n  display: block;\n  position: relative;\n  background-color: $progress-inner;\n  width: 100%;\n  height: 100%;\n  transform-origin: left;\n  transform: scaleX(0);\n  box-sizing: border-box;\n  transition: transform 100ms linear;\n  overflow: hidden;\n  border-radius: 15px;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Health.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Health.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Health.vue?vue&type=template&id=009e1f4e&scoped=true&\"\nimport script from \"./Health.vue?vue&type=script&lang=js&\"\nexport * from \"./Health.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Health.vue?vue&type=style&index=0&id=009e1f4e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"009e1f4e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"timer\"},[_c('span',{staticClass:\"timer__text\"},[_vm._v(_vm._s(_vm.parsedTime))]),_c('button',{staticClass:\"timer__pause\",on:{\"click\":_vm.pause}},[_c('pause-icon')],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\",\"width\":\"24\"}},[_c('path',{attrs:{\"d\":\"M0 0h24v24H0z\",\"fill\":\"none\"}}),_c('path',{attrs:{\"d\":\"M6 19h4V5H6v14zm8-14v14h4V5h-4z\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M6 19h4V5H6v14zm8-14v14h4V5h-4z\"/></svg>\n</template>\n\n<script>\nexport default {\n  name: 'Pause',\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pause.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pause.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Pause.vue?vue&type=template&id=313bb6af&\"\nimport script from \"./Pause.vue?vue&type=script&lang=js&\"\nexport * from \"./Pause.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"timer\">\n    <span class=\"timer__text\">{{parsedTime}}</span>\n    <button class=\"timer__pause\" @click=\"pause\">\n      <pause-icon/>\n    </button>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex';\nimport PauseIcon from '@/components/common/icons/Pause.vue';\n\nexport default {\n  name: 'Timer',\n  components: {\n    PauseIcon,\n  },\n  data() {\n    return {\n      time: 0,\n    };\n  },\n  computed: {\n    ...mapGetters('game', {\n      storeTime: 'time',\n      isPlaying: 'isPlaying',\n    }),\n    parsedTime() {\n      const minutes = Math.floor(this.time / 60);\n      const seconds = this.time - minutes * 60;\n\n      return `${this.pad(minutes)}:${this.pad(seconds)}`;\n    },\n  },\n  methods: {\n    ...mapActions('game', [\n      'setTime',\n      'pause',\n      'finishGame',\n    ]),\n    startTimer() {\n      this.interval = setInterval(() => {\n        if (this.isPlaying) {\n          if (this.time > 0) {\n            this.time -= 1;\n          } else {\n            this.setTime(this.time);\n            this.finishGame();\n            clearInterval(this.interval);\n          }\n        }\n      }, 1000);\n    },\n    pad(number) {\n      return number.toString().padStart(2, '0');\n    },\n  },\n  mounted() {\n    this.time = this.storeTime;\n    this.startTimer();\n  },\n  removed() {\n    clearInterval(this.interval);\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n$background-color: #fff;\n$border-color: #a4a4a4;\n\n.timer__text {\n  padding: 5px 25px;\n  border: 2px solid $border-color;\n  border-radius: 15px;\n  background-color: $background-color;\n  text-align: center;\n  font-weight: bold;\n  display: block;\n  text-align: center;\n}\n\n.timer__pause {\n  cursor: pointer;\n  position: absolute;\n  top: 15px;\n  left: 50%;\n  width: 70px;\n  height: 60px;\n  border: 2px solid $border-color;\n  border-radius: 50%;\n  transform: translateX(-50%);\n  z-index: -1;\n  -webkit-tap-highlight-color: transparent;\n\n  svg {\n    position: relative;\n    top: 15px;\n  }\n\n  &:hover {\n    background-color: darken($color: $background-color, $amount: 10);\n  }\n\n  &:active {\n    box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),\n                0 8px 10px 1px rgba(0, 0, 0, 0.14),\n                0 3px 14px 2px rgba(0, 0, 0, 0.12);\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Timer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Timer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Timer.vue?vue&type=template&id=51649b1d&scoped=true&\"\nimport script from \"./Timer.vue?vue&type=script&lang=js&\"\nexport * from \"./Timer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Timer.vue?vue&type=style&index=0&id=51649b1d&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"51649b1d\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"score\"},[_c('p',{staticClass:\"score__title\"},[_vm._v(\"Score\")]),_c('p',{staticClass:\"score__content\"},[_vm._v(_vm._s(_vm.score))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"score\">\n    <p class=\"score__title\">Score</p>\n    <p class=\"score__content\">{{ score }}</p>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\n\nexport default {\n  name: 'Score',\n  computed: {\n    ...mapGetters('game', [\n      'score',\n    ]),\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n$background-color: #fff;\n$border-color: #a4a4a4;\n\n.score {\n  padding: 5px 20px;\n  border: 2px solid $border-color;\n  border-radius: 15px;\n  background-color: $background-color;\n  text-align: center;\n\n  &__title {\n    margin-bottom: 1px;\n    font-size: 1rem;\n  }\n\n  &__content {\n    font-weight: bold;\n    font-size: 1.2rem;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Score.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Score.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Score.vue?vue&type=template&id=3303d8f8&scoped=true&\"\nimport script from \"./Score.vue?vue&type=script&lang=js&\"\nexport * from \"./Score.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Score.vue?vue&type=style&index=0&id=3303d8f8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3303d8f8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"fullscreenButton\",on:{\"click\":_vm.toggleFullScreen}},[(_vm.isFullScreen)?_c('v-button',{attrs:{\"fab\":\"\"}},[_c('fullscreen-icon')],1):_c('v-button',{attrs:{\"fab\":\"\"}},[_c('fullscreen-exit-icon')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"height\":\"36\",\"viewBox\":\"0 0 24 24\",\"width\":\"36\"}},[_c('path',{attrs:{\"d\":\"M0 0h24v24H0z\",\"fill\":\"none\"}}),_c('path',{attrs:{\"d\":\"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"36\" viewBox=\"0 0 24 24\" width=\"36\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z\"/></svg>\n</template>\n\n<script>\nexport default {\n  name: 'Fullscreen',\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Fullscreen.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Fullscreen.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Fullscreen.vue?vue&type=template&id=b2757cfa&\"\nimport script from \"./Fullscreen.vue?vue&type=script&lang=js&\"\nexport * from \"./Fullscreen.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"height\":\"36\",\"viewBox\":\"0 0 24 24\",\"width\":\"36\"}},[_c('path',{attrs:{\"d\":\"M0 0h24v24H0z\",\"fill\":\"none\"}}),_c('path',{attrs:{\"d\":\"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"36\" viewBox=\"0 0 24 24\" width=\"36\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"/></svg>\n</template>\n\n<script>\nexport default {\n  name: 'FullscreenExit',\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FullscreenExit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FullscreenExit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FullscreenExit.vue?vue&type=template&id=7f3f930c&\"\nimport script from \"./FullscreenExit.vue?vue&type=script&lang=js&\"\nexport * from \"./FullscreenExit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"fullscreenButton\" @click=\"toggleFullScreen\">\n    <v-button v-if=\"isFullScreen\" fab>\n      <fullscreen-icon/>\n    </v-button>\n    <v-button v-else fab>\n      <fullscreen-exit-icon/>\n    </v-button>\n  </div>\n</template>\n\n<script>\nimport FullscreenIcon from '@/components/common/icons/Fullscreen.vue';\nimport FullscreenExitIcon from '@/components/common/icons/FullscreenExit.vue';\nimport VButton from '@/components/common/VButton.vue';\n\nexport default {\n  name: 'ToggleFullscreen',\n  components: {\n    FullscreenIcon,\n    FullscreenExitIcon,\n    VButton,\n  },\n  data() {\n    return {\n      isFullScreen: false,\n    };\n  },\n  methods: {\n    toggleFullScreen() {\n      if (!document.fullscreenElement) {\n        document.documentElement.requestFullscreen();\n        this.isFullScreen = true;\n      } else {\n        document.exitFullscreen();\n        this.isFullScreen = false;\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToggleFullscreen.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToggleFullscreen.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ToggleFullscreen.vue?vue&type=template&id=f4c31222&\"\nimport script from \"./ToggleFullscreen.vue?vue&type=script&lang=js&\"\nexport * from \"./ToggleFullscreen.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-modal',{staticClass:\"pausedModal\"},[_c('span',{staticClass:\"pausedModal__icon\"},[_c('pause-icon')],1),_c('div',{staticClass:\"pausedModal__title\"},[_vm._v(\"Game Paused!\")]),_c('div',{staticClass:\"pausedModal__actions\"},[_c('v-button',{attrs:{\"to\":\"/\"}},[_vm._v(\"Leave Game\")]),_c('v-button',{on:{\"click\":_vm.play}},[_vm._v(\"Continue\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-modal class=\"pausedModal\">\n    <span class=\"pausedModal__icon\">\n      <pause-icon/>\n    </span>\n\n    <div class=\"pausedModal__title\">Game Paused!</div>\n\n    <div class=\"pausedModal__actions\">\n      <v-button to=\"/\">Leave Game</v-button>\n      <v-button @click=\"play\">Continue</v-button>\n    </div>\n  </v-modal>\n</template>\n\n<script>\nimport PauseIcon from '@/components/common/icons/Pause.vue';\nimport VModal from '@/components/common/VModal.vue';\nimport VButton from '@/components/common/VButton.vue';\nimport { mapActions } from 'vuex';\n\nexport default {\n  name: 'PausedModal',\n  components: {\n    PauseIcon,\n    VModal,\n    VButton,\n  },\n  methods: {\n    ...mapActions('game', [\n      'play',\n    ]),\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.pausedModal__icon {\n  padding: 5px 20px 0 20px;\n  position: absolute;\n  top: 0;\n  left: 50%;\n  background-color: #a4a4a4;\n  border-bottom-left-radius: 15px;\n  border-bottom-right-radius: 15px;\n  transform: translateX(-50%);\n}\n\n.pausedModal__title {\n  margin: 20px 0;\n}\n\n.pausedModal__actions {\n  display: flex;\n  justify-content: center;\n\n  .button {\n    margin: 0 5px;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PausedModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PausedModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PausedModal.vue?vue&type=template&id=c3b05f9c&scoped=true&\"\nimport script from \"./PausedModal.vue?vue&type=script&lang=js&\"\nexport * from \"./PausedModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PausedModal.vue?vue&type=style&index=0&id=c3b05f9c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c3b05f9c\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"hud\">\n    <health class=\"hud__health\"/>\n\n    <timer class=\"hud__timer\"/>\n\n    <score class=\"hud__score\"/>\n\n    <cross-hair-icon class=\"hud__crosshair\"/>\n\n    <v-alert class=\"hud__alert\" :duration=\"5000\">\n      <p>Move your phone to look around.</p>\n      <p>Tap anywhere to shoot.</p>\n    </v-alert>\n\n    <v-button class=\"hud__reload\" fab @click=\"reload\">\n      <reload-icon/>\n    </v-button>\n\n    <toggle-fullscreen class=\"hud__fullscreen\"/>\n\n    <paused-modal v-if=\"!isPlaying\"/>\n  </div>\n</template>\n\n<script>\nimport AFRAME from 'aframe';\nimport { mapGetters } from 'vuex';\n\nimport ReloadIcon from '@/components/common/icons/Reload.vue';\nimport CrossHairIcon from '@/components/common/icons/CrossHair.vue';\nimport VButton from '@/components/common/VButton.vue';\nimport VAlert from '@/components/common/VAlert.vue';\nimport Health from './components/Health.vue';\nimport Timer from './components/Timer.vue';\nimport Score from './components/Score.vue';\nimport ToggleFullscreen from './components/ToggleFullscreen.vue';\nimport PausedModal from './components/PausedModal.vue';\n\nexport default {\n  name: 'Hud',\n  components: {\n    ReloadIcon,\n    CrossHairIcon,\n    VButton,\n    VAlert,\n    Health,\n    Timer,\n    Score,\n    ToggleFullscreen,\n    PausedModal,\n  },\n  computed: {\n    ...mapGetters('game', [\n      'isPlaying',\n    ]),\n  },\n  methods: {\n    reload() {\n      AFRAME.scenes[0].emit('reload');\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.hud__health {\n  position: fixed;\n  top: 20px;\n  left: 20px;\n}\n\n.hud__timer {\n  position: fixed;\n  top: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n}\n\n.hud__score {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n}\n\n.hud__crosshair {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.hud__alert {\n  position: fixed;\n  top: 60%;\n  left: 60%;\n}\n\n.hud__reload {\n  position: fixed;\n  bottom: 20px;\n  left: 20px;\n}\n\n.hud__fullscreen {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Hud.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Hud.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Hud.vue?vue&type=template&id=ab0a5882&scoped=true&\"\nimport script from \"./Hud.vue?vue&type=script&lang=js&\"\nexport * from \"./Hud.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Hud.vue?vue&type=style&index=0&id=ab0a5882&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ab0a5882\",\n  null\n  \n)\n\nexport default component.exports","const constraints = {\n  video: {\n    width: {\n      min: 1280,\n      ideal: 1920,\n      max: 2560,\n    },\n    height: {\n      min: 720,\n      ideal: 1080,\n      max: 1440,\n    },\n    facingMode: 'environment',\n  },\n};\n\nconst resizeVideo = () => {\n  const videoEl = document.getElementById('camera-stream');\n  videoEl.style.width = `${window.innerWidth}px`;\n};\n\nconst createVideoElement = () => {\n  const videoEl = document.createElement('video');\n  videoEl.id = 'camera-stream';\n\n  videoEl.setAttribute('autoplay', '');\n  videoEl.setAttribute('muted', '');\n  videoEl.setAttribute('playsinline', '');\n\n  videoEl.style.position = 'absolute';\n  videoEl.style.height = 'auto';\n  videoEl.style.top = '0';\n  videoEl.style.left = '0';\n  videoEl.style['z-index'] = '-2';\n\n  document.body.append(videoEl);\n  resizeVideo();\n  window.addEventListener('resize', resizeVideo);\n\n  return videoEl;\n};\n\nconst startStream = async () => {\n  const stream = await navigator.mediaDevices.getUserMedia(constraints);\n  const videoEl = createVideoElement();\n\n  videoEl.srcObject = stream;\n};\n\nconst stopStream = async () => {\n  const videoEl = document.getElementById('camera-stream');\n  const stream = videoEl.srcObject;\n  const track = stream.getTracks()[0];\n\n  track.stop();\n  videoEl.remove();\n};\n\nconst init = () => {\n  if ('mediaDevices' in navigator && navigator.mediaDevices.getUserMedia) {\n    startStream();\n  }\n};\n\nexport default {\n  init,\n  stopStream,\n};\n","<template>\n  <div class=\"game\">\n    <a-scene\n      vr-mode-ui=\"enabled: false\"\n    >\n      <a-assets ref=\"assets\">\n      </a-assets>\n\n      <!-- Soundtrack -->\n      <a-entity sound=\"src: #soundtrack;\n                       positional: false;\n                       autoplay: true;\n                       loop: true\">\n      </a-entity>\n\n      <!-- Player Bullets -->\n      <a-entity\n        bullet=\"name: normal; speed: 30.0; poolSize: 20\"\n        geometry=\"primitive: icosahedron; radius: 0.1;\"\n        material=\"color: #000; emissiveIntensity: 0.5; emissive: #000\">\n      </a-entity>\n\n      <a-entity\n        bullet=\"name: doubleBullets; speed: 30.0; poolSize: 20; damagePoints: 2.0\"\n        geometry=\"primitive: icosahedron; radius: 0.1;\"\n        material=\"color: #000; emissiveIntensity: 0.5; emissive: #000\">\n      </a-entity>\n\n      <!-- Enemy Bullet -->\n      <a-entity\n        bullet=\"name: enemy; speed: 10.0; poolSize: 20\"\n        geometry=\"primitive: icosahedron; radius: 0.1;\"\n        material=\"color: #ff0000; emissiveIntensity: 0.5; emissive: #ff0000\">\n      </a-entity>\n\n      <!-- Enemies -->\n      <a-entity\n        v-for=\"enemy in game.enemies\"\n        :key=\"enemy._id\"\n        class=\"enemies\"\n        :animation-mixer=\"`clip: ${game.animationClips.enemyIdle || '*'}`\"\n        :target=\"`static: false;\n                  ignoreBullets: enemy;\n                  healthPoints: ${enemy.shotsToDie}`\"\n        :enemy=\"`assetId: ${enemy.assetId};\n                 playerDamage: ${enemy.playerDamage};\n                 score: ${enemy.score};\n                 spawnProbability: ${enemy.spawn.probability};\n                 spawnMinScore: ${enemy.spawn.minScore};\n                 spawnMaxScore: ${enemy.spawn.maxScore}`\"\n        random-spawn=\"min: -10 -1 -10;\n                      max: 10 2 10;\n                      radius: 2\"\n        visible=\"false\"\n        animation=\"property: position;\n                  to: 0 1.6 0;\n                  dur: 20000;\n                  easing: easeInOutCubic;\n                  startEvents: spawn;\n                  pauseEvents: despawn\"\n        proxy-event__spawn=\"event: spawn; to: CHILDREN\"\n        proxy-event__despawn=\"event: despawn; to: CHILDREN\"\n        camera=\"active: false\"\n        look-at=\"#player\"\n      >\n        <a-entity\n          shooter=\"activeBulletType: enemy\"\n          :enemy-shooter=\"`shootingDelay: ${enemy.shootingDelay};\n                           shootingDistance: ${enemy.shootingDistance}`\"\n          position=\"0 0 -1\"\n        >\n        </a-entity>\n      </a-entity>\n\n      <!-- Powerups -->\n      <a-entity\n        v-for=\"powerup in game.powerUps\"\n        :key=\"powerup._id\"\n        target=\"static: false\"\n        :powerup=\"`type: ${powerup.type};\n                   assetId: ${powerup.assetId};\n                   displayDuration: ${powerup.displayDuration};\n                   spawnProbability: ${powerup.spawnProbability}`\"\n        random-spawn=\"min: -10 -1 -10;\n                      max: 10 2 10;\n                      radius: 2\"\n        visible=\"false\"\n        scale=\"5 5 5\"\n      ></a-entity>\n\n      <!-- Player -->\n      <a-entity\n        id=\"player\"\n        sphere-collider=\"objects: .enemies; radius: 0.5\"\n        target\n        geometry=\"primitive: sphere; radius: 0.5\"\n        position=\"0 1.6 0\"\n        proxy-event=\"event: die; to: #gun;\"\n      >\n        <a-camera\n          active=\"true\"\n          position=\"0 0 0\"\n        >\n          <a-entity\n            id=\"gun\"\n            position=\"0 0 -1\"\n            shooter=\"activeBulletType: normal\"\n            player=\"ammo: 10\"\n            :animation-mixer=\"`clip: ${game.animationClips.gunFire || '*'}`\"\n          >\n          </a-entity>\n        </a-camera>\n      </a-entity>\n\n      <a-entity\n        sound=\"src: #shootSound;\n               positional: false;\n               on: shoot;\n               poolSize: 10\"\n        proxy-event=\"event: shoot; from: #gun\"\n      >\n      </a-entity>\n    </a-scene>\n\n    <component :is=\"hudComponent\"></component>\n  </div>\n</template>\n\n<script>\n// Aframe packages\nimport 'aframe';\nimport 'aframe-extras';\nimport 'aframe-proxy-event-component';\nimport 'aframe-look-at-component';\n\n// Aframe Components\nimport './components/player';\nimport './components/enemy';\nimport './components/enemyShooter';\nimport './components/randomSpawn';\nimport './components/powerup';\n\n// Super-shooter-kit\nimport './components/bullet';\nimport './components/shooter';\nimport './components/target';\nimport './systems/bullet';\n\n// Vue\nimport Hud from '@/components/Hud/Hud.vue';\nimport { mapGetters, mapActions } from 'vuex';\n\n// Utils\nimport camera from './utils/camera';\n\nexport default {\n  name: 'Game',\n  components: {\n    Hud,\n  },\n  computed: {\n    ...mapGetters('config', [\n      'game',\n    ]),\n  },\n  data() {\n    return {\n      hudComponent: undefined,\n    };\n  },\n  methods: {\n    ...mapActions('game', [\n      'setIsPlaying',\n      'setTime',\n      'setHealth',\n    ]),\n    getAssetEl(asset) {\n      if (asset.type === 'Model') {\n        const modelEl = document.createElement('a-asset-item');\n\n        modelEl.id = asset.id;\n        modelEl.setAttribute('src', asset.src);\n\n        return modelEl;\n      }\n\n      if (asset.type === 'Sound') {\n        const soundEl = document.createElement('audio');\n\n        soundEl.id = asset.id;\n        soundEl.setAttribute('src', asset.src);\n        soundEl.setAttribute('preload', 'auto');\n\n        return soundEl;\n      }\n\n      return false;\n    },\n    setAssets() {\n      const { assets } = this.$refs;\n\n      this.game.assets.forEach((asset) => {\n        const assetEl = this.getAssetEl(asset);\n\n        if (assetEl) {\n          assets.appendChild(assetEl);\n        }\n      });\n    },\n    setGameProperties() {\n      this.setAssets();\n      this.setTime(this.game.singlePlayerMode.gameDuration);\n      this.setHealth(this.game.initialHealthLevel);\n      this.setIsPlaying(true);\n    },\n  },\n  mounted() {\n    const { assets } = this.$refs;\n    const hasConfig = Object.values(this.game).length > 0;\n\n    if (hasConfig) {\n      this.setGameProperties();\n    } else {\n      this.$router.push({ path: '/' });\n    }\n\n    assets.addEventListener('loaded', () => {\n      this.hudComponent = Hud;\n      camera.init();\n    });\n  },\n  beforeDestroy() {\n    camera.stopStream();\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Game.vue?vue&type=template&id=3bc1256c&\"\nimport script from \"./Game.vue?vue&type=script&lang=js&\"\nexport * from \"./Game.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nmodule.exports = THREE.ColladaLoader = function ( manager ) {\n\n  this.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.ColladaLoader.prototype = {\n\n  constructor: THREE.ColladaLoader,\n\n  crossOrigin: 'anonymous',\n\n  load: function ( url, onLoad, onProgress, onError ) {\n\n    var scope = this;\n\n    var path = ( scope.path === undefined ) ? THREE.LoaderUtils.extractUrlBase( url ) : scope.path;\n\n    var loader = new THREE.FileLoader( scope.manager );\n    loader.setPath( scope.path );\n    loader.load( url, function ( text ) {\n\n      onLoad( scope.parse( text, path ) );\n\n    }, onProgress, onError );\n\n  },\n\n  setPath: function ( value ) {\n\n    this.path = value;\n    return this;\n\n  },\n\n  setResourcePath: function ( value ) {\n\n    this.resourcePath = value;\n    return this;\n\n  },\n\n  options: {\n\n    set convertUpAxis( value ) {\n\n      console.warn( 'THREE.ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.' );\n\n    }\n\n  },\n\n  setCrossOrigin: function ( value ) {\n\n    this.crossOrigin = value;\n    return this;\n\n  },\n\n  parse: function ( text, path ) {\n\n    function getElementsByTagName( xml, name ) {\n\n      // Non recursive xml.getElementsByTagName() ...\n\n      var array = [];\n      var childNodes = xml.childNodes;\n\n      for ( var i = 0, l = childNodes.length; i < l; i ++ ) {\n\n        var child = childNodes[ i ];\n\n        if ( child.nodeName === name ) {\n\n          array.push( child );\n\n        }\n\n      }\n\n      return array;\n\n    }\n\n    function parseStrings( text ) {\n\n      if ( text.length === 0 ) return [];\n\n      var parts = text.trim().split( /\\s+/ );\n      var array = new Array( parts.length );\n\n      for ( var i = 0, l = parts.length; i < l; i ++ ) {\n\n        array[ i ] = parts[ i ];\n\n      }\n\n      return array;\n\n    }\n\n    function parseFloats( text ) {\n\n      if ( text.length === 0 ) return [];\n\n      var parts = text.trim().split( /\\s+/ );\n      var array = new Array( parts.length );\n\n      for ( var i = 0, l = parts.length; i < l; i ++ ) {\n\n        array[ i ] = parseFloat( parts[ i ] );\n\n      }\n\n      return array;\n\n    }\n\n    function parseInts( text ) {\n\n      if ( text.length === 0 ) return [];\n\n      var parts = text.trim().split( /\\s+/ );\n      var array = new Array( parts.length );\n\n      for ( var i = 0, l = parts.length; i < l; i ++ ) {\n\n        array[ i ] = parseInt( parts[ i ] );\n\n      }\n\n      return array;\n\n    }\n\n    function parseId( text ) {\n\n      return text.substring( 1 );\n\n    }\n\n    function generateId() {\n\n      return 'three_default_' + ( count ++ );\n\n    }\n\n    function isEmpty( object ) {\n\n      return Object.keys( object ).length === 0;\n\n    }\n\n    // asset\n\n    function parseAsset( xml ) {\n\n      return {\n        unit: parseAssetUnit( getElementsByTagName( xml, 'unit' )[ 0 ] ),\n        upAxis: parseAssetUpAxis( getElementsByTagName( xml, 'up_axis' )[ 0 ] )\n      };\n\n    }\n\n    function parseAssetUnit( xml ) {\n\n      if ( ( xml !== undefined ) && ( xml.hasAttribute( 'meter' ) === true ) ) {\n\n        return parseFloat( xml.getAttribute( 'meter' ) );\n\n      } else {\n\n        return 1; // default 1 meter\n\n      }\n\n    }\n\n    function parseAssetUpAxis( xml ) {\n\n      return xml !== undefined ? xml.textContent : 'Y_UP';\n\n    }\n\n    // library\n\n    function parseLibrary( xml, libraryName, nodeName, parser ) {\n\n      var library = getElementsByTagName( xml, libraryName )[ 0 ];\n\n      if ( library !== undefined ) {\n\n        var elements = getElementsByTagName( library, nodeName );\n\n        for ( var i = 0; i < elements.length; i ++ ) {\n\n          parser( elements[ i ] );\n\n        }\n\n      }\n\n    }\n\n    function buildLibrary( data, builder ) {\n\n      for ( var name in data ) {\n\n        var object = data[ name ];\n        object.build = builder( data[ name ] );\n\n      }\n\n    }\n\n    // get\n\n    function getBuild( data, builder ) {\n\n      if ( data.build !== undefined ) return data.build;\n\n      data.build = builder( data );\n\n      return data.build;\n\n    }\n\n    // animation\n\n    function parseAnimation( xml ) {\n\n      var data = {\n        sources: {},\n        samplers: {},\n        channels: {}\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        var id;\n\n        switch ( child.nodeName ) {\n\n          case 'source':\n            id = child.getAttribute( 'id' );\n            data.sources[ id ] = parseSource( child );\n            break;\n\n          case 'sampler':\n            id = child.getAttribute( 'id' );\n            data.samplers[ id ] = parseAnimationSampler( child );\n            break;\n\n          case 'channel':\n            id = child.getAttribute( 'target' );\n            data.channels[ id ] = parseAnimationChannel( child );\n            break;\n\n          default:\n            console.log( child );\n\n        }\n\n      }\n\n      library.animations[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function parseAnimationSampler( xml ) {\n\n      var data = {\n        inputs: {},\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'input':\n            var id = parseId( child.getAttribute( 'source' ) );\n            var semantic = child.getAttribute( 'semantic' );\n            data.inputs[ semantic ] = id;\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseAnimationChannel( xml ) {\n\n      var data = {};\n\n      var target = xml.getAttribute( 'target' );\n\n      // parsing SID Addressing Syntax\n\n      var parts = target.split( '/' );\n\n      var id = parts.shift();\n      var sid = parts.shift();\n\n      // check selection syntax\n\n      var arraySyntax = ( sid.indexOf( '(' ) !== - 1 );\n      var memberSyntax = ( sid.indexOf( '.' ) !== - 1 );\n\n      if ( memberSyntax ) {\n\n        //  member selection access\n\n        parts = sid.split( '.' );\n        sid = parts.shift();\n        data.member = parts.shift();\n\n      } else if ( arraySyntax ) {\n\n        // array-access syntax. can be used to express fields in one-dimensional vectors or two-dimensional matrices.\n\n        var indices = sid.split( '(' );\n        sid = indices.shift();\n\n        for ( var i = 0; i < indices.length; i ++ ) {\n\n          indices[ i ] = parseInt( indices[ i ].replace( /\\)/, '' ) );\n\n        }\n\n        data.indices = indices;\n\n      }\n\n      data.id = id;\n      data.sid = sid;\n\n      data.arraySyntax = arraySyntax;\n      data.memberSyntax = memberSyntax;\n\n      data.sampler = parseId( xml.getAttribute( 'source' ) );\n\n      return data;\n\n    }\n\n    function buildAnimation( data ) {\n\n      var tracks = [];\n\n      var channels = data.channels;\n      var samplers = data.samplers;\n      var sources = data.sources;\n\n      for ( var target in channels ) {\n\n        if ( channels.hasOwnProperty( target ) ) {\n\n          var channel = channels[ target ];\n          var sampler = samplers[ channel.sampler ];\n\n          var inputId = sampler.inputs.INPUT;\n          var outputId = sampler.inputs.OUTPUT;\n\n          var inputSource = sources[ inputId ];\n          var outputSource = sources[ outputId ];\n\n          var animation = buildAnimationChannel( channel, inputSource, outputSource );\n\n          createKeyframeTracks( animation, tracks );\n\n        }\n\n      }\n\n      return tracks;\n\n    }\n\n    function getAnimation( id ) {\n\n      return getBuild( library.animations[ id ], buildAnimation );\n\n    }\n\n    function buildAnimationChannel( channel, inputSource, outputSource ) {\n\n      var node = library.nodes[ channel.id ];\n      var object3D = getNode( node.id );\n\n      var transform = node.transforms[ channel.sid ];\n      var defaultMatrix = node.matrix.clone().transpose();\n\n      var time, stride;\n      var i, il, j, jl;\n\n      var data = {};\n\n      // the collada spec allows the animation of data in various ways.\n      // depending on the transform type (matrix, translate, rotate, scale), we execute different logic\n\n      switch ( transform ) {\n\n        case 'matrix':\n\n          for ( i = 0, il = inputSource.array.length; i < il; i ++ ) {\n\n            time = inputSource.array[ i ];\n            stride = i * outputSource.stride;\n\n            if ( data[ time ] === undefined ) data[ time ] = {};\n\n            if ( channel.arraySyntax === true ) {\n\n              var value = outputSource.array[ stride ];\n              var index = channel.indices[ 0 ] + 4 * channel.indices[ 1 ];\n\n              data[ time ][ index ] = value;\n\n            } else {\n\n              for ( j = 0, jl = outputSource.stride; j < jl; j ++ ) {\n\n                data[ time ][ j ] = outputSource.array[ stride + j ];\n\n              }\n\n            }\n\n          }\n\n          break;\n\n        case 'translate':\n          console.warn( 'THREE.ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform );\n          break;\n\n        case 'rotate':\n          console.warn( 'THREE.ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform );\n          break;\n\n        case 'scale':\n          console.warn( 'THREE.ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform );\n          break;\n\n      }\n\n      var keyframes = prepareAnimationData( data, defaultMatrix );\n\n      var animation = {\n        name: object3D.uuid,\n        keyframes: keyframes\n      };\n\n      return animation;\n\n    }\n\n    function prepareAnimationData( data, defaultMatrix ) {\n\n      var keyframes = [];\n\n      // transfer data into a sortable array\n\n      for ( var time in data ) {\n\n        keyframes.push( { time: parseFloat( time ), value: data[ time ] } );\n\n      }\n\n      // ensure keyframes are sorted by time\n\n      keyframes.sort( ascending );\n\n      // now we clean up all animation data, so we can use them for keyframe tracks\n\n      for ( var i = 0; i < 16; i ++ ) {\n\n        transformAnimationData( keyframes, i, defaultMatrix.elements[ i ] );\n\n      }\n\n      return keyframes;\n\n      // array sort function\n\n      function ascending( a, b ) {\n\n        return a.time - b.time;\n\n      }\n\n    }\n\n    var position = new THREE.Vector3();\n    var scale = new THREE.Vector3();\n    var quaternion = new THREE.Quaternion();\n\n    function createKeyframeTracks( animation, tracks ) {\n\n      var keyframes = animation.keyframes;\n      var name = animation.name;\n\n      var times = [];\n      var positionData = [];\n      var quaternionData = [];\n      var scaleData = [];\n\n      for ( var i = 0, l = keyframes.length; i < l; i ++ ) {\n\n        var keyframe = keyframes[ i ];\n\n        var time = keyframe.time;\n        var value = keyframe.value;\n\n        matrix.fromArray( value ).transpose();\n        matrix.decompose( position, quaternion, scale );\n\n        times.push( time );\n        positionData.push( position.x, position.y, position.z );\n        quaternionData.push( quaternion.x, quaternion.y, quaternion.z, quaternion.w );\n        scaleData.push( scale.x, scale.y, scale.z );\n\n      }\n\n      if ( positionData.length > 0 ) tracks.push( new THREE.VectorKeyframeTrack( name + '.position', times, positionData ) );\n      if ( quaternionData.length > 0 ) tracks.push( new THREE.QuaternionKeyframeTrack( name + '.quaternion', times, quaternionData ) );\n      if ( scaleData.length > 0 ) tracks.push( new THREE.VectorKeyframeTrack( name + '.scale', times, scaleData ) );\n\n      return tracks;\n\n    }\n\n    function transformAnimationData( keyframes, property, defaultValue ) {\n\n      var keyframe;\n\n      var empty = true;\n      var i, l;\n\n      // check, if values of a property are missing in our keyframes\n\n      for ( i = 0, l = keyframes.length; i < l; i ++ ) {\n\n        keyframe = keyframes[ i ];\n\n        if ( keyframe.value[ property ] === undefined ) {\n\n          keyframe.value[ property ] = null; // mark as missing\n\n        } else {\n\n          empty = false;\n\n        }\n\n      }\n\n      if ( empty === true ) {\n\n        // no values at all, so we set a default value\n\n        for ( i = 0, l = keyframes.length; i < l; i ++ ) {\n\n          keyframe = keyframes[ i ];\n\n          keyframe.value[ property ] = defaultValue;\n\n        }\n\n      } else {\n\n        // filling gaps\n\n        createMissingKeyframes( keyframes, property );\n\n      }\n\n    }\n\n    function createMissingKeyframes( keyframes, property ) {\n\n      var prev, next;\n\n      for ( var i = 0, l = keyframes.length; i < l; i ++ ) {\n\n        var keyframe = keyframes[ i ];\n\n        if ( keyframe.value[ property ] === null ) {\n\n          prev = getPrev( keyframes, i, property );\n          next = getNext( keyframes, i, property );\n\n          if ( prev === null ) {\n\n            keyframe.value[ property ] = next.value[ property ];\n            continue;\n\n          }\n\n          if ( next === null ) {\n\n            keyframe.value[ property ] = prev.value[ property ];\n            continue;\n\n          }\n\n          interpolate( keyframe, prev, next, property );\n\n        }\n\n      }\n\n    }\n\n    function getPrev( keyframes, i, property ) {\n\n      while ( i >= 0 ) {\n\n        var keyframe = keyframes[ i ];\n\n        if ( keyframe.value[ property ] !== null ) return keyframe;\n\n        i --;\n\n      }\n\n      return null;\n\n    }\n\n    function getNext( keyframes, i, property ) {\n\n      while ( i < keyframes.length ) {\n\n        var keyframe = keyframes[ i ];\n\n        if ( keyframe.value[ property ] !== null ) return keyframe;\n\n        i ++;\n\n      }\n\n      return null;\n\n    }\n\n    function interpolate( key, prev, next, property ) {\n\n      if ( ( next.time - prev.time ) === 0 ) {\n\n        key.value[ property ] = prev.value[ property ];\n        return;\n\n      }\n\n      key.value[ property ] = ( ( key.time - prev.time ) * ( next.value[ property ] - prev.value[ property ] ) / ( next.time - prev.time ) ) + prev.value[ property ];\n\n    }\n\n    // animation clips\n\n    function parseAnimationClip( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'id' ) || 'default',\n        start: parseFloat( xml.getAttribute( 'start' ) || 0 ),\n        end: parseFloat( xml.getAttribute( 'end' ) || 0 ),\n        animations: []\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'instance_animation':\n            data.animations.push( parseId( child.getAttribute( 'url' ) ) );\n            break;\n\n        }\n\n      }\n\n      library.clips[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function buildAnimationClip( data ) {\n\n      var tracks = [];\n\n      var name = data.name;\n      var duration = ( data.end - data.start ) || - 1;\n      var animations = data.animations;\n\n      for ( var i = 0, il = animations.length; i < il; i ++ ) {\n\n        var animationTracks = getAnimation( animations[ i ] );\n\n        for ( var j = 0, jl = animationTracks.length; j < jl; j ++ ) {\n\n          tracks.push( animationTracks[ j ] );\n\n        }\n\n      }\n\n      return new THREE.AnimationClip( name, duration, tracks );\n\n    }\n\n    function getAnimationClip( id ) {\n\n      return getBuild( library.clips[ id ], buildAnimationClip );\n\n    }\n\n    // controller\n\n    function parseController( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'skin':\n            // there is exactly one skin per controller\n            data.id = parseId( child.getAttribute( 'source' ) );\n            data.skin = parseSkin( child );\n            break;\n\n          case 'morph':\n            data.id = parseId( child.getAttribute( 'source' ) );\n            console.warn( 'THREE.ColladaLoader: Morph target animation not supported yet.' );\n            break;\n\n        }\n\n      }\n\n      library.controllers[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function parseSkin( xml ) {\n\n      var data = {\n        sources: {}\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'bind_shape_matrix':\n            data.bindShapeMatrix = parseFloats( child.textContent );\n            break;\n\n          case 'source':\n            var id = child.getAttribute( 'id' );\n            data.sources[ id ] = parseSource( child );\n            break;\n\n          case 'joints':\n            data.joints = parseJoints( child );\n            break;\n\n          case 'vertex_weights':\n            data.vertexWeights = parseVertexWeights( child );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseJoints( xml ) {\n\n      var data = {\n        inputs: {}\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'input':\n            var semantic = child.getAttribute( 'semantic' );\n            var id = parseId( child.getAttribute( 'source' ) );\n            data.inputs[ semantic ] = id;\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseVertexWeights( xml ) {\n\n      var data = {\n        inputs: {}\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'input':\n            var semantic = child.getAttribute( 'semantic' );\n            var id = parseId( child.getAttribute( 'source' ) );\n            var offset = parseInt( child.getAttribute( 'offset' ) );\n            data.inputs[ semantic ] = { id: id, offset: offset };\n            break;\n\n          case 'vcount':\n            data.vcount = parseInts( child.textContent );\n            break;\n\n          case 'v':\n            data.v = parseInts( child.textContent );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function buildController( data ) {\n\n      var build = {\n        id: data.id\n      };\n\n      var geometry = library.geometries[ build.id ];\n\n      if ( data.skin !== undefined ) {\n\n        build.skin = buildSkin( data.skin );\n\n        // we enhance the 'sources' property of the corresponding geometry with our skin data\n\n        geometry.sources.skinIndices = build.skin.indices;\n        geometry.sources.skinWeights = build.skin.weights;\n\n      }\n\n      return build;\n\n    }\n\n    function buildSkin( data ) {\n\n      var BONE_LIMIT = 4;\n\n      var build = {\n        joints: [], // this must be an array to preserve the joint order\n        indices: {\n          array: [],\n          stride: BONE_LIMIT\n        },\n        weights: {\n          array: [],\n          stride: BONE_LIMIT\n        }\n      };\n\n      var sources = data.sources;\n      var vertexWeights = data.vertexWeights;\n\n      var vcount = vertexWeights.vcount;\n      var v = vertexWeights.v;\n      var jointOffset = vertexWeights.inputs.JOINT.offset;\n      var weightOffset = vertexWeights.inputs.WEIGHT.offset;\n\n      var jointSource = data.sources[ data.joints.inputs.JOINT ];\n      var inverseSource = data.sources[ data.joints.inputs.INV_BIND_MATRIX ];\n\n      var weights = sources[ vertexWeights.inputs.WEIGHT.id ].array;\n      var stride = 0;\n\n      var i, j, l;\n\n      // procces skin data for each vertex\n\n      for ( i = 0, l = vcount.length; i < l; i ++ ) {\n\n        var jointCount = vcount[ i ]; // this is the amount of joints that affect a single vertex\n        var vertexSkinData = [];\n\n        for ( j = 0; j < jointCount; j ++ ) {\n\n          var skinIndex = v[ stride + jointOffset ];\n          var weightId = v[ stride + weightOffset ];\n          var skinWeight = weights[ weightId ];\n\n          vertexSkinData.push( { index: skinIndex, weight: skinWeight } );\n\n          stride += 2;\n\n        }\n\n        // we sort the joints in descending order based on the weights.\n        // this ensures, we only procced the most important joints of the vertex\n\n        vertexSkinData.sort( descending );\n\n        // now we provide for each vertex a set of four index and weight values.\n        // the order of the skin data matches the order of vertices\n\n        for ( j = 0; j < BONE_LIMIT; j ++ ) {\n\n          var d = vertexSkinData[ j ];\n\n          if ( d !== undefined ) {\n\n            build.indices.array.push( d.index );\n            build.weights.array.push( d.weight );\n\n          } else {\n\n            build.indices.array.push( 0 );\n            build.weights.array.push( 0 );\n\n          }\n\n        }\n\n      }\n\n      // setup bind matrix\n\n      if ( data.bindShapeMatrix ) {\n\n        build.bindMatrix = new THREE.Matrix4().fromArray( data.bindShapeMatrix ).transpose();\n\n      } else {\n\n        build.bindMatrix = new THREE.Matrix4().identity();\n\n      }\n\n      // process bones and inverse bind matrix data\n\n      for ( i = 0, l = jointSource.array.length; i < l; i ++ ) {\n\n        var name = jointSource.array[ i ];\n        var boneInverse = new THREE.Matrix4().fromArray( inverseSource.array, i * inverseSource.stride ).transpose();\n\n        build.joints.push( { name: name, boneInverse: boneInverse } );\n\n      }\n\n      return build;\n\n      // array sort function\n\n      function descending( a, b ) {\n\n        return b.weight - a.weight;\n\n      }\n\n    }\n\n    function getController( id ) {\n\n      return getBuild( library.controllers[ id ], buildController );\n\n    }\n\n    // image\n\n    function parseImage( xml ) {\n\n      var data = {\n        init_from: getElementsByTagName( xml, 'init_from' )[ 0 ].textContent\n      };\n\n      library.images[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function buildImage( data ) {\n\n      if ( data.build !== undefined ) return data.build;\n\n      return data.init_from;\n\n    }\n\n    function getImage( id ) {\n\n      var data = library.images[ id ];\n\n      if ( data !== undefined ) {\n\n        return getBuild( data, buildImage );\n\n      }\n\n      console.warn( 'THREE.ColladaLoader: Couldn\\'t find image with ID:', id );\n\n      return null;\n\n    }\n\n    // effect\n\n    function parseEffect( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'profile_COMMON':\n            data.profile = parseEffectProfileCOMMON( child );\n            break;\n\n        }\n\n      }\n\n      library.effects[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function parseEffectProfileCOMMON( xml ) {\n\n      var data = {\n        surfaces: {},\n        samplers: {}\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'newparam':\n            parseEffectNewparam( child, data );\n            break;\n\n          case 'technique':\n            data.technique = parseEffectTechnique( child );\n            break;\n\n          case 'extra':\n            data.extra = parseEffectExtra( child );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectNewparam( xml, data ) {\n\n      var sid = xml.getAttribute( 'sid' );\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'surface':\n            data.surfaces[ sid ] = parseEffectSurface( child );\n            break;\n\n          case 'sampler2D':\n            data.samplers[ sid ] = parseEffectSampler( child );\n            break;\n\n        }\n\n      }\n\n    }\n\n    function parseEffectSurface( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'init_from':\n            data.init_from = child.textContent;\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectSampler( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'source':\n            data.source = child.textContent;\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectTechnique( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'constant':\n          case 'lambert':\n          case 'blinn':\n          case 'phong':\n            data.type = child.nodeName;\n            data.parameters = parseEffectParameters( child );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectParameters( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'emission':\n          case 'diffuse':\n          case 'specular':\n          case 'bump':\n          case 'ambient':\n          case 'shininess':\n          case 'transparency':\n            data[ child.nodeName ] = parseEffectParameter( child );\n            break;\n          case 'transparent':\n            data[ child.nodeName ] = {\n              opaque: child.getAttribute( 'opaque' ),\n              data: parseEffectParameter( child )\n            };\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectParameter( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'color':\n            data[ child.nodeName ] = parseFloats( child.textContent );\n            break;\n\n          case 'float':\n            data[ child.nodeName ] = parseFloat( child.textContent );\n            break;\n\n          case 'texture':\n            data[ child.nodeName ] = { id: child.getAttribute( 'texture' ), extra: parseEffectParameterTexture( child ) };\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectParameterTexture( xml ) {\n\n      var data = {\n        technique: {}\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'extra':\n            parseEffectParameterTextureExtra( child, data );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectParameterTextureExtra( xml, data ) {\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'technique':\n            parseEffectParameterTextureExtraTechnique( child, data );\n            break;\n\n        }\n\n      }\n\n    }\n\n    function parseEffectParameterTextureExtraTechnique( xml, data ) {\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'repeatU':\n          case 'repeatV':\n          case 'offsetU':\n          case 'offsetV':\n            data.technique[ child.nodeName ] = parseFloat( child.textContent );\n            break;\n\n          case 'wrapU':\n          case 'wrapV':\n\n            // some files have values for wrapU/wrapV which become NaN via parseInt\n\n            if ( child.textContent.toUpperCase() === 'TRUE' ) {\n\n              data.technique[ child.nodeName ] = 1;\n\n            } else if ( child.textContent.toUpperCase() === 'FALSE' ) {\n\n              data.technique[ child.nodeName ] = 0;\n\n            } else {\n\n              data.technique[ child.nodeName ] = parseInt( child.textContent );\n\n            }\n\n            break;\n\n        }\n\n      }\n\n    }\n\n    function parseEffectExtra( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'technique':\n            data.technique = parseEffectExtraTechnique( child );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectExtraTechnique( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'double_sided':\n            data[ child.nodeName ] = parseInt( child.textContent );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function buildEffect( data ) {\n\n      return data;\n\n    }\n\n    function getEffect( id ) {\n\n      return getBuild( library.effects[ id ], buildEffect );\n\n    }\n\n    // material\n\n    function parseMaterial( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'name' )\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'instance_effect':\n            data.url = parseId( child.getAttribute( 'url' ) );\n            break;\n\n        }\n\n      }\n\n      library.materials[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function getTextureLoader( image ) {\n\n      var loader;\n\n      var extension = image.slice( ( image.lastIndexOf( '.' ) - 1 >>> 0 ) + 2 ); // http://www.jstips.co/en/javascript/get-file-extension/\n      extension = extension.toLowerCase();\n\n      switch ( extension ) {\n\n        case 'tga':\n          loader = tgaLoader;\n          break;\n\n        default:\n          loader = textureLoader;\n\n      }\n\n      return loader;\n\n    }\n\n    function buildMaterial( data ) {\n\n      var effect = getEffect( data.url );\n      var technique = effect.profile.technique;\n      var extra = effect.profile.extra;\n\n      var material;\n\n      switch ( technique.type ) {\n\n        case 'phong':\n        case 'blinn':\n          material = new THREE.MeshPhongMaterial();\n          break;\n\n        case 'lambert':\n          material = new THREE.MeshLambertMaterial();\n          break;\n\n        default:\n          material = new THREE.MeshBasicMaterial();\n          break;\n\n      }\n\n      material.name = data.name;\n\n      function getTexture( textureObject ) {\n\n        var sampler = effect.profile.samplers[ textureObject.id ];\n        var image = null;\n\n        // get image\n\n        if ( sampler !== undefined ) {\n\n          var surface = effect.profile.surfaces[ sampler.source ];\n          image = getImage( surface.init_from );\n\n        } else {\n\n          console.warn( 'THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530).' );\n          image = getImage( textureObject.id );\n\n        }\n\n        // create texture if image is avaiable\n\n        if ( image !== null ) {\n\n          var loader = getTextureLoader( image );\n\n          if ( loader !== undefined ) {\n\n            var texture = loader.load( image );\n\n            var extra = textureObject.extra;\n\n            if ( extra !== undefined && extra.technique !== undefined && isEmpty( extra.technique ) === false ) {\n\n              var technique = extra.technique;\n\n              texture.wrapS = technique.wrapU ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n              texture.wrapT = technique.wrapV ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n\n              texture.offset.set( technique.offsetU || 0, technique.offsetV || 0 );\n              texture.repeat.set( technique.repeatU || 1, technique.repeatV || 1 );\n\n            } else {\n\n              texture.wrapS = THREE.RepeatWrapping;\n              texture.wrapT = THREE.RepeatWrapping;\n\n            }\n\n            return texture;\n\n          } else {\n\n            console.warn( 'THREE.ColladaLoader: Loader for texture %s not found.', image );\n\n            return null;\n\n          }\n\n        } else {\n\n          console.warn( 'THREE.ColladaLoader: Couldn\\'t create texture with ID:', textureObject.id );\n\n          return null;\n\n        }\n\n      }\n\n      var parameters = technique.parameters;\n\n      for ( var key in parameters ) {\n\n        var parameter = parameters[ key ];\n\n        switch ( key ) {\n\n          case 'diffuse':\n            if ( parameter.color ) material.color.fromArray( parameter.color );\n            if ( parameter.texture ) material.map = getTexture( parameter.texture );\n            break;\n          case 'specular':\n            if ( parameter.color && material.specular ) material.specular.fromArray( parameter.color );\n            if ( parameter.texture ) material.specularMap = getTexture( parameter.texture );\n            break;\n          case 'bump':\n            if ( parameter.texture ) material.normalMap = getTexture( parameter.texture );\n            break;\n          case 'ambient':\n            if ( parameter.texture ) material.lightMap = getTexture( parameter.texture );\n            break;\n          case 'shininess':\n            if ( parameter.float && material.shininess ) material.shininess = parameter.float;\n            break;\n          case 'emission':\n            if ( parameter.color && material.emissive ) material.emissive.fromArray( parameter.color );\n            if ( parameter.texture ) material.emissiveMap = getTexture( parameter.texture );\n            break;\n\n        }\n\n      }\n\n      //\n\n      var transparent = parameters[ 'transparent' ];\n      var transparency = parameters[ 'transparency' ];\n\n      // <transparency> does not exist but <transparent>\n\n      if ( transparency === undefined && transparent ) {\n\n        transparency = {\n          float: 1\n        };\n\n      }\n\n      // <transparent> does not exist but <transparency>\n\n      if ( transparent === undefined && transparency ) {\n\n        transparent = {\n          opaque: 'A_ONE',\n          data: {\n            color: [ 1, 1, 1, 1 ]\n          } };\n\n      }\n\n      if ( transparent && transparency ) {\n\n        // handle case if a texture exists but no color\n\n        if ( transparent.data.texture ) {\n\n          // we do not set an alpha map (see #13792)\n\n          material.transparent = true;\n\n        } else {\n\n          var color = transparent.data.color;\n\n          switch ( transparent.opaque ) {\n\n            case 'A_ONE':\n              material.opacity = color[ 3 ] * transparency.float;\n              break;\n            case 'RGB_ZERO':\n              material.opacity = 1 - ( color[ 0 ] * transparency.float );\n              break;\n            case 'A_ZERO':\n              material.opacity = 1 - ( color[ 3 ] * transparency.float );\n              break;\n            case 'RGB_ONE':\n              material.opacity = color[ 0 ] * transparency.float;\n              break;\n            default:\n              console.warn( 'THREE.ColladaLoader: Invalid opaque type \"%s\" of transparent tag.', transparent.opaque );\n\n          }\n\n          if ( material.opacity < 1 ) material.transparent = true;\n\n        }\n\n      }\n\n      //\n\n      if ( extra !== undefined && extra.technique !== undefined && extra.technique.double_sided === 1 ) {\n\n        material.side = THREE.DoubleSide;\n\n      }\n\n      return material;\n\n    }\n\n    function getMaterial( id ) {\n\n      return getBuild( library.materials[ id ], buildMaterial );\n\n    }\n\n    // camera\n\n    function parseCamera( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'name' )\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'optics':\n            data.optics = parseCameraOptics( child );\n            break;\n\n        }\n\n      }\n\n      library.cameras[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function parseCameraOptics( xml ) {\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        switch ( child.nodeName ) {\n\n          case 'technique_common':\n            return parseCameraTechnique( child );\n\n        }\n\n      }\n\n      return {};\n\n    }\n\n    function parseCameraTechnique( xml ) {\n\n      var data = {};\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        switch ( child.nodeName ) {\n\n          case 'perspective':\n          case 'orthographic':\n\n            data.technique = child.nodeName;\n            data.parameters = parseCameraParameters( child );\n\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseCameraParameters( xml ) {\n\n      var data = {};\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        switch ( child.nodeName ) {\n\n          case 'xfov':\n          case 'yfov':\n          case 'xmag':\n          case 'ymag':\n          case 'znear':\n          case 'zfar':\n          case 'aspect_ratio':\n            data[ child.nodeName ] = parseFloat( child.textContent );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function buildCamera( data ) {\n\n      var camera;\n\n      switch ( data.optics.technique ) {\n\n        case 'perspective':\n          camera = new THREE.PerspectiveCamera(\n            data.optics.parameters.yfov,\n            data.optics.parameters.aspect_ratio,\n            data.optics.parameters.znear,\n            data.optics.parameters.zfar\n          );\n          break;\n\n        case 'orthographic':\n          var ymag = data.optics.parameters.ymag;\n          var xmag = data.optics.parameters.xmag;\n          var aspectRatio = data.optics.parameters.aspect_ratio;\n\n          xmag = ( xmag === undefined ) ? ( ymag * aspectRatio ) : xmag;\n          ymag = ( ymag === undefined ) ? ( xmag / aspectRatio ) : ymag;\n\n          xmag *= 0.5;\n          ymag *= 0.5;\n\n          camera = new THREE.OrthographicCamera(\n            - xmag, xmag, ymag, - ymag, // left, right, top, bottom\n            data.optics.parameters.znear,\n            data.optics.parameters.zfar\n          );\n          break;\n\n        default:\n          camera = new THREE.PerspectiveCamera();\n          break;\n\n      }\n\n      camera.name = data.name;\n\n      return camera;\n\n    }\n\n    function getCamera( id ) {\n\n      var data = library.cameras[ id ];\n\n      if ( data !== undefined ) {\n\n        return getBuild( data, buildCamera );\n\n      }\n\n      console.warn( 'THREE.ColladaLoader: Couldn\\'t find camera with ID:', id );\n\n      return null;\n\n    }\n\n    // light\n\n    function parseLight( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'technique_common':\n            data = parseLightTechnique( child );\n            break;\n\n        }\n\n      }\n\n      library.lights[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function parseLightTechnique( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'directional':\n          case 'point':\n          case 'spot':\n          case 'ambient':\n\n            data.technique = child.nodeName;\n            data.parameters = parseLightParameters( child );\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseLightParameters( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'color':\n            var array = parseFloats( child.textContent );\n            data.color = new THREE.Color().fromArray( array );\n            break;\n\n          case 'falloff_angle':\n            data.falloffAngle = parseFloat( child.textContent );\n            break;\n\n          case 'quadratic_attenuation':\n            var f = parseFloat( child.textContent );\n            data.distance = f ? Math.sqrt( 1 / f ) : 0;\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function buildLight( data ) {\n\n      var light;\n\n      switch ( data.technique ) {\n\n        case 'directional':\n          light = new THREE.DirectionalLight();\n          break;\n\n        case 'point':\n          light = new THREE.PointLight();\n          break;\n\n        case 'spot':\n          light = new THREE.SpotLight();\n          break;\n\n        case 'ambient':\n          light = new THREE.AmbientLight();\n          break;\n\n      }\n\n      if ( data.parameters.color ) light.color.copy( data.parameters.color );\n      if ( data.parameters.distance ) light.distance = data.parameters.distance;\n\n      return light;\n\n    }\n\n    function getLight( id ) {\n\n      var data = library.lights[ id ];\n\n      if ( data !== undefined ) {\n\n        return getBuild( data, buildLight );\n\n      }\n\n      console.warn( 'THREE.ColladaLoader: Couldn\\'t find light with ID:', id );\n\n      return null;\n\n    }\n\n    // geometry\n\n    function parseGeometry( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'name' ),\n        sources: {},\n        vertices: {},\n        primitives: []\n      };\n\n      var mesh = getElementsByTagName( xml, 'mesh' )[ 0 ];\n\n      // the following tags inside geometry are not supported yet (see https://github.com/mrdoob/three.js/pull/12606): convex_mesh, spline, brep\n      if ( mesh === undefined ) return;\n\n      for ( var i = 0; i < mesh.childNodes.length; i ++ ) {\n\n        var child = mesh.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        var id = child.getAttribute( 'id' );\n\n        switch ( child.nodeName ) {\n\n          case 'source':\n            data.sources[ id ] = parseSource( child );\n            break;\n\n          case 'vertices':\n            // data.sources[ id ] = data.sources[ parseId( getElementsByTagName( child, 'input' )[ 0 ].getAttribute( 'source' ) ) ];\n            data.vertices = parseGeometryVertices( child );\n            break;\n\n          case 'polygons':\n            console.warn( 'THREE.ColladaLoader: Unsupported primitive type: ', child.nodeName );\n            break;\n\n          case 'lines':\n          case 'linestrips':\n          case 'polylist':\n          case 'triangles':\n            data.primitives.push( parseGeometryPrimitive( child ) );\n            break;\n\n          default:\n            console.log( child );\n\n        }\n\n      }\n\n      library.geometries[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function parseSource( xml ) {\n\n      var data = {\n        array: [],\n        stride: 3\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'float_array':\n            data.array = parseFloats( child.textContent );\n            break;\n\n          case 'Name_array':\n            data.array = parseStrings( child.textContent );\n            break;\n\n          case 'technique_common':\n            var accessor = getElementsByTagName( child, 'accessor' )[ 0 ];\n\n            if ( accessor !== undefined ) {\n\n              data.stride = parseInt( accessor.getAttribute( 'stride' ) );\n\n            }\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseGeometryVertices( xml ) {\n\n      var data = {};\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        data[ child.getAttribute( 'semantic' ) ] = parseId( child.getAttribute( 'source' ) );\n\n      }\n\n      return data;\n\n    }\n\n    function parseGeometryPrimitive( xml ) {\n\n      var primitive = {\n        type: xml.nodeName,\n        material: xml.getAttribute( 'material' ),\n        count: parseInt( xml.getAttribute( 'count' ) ),\n        inputs: {},\n        stride: 0,\n        hasUV: false\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'input':\n            var id = parseId( child.getAttribute( 'source' ) );\n            var semantic = child.getAttribute( 'semantic' );\n            var offset = parseInt( child.getAttribute( 'offset' ) );\n            var set = parseInt( child.getAttribute( 'set' ) );\n            var inputname = ( set > 0 ? semantic + set : semantic );\n            primitive.inputs[ inputname ] = { id: id, offset: offset };\n            primitive.stride = Math.max( primitive.stride, offset + 1 );\n            if ( semantic === 'TEXCOORD' ) primitive.hasUV = true;\n            break;\n\n          case 'vcount':\n            primitive.vcount = parseInts( child.textContent );\n            break;\n\n          case 'p':\n            primitive.p = parseInts( child.textContent );\n            break;\n\n        }\n\n      }\n\n      return primitive;\n\n    }\n\n    function groupPrimitives( primitives ) {\n\n      var build = {};\n\n      for ( var i = 0; i < primitives.length; i ++ ) {\n\n        var primitive = primitives[ i ];\n\n        if ( build[ primitive.type ] === undefined ) build[ primitive.type ] = [];\n\n        build[ primitive.type ].push( primitive );\n\n      }\n\n      return build;\n\n    }\n\n    function checkUVCoordinates( primitives ) {\n\n      var count = 0;\n\n      for ( var i = 0, l = primitives.length; i < l; i ++ ) {\n\n        var primitive = primitives[ i ];\n\n        if ( primitive.hasUV === true ) {\n\n          count ++;\n\n        }\n\n      }\n\n      if ( count > 0 && count < primitives.length ) {\n\n        primitives.uvsNeedsFix = true;\n\n      }\n\n    }\n\n    function buildGeometry( data ) {\n\n      var build = {};\n\n      var sources = data.sources;\n      var vertices = data.vertices;\n      var primitives = data.primitives;\n\n      if ( primitives.length === 0 ) return {};\n\n      // our goal is to create one buffer geometry for a single type of primitives\n      // first, we group all primitives by their type\n\n      var groupedPrimitives = groupPrimitives( primitives );\n\n      for ( var type in groupedPrimitives ) {\n\n        var primitiveType = groupedPrimitives[ type ];\n\n        // second, ensure consistent uv coordinates for each type of primitives (polylist,triangles or lines)\n\n        checkUVCoordinates( primitiveType );\n\n        // third, create a buffer geometry for each type of primitives\n\n        build[ type ] = buildGeometryType( primitiveType, sources, vertices );\n\n      }\n\n      return build;\n\n    }\n\n    function buildGeometryType( primitives, sources, vertices ) {\n\n      var build = {};\n\n      var position = { array: [], stride: 0 };\n      var normal = { array: [], stride: 0 };\n      var uv = { array: [], stride: 0 };\n      var uv2 = { array: [], stride: 0 };\n      var color = { array: [], stride: 0 };\n\n      var skinIndex = { array: [], stride: 4 };\n      var skinWeight = { array: [], stride: 4 };\n\n      var geometry = new THREE.BufferGeometry();\n\n      var materialKeys = [];\n\n      var start = 0;\n\n      for ( var p = 0; p < primitives.length; p ++ ) {\n\n        var primitive = primitives[ p ];\n        var inputs = primitive.inputs;\n\n        // groups\n\n        var count = 0;\n\n        switch ( primitive.type ) {\n\n          case 'lines':\n          case 'linestrips':\n            count = primitive.count * 2;\n            break;\n\n          case 'triangles':\n            count = primitive.count * 3;\n            break;\n\n          case 'polylist':\n\n            for ( var g = 0; g < primitive.count; g ++ ) {\n\n              var vc = primitive.vcount[ g ];\n\n              switch ( vc ) {\n\n                case 3:\n                  count += 3; // single triangle\n                  break;\n\n                case 4:\n                  count += 6; // quad, subdivided into two triangles\n                  break;\n\n                default:\n                  count += ( vc - 2 ) * 3; // polylist with more than four vertices\n                  break;\n\n              }\n\n            }\n\n            break;\n\n          default:\n            console.warn( 'THREE.ColladaLoader: Unknow primitive type:', primitive.type );\n\n        }\n\n        geometry.addGroup( start, count, p );\n        start += count;\n\n        // material\n\n        if ( primitive.material ) {\n\n          materialKeys.push( primitive.material );\n\n        }\n\n        // geometry data\n\n        for ( var name in inputs ) {\n\n          var input = inputs[ name ];\n\n          switch ( name ) {\n\n            case 'VERTEX':\n              for ( var key in vertices ) {\n\n                var id = vertices[ key ];\n\n                switch ( key ) {\n\n                  case 'POSITION':\n                    var prevLength = position.array.length;\n                    buildGeometryData( primitive, sources[ id ], input.offset, position.array );\n                    position.stride = sources[ id ].stride;\n\n                    if ( sources.skinWeights && sources.skinIndices ) {\n\n                      buildGeometryData( primitive, sources.skinIndices, input.offset, skinIndex.array );\n                      buildGeometryData( primitive, sources.skinWeights, input.offset, skinWeight.array );\n\n                    }\n\n                    // see #3803\n\n                    if ( primitive.hasUV === false && primitives.uvsNeedsFix === true ) {\n\n                      var count = ( position.array.length - prevLength ) / position.stride;\n\n                      for ( var i = 0; i < count; i ++ ) {\n\n                        // fill missing uv coordinates\n\n                        uv.array.push( 0, 0 );\n\n                      }\n\n                    }\n                    break;\n\n                  case 'NORMAL':\n                    buildGeometryData( primitive, sources[ id ], input.offset, normal.array );\n                    normal.stride = sources[ id ].stride;\n                    break;\n\n                  case 'COLOR':\n                    buildGeometryData( primitive, sources[ id ], input.offset, color.array );\n                    color.stride = sources[ id ].stride;\n                    break;\n\n                  case 'TEXCOORD':\n                    buildGeometryData( primitive, sources[ id ], input.offset, uv.array );\n                    uv.stride = sources[ id ].stride;\n                    break;\n\n                  case 'TEXCOORD1':\n                    buildGeometryData( primitive, sources[ id ], input.offset, uv2.array );\n                    uv.stride = sources[ id ].stride;\n                    break;\n\n                  default:\n                    console.warn( 'THREE.ColladaLoader: Semantic \"%s\" not handled in geometry build process.', key );\n\n                }\n\n              }\n              break;\n\n            case 'NORMAL':\n              buildGeometryData( primitive, sources[ input.id ], input.offset, normal.array );\n              normal.stride = sources[ input.id ].stride;\n              break;\n\n            case 'COLOR':\n              buildGeometryData( primitive, sources[ input.id ], input.offset, color.array );\n              color.stride = sources[ input.id ].stride;\n              break;\n\n            case 'TEXCOORD':\n              buildGeometryData( primitive, sources[ input.id ], input.offset, uv.array );\n              uv.stride = sources[ input.id ].stride;\n              break;\n\n            case 'TEXCOORD1':\n              buildGeometryData( primitive, sources[ input.id ], input.offset, uv2.array );\n              uv2.stride = sources[ input.id ].stride;\n              break;\n\n          }\n\n        }\n\n      }\n\n      // build geometry\n\n      if ( position.array.length > 0 ) geometry.addAttribute( 'position', new THREE.Float32BufferAttribute( position.array, position.stride ) );\n      if ( normal.array.length > 0 ) geometry.addAttribute( 'normal', new THREE.Float32BufferAttribute( normal.array, normal.stride ) );\n      if ( color.array.length > 0 ) geometry.addAttribute( 'color', new THREE.Float32BufferAttribute( color.array, color.stride ) );\n      if ( uv.array.length > 0 ) geometry.addAttribute( 'uv', new THREE.Float32BufferAttribute( uv.array, uv.stride ) );\n      if ( uv2.array.length > 0 ) geometry.addAttribute( 'uv2', new THREE.Float32BufferAttribute( uv2.array, uv2.stride ) );\n\n      if ( skinIndex.array.length > 0 ) geometry.addAttribute( 'skinIndex', new THREE.Float32BufferAttribute( skinIndex.array, skinIndex.stride ) );\n      if ( skinWeight.array.length > 0 ) geometry.addAttribute( 'skinWeight', new THREE.Float32BufferAttribute( skinWeight.array, skinWeight.stride ) );\n\n      build.data = geometry;\n      build.type = primitives[ 0 ].type;\n      build.materialKeys = materialKeys;\n\n      return build;\n\n    }\n\n    function buildGeometryData( primitive, source, offset, array ) {\n\n      var indices = primitive.p;\n      var stride = primitive.stride;\n      var vcount = primitive.vcount;\n\n      function pushVector( i ) {\n\n        var index = indices[ i + offset ] * sourceStride;\n        var length = index + sourceStride;\n\n        for ( ; index < length; index ++ ) {\n\n          array.push( sourceArray[ index ] );\n\n        }\n\n      }\n\n      var sourceArray = source.array;\n      var sourceStride = source.stride;\n\n      if ( primitive.vcount !== undefined ) {\n\n        var index = 0;\n\n        for ( var i = 0, l = vcount.length; i < l; i ++ ) {\n\n          var count = vcount[ i ];\n\n          if ( count === 4 ) {\n\n            var a = index + stride * 0;\n            var b = index + stride * 1;\n            var c = index + stride * 2;\n            var d = index + stride * 3;\n\n            pushVector( a ); pushVector( b ); pushVector( d );\n            pushVector( b ); pushVector( c ); pushVector( d );\n\n          } else if ( count === 3 ) {\n\n            var a = index + stride * 0;\n            var b = index + stride * 1;\n            var c = index + stride * 2;\n\n            pushVector( a ); pushVector( b ); pushVector( c );\n\n          } else if ( count > 4 ) {\n\n            for ( var k = 1, kl = ( count - 2 ); k <= kl; k ++ ) {\n\n              var a = index + stride * 0;\n              var b = index + stride * k;\n              var c = index + stride * ( k + 1 );\n\n              pushVector( a ); pushVector( b ); pushVector( c );\n\n            }\n\n          }\n\n          index += stride * count;\n\n        }\n\n      } else {\n\n        for ( var i = 0, l = indices.length; i < l; i += stride ) {\n\n          pushVector( i );\n\n        }\n\n      }\n\n    }\n\n    function getGeometry( id ) {\n\n      return getBuild( library.geometries[ id ], buildGeometry );\n\n    }\n\n    // kinematics\n\n    function parseKinematicsModel( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'name' ) || '',\n        joints: {},\n        links: []\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'technique_common':\n            parseKinematicsTechniqueCommon( child, data );\n            break;\n\n        }\n\n      }\n\n      library.kinematicsModels[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function buildKinematicsModel( data ) {\n\n      if ( data.build !== undefined ) return data.build;\n\n      return data;\n\n    }\n\n    function getKinematicsModel( id ) {\n\n      return getBuild( library.kinematicsModels[ id ], buildKinematicsModel );\n\n    }\n\n    function parseKinematicsTechniqueCommon( xml, data ) {\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'joint':\n            data.joints[ child.getAttribute( 'sid' ) ] = parseKinematicsJoint( child );\n            break;\n\n          case 'link':\n            data.links.push( parseKinematicsLink( child ) );\n            break;\n\n        }\n\n      }\n\n    }\n\n    function parseKinematicsJoint( xml ) {\n\n      var data;\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'prismatic':\n          case 'revolute':\n            data = parseKinematicsJointParameter( child );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseKinematicsJointParameter( xml, data ) {\n\n      var data = {\n        sid: xml.getAttribute( 'sid' ),\n        name: xml.getAttribute( 'name' ) || '',\n        axis: new THREE.Vector3(),\n        limits: {\n          min: 0,\n          max: 0\n        },\n        type: xml.nodeName,\n        static: false,\n        zeroPosition: 0,\n        middlePosition: 0\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'axis':\n            var array = parseFloats( child.textContent );\n            data.axis.fromArray( array );\n            break;\n          case 'limits':\n            var max = child.getElementsByTagName( 'max' )[ 0 ];\n            var min = child.getElementsByTagName( 'min' )[ 0 ];\n\n            data.limits.max = parseFloat( max.textContent );\n            data.limits.min = parseFloat( min.textContent );\n            break;\n\n        }\n\n      }\n\n      // if min is equal to or greater than max, consider the joint static\n\n      if ( data.limits.min >= data.limits.max ) {\n\n        data.static = true;\n\n      }\n\n      // calculate middle position\n\n      data.middlePosition = ( data.limits.min + data.limits.max ) / 2.0;\n\n      return data;\n\n    }\n\n    function parseKinematicsLink( xml ) {\n\n      var data = {\n        sid: xml.getAttribute( 'sid' ),\n        name: xml.getAttribute( 'name' ) || '',\n        attachments: [],\n        transforms: []\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'attachment_full':\n            data.attachments.push( parseKinematicsAttachment( child ) );\n            break;\n\n          case 'matrix':\n          case 'translate':\n          case 'rotate':\n            data.transforms.push( parseKinematicsTransform( child ) );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseKinematicsAttachment( xml ) {\n\n      var data = {\n        joint: xml.getAttribute( 'joint' ).split( '/' ).pop(),\n        transforms: [],\n        links: []\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'link':\n            data.links.push( parseKinematicsLink( child ) );\n            break;\n\n          case 'matrix':\n          case 'translate':\n          case 'rotate':\n            data.transforms.push( parseKinematicsTransform( child ) );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseKinematicsTransform( xml ) {\n\n      var data = {\n        type: xml.nodeName\n      };\n\n      var array = parseFloats( xml.textContent );\n\n      switch ( data.type ) {\n\n        case 'matrix':\n          data.obj = new THREE.Matrix4();\n          data.obj.fromArray( array ).transpose();\n          break;\n\n        case 'translate':\n          data.obj = new THREE.Vector3();\n          data.obj.fromArray( array );\n          break;\n\n        case 'rotate':\n          data.obj = new THREE.Vector3();\n          data.obj.fromArray( array );\n          data.angle = THREE.Math.degToRad( array[ 3 ] );\n          break;\n\n      }\n\n      return data;\n\n    }\n\n    // physics\n\n    function parsePhysicsModel( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'name' ) || '',\n        rigidBodies: {}\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'rigid_body':\n            data.rigidBodies[ child.getAttribute( 'name' ) ] = {};\n            parsePhysicsRigidBody( child, data.rigidBodies[ child.getAttribute( 'name' ) ] );\n            break;\n\n        }\n\n      }\n\n      library.physicsModels[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function parsePhysicsRigidBody( xml, data ) {\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'technique_common':\n            parsePhysicsTechniqueCommon( child, data );\n            break;\n\n        }\n\n      }\n\n    }\n\n    function parsePhysicsTechniqueCommon( xml, data ) {\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'inertia':\n            data.inertia = parseFloats( child.textContent );\n            break;\n\n          case 'mass':\n            data.mass = parseFloats( child.textContent )[ 0 ];\n            break;\n\n        }\n\n      }\n\n    }\n\n    // scene\n\n    function parseKinematicsScene( xml ) {\n\n      var data = {\n        bindJointAxis: []\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'bind_joint_axis':\n            data.bindJointAxis.push( parseKinematicsBindJointAxis( child ) );\n            break;\n\n        }\n\n      }\n\n      library.kinematicsScenes[ parseId( xml.getAttribute( 'url' ) ) ] = data;\n\n    }\n\n    function parseKinematicsBindJointAxis( xml ) {\n\n      var data = {\n        target: xml.getAttribute( 'target' ).split( '/' ).pop()\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'axis':\n            var param = child.getElementsByTagName( 'param' )[ 0 ];\n            data.axis = param.textContent;\n            var tmpJointIndex = data.axis.split( 'inst_' ).pop().split( 'axis' )[ 0 ];\n            data.jointIndex = tmpJointIndex.substr( 0, tmpJointIndex.length - 1 );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function buildKinematicsScene( data ) {\n\n      if ( data.build !== undefined ) return data.build;\n\n      return data;\n\n    }\n\n    function getKinematicsScene( id ) {\n\n      return getBuild( library.kinematicsScenes[ id ], buildKinematicsScene );\n\n    }\n\n    function setupKinematics() {\n\n      var kinematicsModelId = Object.keys( library.kinematicsModels )[ 0 ];\n      var kinematicsSceneId = Object.keys( library.kinematicsScenes )[ 0 ];\n      var visualSceneId = Object.keys( library.visualScenes )[ 0 ];\n\n      if ( kinematicsModelId === undefined || kinematicsSceneId === undefined ) return;\n\n      var kinematicsModel = getKinematicsModel( kinematicsModelId );\n      var kinematicsScene = getKinematicsScene( kinematicsSceneId );\n      var visualScene = getVisualScene( visualSceneId );\n\n      var bindJointAxis = kinematicsScene.bindJointAxis;\n      var jointMap = {};\n\n      for ( var i = 0, l = bindJointAxis.length; i < l; i ++ ) {\n\n        var axis = bindJointAxis[ i ];\n\n        // the result of the following query is an element of type 'translate', 'rotate','scale' or 'matrix'\n\n        var targetElement = collada.querySelector( '[sid=\"' + axis.target + '\"]' );\n\n        if ( targetElement ) {\n\n          // get the parent of the transfrom element\n\n          var parentVisualElement = targetElement.parentElement;\n\n          // connect the joint of the kinematics model with the element in the visual scene\n\n          connect( axis.jointIndex, parentVisualElement );\n\n        }\n\n      }\n\n      function connect( jointIndex, visualElement ) {\n\n        var visualElementName = visualElement.getAttribute( 'name' );\n        var joint = kinematicsModel.joints[ jointIndex ];\n\n        visualScene.traverse( function ( object ) {\n\n          if ( object.name === visualElementName ) {\n\n            jointMap[ jointIndex ] = {\n              object: object,\n              transforms: buildTransformList( visualElement ),\n              joint: joint,\n              position: joint.zeroPosition\n            };\n\n          }\n\n        } );\n\n      }\n\n      var m0 = new THREE.Matrix4();\n\n      kinematics = {\n\n        joints: kinematicsModel && kinematicsModel.joints,\n\n        getJointValue: function ( jointIndex ) {\n\n          var jointData = jointMap[ jointIndex ];\n\n          if ( jointData ) {\n\n            return jointData.position;\n\n          } else {\n\n            console.warn( 'THREE.ColladaLoader: Joint ' + jointIndex + ' doesn\\'t exist.' );\n\n          }\n\n        },\n\n        setJointValue: function ( jointIndex, value ) {\n\n          var jointData = jointMap[ jointIndex ];\n\n          if ( jointData ) {\n\n            var joint = jointData.joint;\n\n            if ( value > joint.limits.max || value < joint.limits.min ) {\n\n              console.warn( 'THREE.ColladaLoader: Joint ' + jointIndex + ' value ' + value + ' outside of limits (min: ' + joint.limits.min + ', max: ' + joint.limits.max + ').' );\n\n            } else if ( joint.static ) {\n\n              console.warn( 'THREE.ColladaLoader: Joint ' + jointIndex + ' is static.' );\n\n            } else {\n\n              var object = jointData.object;\n              var axis = joint.axis;\n              var transforms = jointData.transforms;\n\n              matrix.identity();\n\n              // each update, we have to apply all transforms in the correct order\n\n              for ( var i = 0; i < transforms.length; i ++ ) {\n\n                var transform = transforms[ i ];\n\n                // if there is a connection of the transform node with a joint, apply the joint value\n\n                if ( transform.sid && transform.sid.indexOf( jointIndex ) !== - 1 ) {\n\n                  switch ( joint.type ) {\n\n                    case 'revolute':\n                      matrix.multiply( m0.makeRotationAxis( axis, THREE.Math.degToRad( value ) ) );\n                      break;\n\n                    case 'prismatic':\n                      matrix.multiply( m0.makeTranslation( axis.x * value, axis.y * value, axis.z * value ) );\n                      break;\n\n                    default:\n                      console.warn( 'THREE.ColladaLoader: Unknown joint type: ' + joint.type );\n                      break;\n\n                  }\n\n                } else {\n\n                  switch ( transform.type ) {\n\n                    case 'matrix':\n                      matrix.multiply( transform.obj );\n                      break;\n\n                    case 'translate':\n                      matrix.multiply( m0.makeTranslation( transform.obj.x, transform.obj.y, transform.obj.z ) );\n                      break;\n\n                    case 'scale':\n                      matrix.scale( transform.obj );\n                      break;\n\n                    case 'rotate':\n                      matrix.multiply( m0.makeRotationAxis( transform.obj, transform.angle ) );\n                      break;\n\n                  }\n\n                }\n\n              }\n\n              object.matrix.copy( matrix );\n              object.matrix.decompose( object.position, object.quaternion, object.scale );\n\n              jointMap[ jointIndex ].position = value;\n\n            }\n\n          } else {\n\n            console.log( 'THREE.ColladaLoader: ' + jointIndex + ' does not exist.' );\n\n          }\n\n        }\n\n      };\n\n    }\n\n    function buildTransformList( node ) {\n\n      var transforms = [];\n\n      var xml = collada.querySelector( '[id=\"' + node.id + '\"]' );\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'matrix':\n            var array = parseFloats( child.textContent );\n            var matrix = new THREE.Matrix4().fromArray( array ).transpose();\n            transforms.push( {\n              sid: child.getAttribute( 'sid' ),\n              type: child.nodeName,\n              obj: matrix\n            } );\n            break;\n\n          case 'translate':\n          case 'scale':\n            var array = parseFloats( child.textContent );\n            var vector = new THREE.Vector3().fromArray( array );\n            transforms.push( {\n              sid: child.getAttribute( 'sid' ),\n              type: child.nodeName,\n              obj: vector\n            } );\n            break;\n\n          case 'rotate':\n            var array = parseFloats( child.textContent );\n            var vector = new THREE.Vector3().fromArray( array );\n            var angle = THREE.Math.degToRad( array[ 3 ] );\n            transforms.push( {\n              sid: child.getAttribute( 'sid' ),\n              type: child.nodeName,\n              obj: vector,\n              angle: angle\n            } );\n            break;\n\n        }\n\n      }\n\n      return transforms;\n\n    }\n\n    // nodes\n\n    function prepareNodes( xml ) {\n\n      var elements = xml.getElementsByTagName( 'node' );\n\n      // ensure all node elements have id attributes\n\n      for ( var i = 0; i < elements.length; i ++ ) {\n\n        var element = elements[ i ];\n\n        if ( element.hasAttribute( 'id' ) === false ) {\n\n          element.setAttribute( 'id', generateId() );\n\n        }\n\n      }\n\n    }\n\n    var matrix = new THREE.Matrix4();\n    var vector = new THREE.Vector3();\n\n    function parseNode( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'name' ) || '',\n        type: xml.getAttribute( 'type' ),\n        id: xml.getAttribute( 'id' ),\n        sid: xml.getAttribute( 'sid' ),\n        matrix: new THREE.Matrix4(),\n        nodes: [],\n        instanceCameras: [],\n        instanceControllers: [],\n        instanceLights: [],\n        instanceGeometries: [],\n        instanceNodes: [],\n        transforms: {}\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'node':\n            data.nodes.push( child.getAttribute( 'id' ) );\n            parseNode( child );\n            break;\n\n          case 'instance_camera':\n            data.instanceCameras.push( parseId( child.getAttribute( 'url' ) ) );\n            break;\n\n          case 'instance_controller':\n            data.instanceControllers.push( parseNodeInstance( child ) );\n            break;\n\n          case 'instance_light':\n            data.instanceLights.push( parseId( child.getAttribute( 'url' ) ) );\n            break;\n\n          case 'instance_geometry':\n            data.instanceGeometries.push( parseNodeInstance( child ) );\n            break;\n\n          case 'instance_node':\n            data.instanceNodes.push( parseId( child.getAttribute( 'url' ) ) );\n            break;\n\n          case 'matrix':\n            var array = parseFloats( child.textContent );\n            data.matrix.multiply( matrix.fromArray( array ).transpose() );\n            data.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;\n            break;\n\n          case 'translate':\n            var array = parseFloats( child.textContent );\n            vector.fromArray( array );\n            data.matrix.multiply( matrix.makeTranslation( vector.x, vector.y, vector.z ) );\n            data.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;\n            break;\n\n          case 'rotate':\n            var array = parseFloats( child.textContent );\n            var angle = THREE.Math.degToRad( array[ 3 ] );\n            data.matrix.multiply( matrix.makeRotationAxis( vector.fromArray( array ), angle ) );\n            data.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;\n            break;\n\n          case 'scale':\n            var array = parseFloats( child.textContent );\n            data.matrix.scale( vector.fromArray( array ) );\n            data.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;\n            break;\n\n          case 'extra':\n            break;\n\n          default:\n            console.log( child );\n\n        }\n\n      }\n\n      if ( hasNode( data.id ) ) {\n\n        console.warn( 'THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.', data.id );\n\n      } else {\n\n        library.nodes[ data.id ] = data;\n\n      }\n\n      return data;\n\n    }\n\n    function parseNodeInstance( xml ) {\n\n      var data = {\n        id: parseId( xml.getAttribute( 'url' ) ),\n        materials: {},\n        skeletons: []\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        switch ( child.nodeName ) {\n\n          case 'bind_material':\n            var instances = child.getElementsByTagName( 'instance_material' );\n\n            for ( var j = 0; j < instances.length; j ++ ) {\n\n              var instance = instances[ j ];\n              var symbol = instance.getAttribute( 'symbol' );\n              var target = instance.getAttribute( 'target' );\n\n              data.materials[ symbol ] = parseId( target );\n\n            }\n\n            break;\n\n          case 'skeleton':\n            data.skeletons.push( parseId( child.textContent ) );\n            break;\n\n          default:\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function buildSkeleton( skeletons, joints ) {\n\n      var boneData = [];\n      var sortedBoneData = [];\n\n      var i, j, data;\n\n      // a skeleton can have multiple root bones. collada expresses this\n      // situtation with multiple \"skeleton\" tags per controller instance\n\n      for ( i = 0; i < skeletons.length; i ++ ) {\n\n        var skeleton = skeletons[ i ];\n\n        var root;\n\n        if ( hasNode( skeleton ) ) {\n\n          root = getNode( skeleton );\n          buildBoneHierarchy( root, joints, boneData );\n\n        } else if ( hasVisualScene( skeleton ) ) {\n\n          // handle case where the skeleton refers to the visual scene (#13335)\n\n          var visualScene = library.visualScenes[ skeleton ];\n          var children = visualScene.children;\n\n          for ( var j = 0; j < children.length; j ++ ) {\n\n            var child = children[ j ];\n\n            if ( child.type === 'JOINT' ) {\n\n              var root = getNode( child.id );\n              buildBoneHierarchy( root, joints, boneData );\n\n            }\n\n          }\n\n        } else {\n\n          console.error( 'THREE.ColladaLoader: Unable to find root bone of skeleton with ID:', skeleton );\n\n        }\n\n      }\n\n      // sort bone data (the order is defined in the corresponding controller)\n\n      for ( i = 0; i < joints.length; i ++ ) {\n\n        for ( j = 0; j < boneData.length; j ++ ) {\n\n          data = boneData[ j ];\n\n          if ( data.bone.name === joints[ i ].name ) {\n\n            sortedBoneData[ i ] = data;\n            data.processed = true;\n            break;\n\n          }\n\n        }\n\n      }\n\n      // add unprocessed bone data at the end of the list\n\n      for ( i = 0; i < boneData.length; i ++ ) {\n\n        data = boneData[ i ];\n\n        if ( data.processed === false ) {\n\n          sortedBoneData.push( data );\n          data.processed = true;\n\n        }\n\n      }\n\n      // setup arrays for skeleton creation\n\n      var bones = [];\n      var boneInverses = [];\n\n      for ( i = 0; i < sortedBoneData.length; i ++ ) {\n\n        data = sortedBoneData[ i ];\n\n        bones.push( data.bone );\n        boneInverses.push( data.boneInverse );\n\n      }\n\n      return new THREE.Skeleton( bones, boneInverses );\n\n    }\n\n    function buildBoneHierarchy( root, joints, boneData ) {\n\n      // setup bone data from visual scene\n\n      root.traverse( function ( object ) {\n\n        if ( object.isBone === true ) {\n\n          var boneInverse;\n\n          // retrieve the boneInverse from the controller data\n\n          for ( var i = 0; i < joints.length; i ++ ) {\n\n            var joint = joints[ i ];\n\n            if ( joint.name === object.name ) {\n\n              boneInverse = joint.boneInverse;\n              break;\n\n            }\n\n          }\n\n          if ( boneInverse === undefined ) {\n\n            // Unfortunately, there can be joints in the visual scene that are not part of the\n            // corresponding controller. In this case, we have to create a dummy boneInverse matrix\n            // for the respective bone. This bone won't affect any vertices, because there are no skin indices\n            // and weights defined for it. But we still have to add the bone to the sorted bone list in order to\n            // ensure a correct animation of the model.\n\n            boneInverse = new THREE.Matrix4();\n\n          }\n\n          boneData.push( { bone: object, boneInverse: boneInverse, processed: false } );\n\n        }\n\n      } );\n\n    }\n\n    function buildNode( data ) {\n\n      var objects = [];\n\n      var matrix = data.matrix;\n      var nodes = data.nodes;\n      var type = data.type;\n      var instanceCameras = data.instanceCameras;\n      var instanceControllers = data.instanceControllers;\n      var instanceLights = data.instanceLights;\n      var instanceGeometries = data.instanceGeometries;\n      var instanceNodes = data.instanceNodes;\n\n      // nodes\n\n      for ( var i = 0, l = nodes.length; i < l; i ++ ) {\n\n        objects.push( getNode( nodes[ i ] ) );\n\n      }\n\n      // instance cameras\n\n      for ( var i = 0, l = instanceCameras.length; i < l; i ++ ) {\n\n        var instanceCamera = getCamera( instanceCameras[ i ] );\n\n        if ( instanceCamera !== null ) {\n\n          objects.push( instanceCamera.clone() );\n\n        }\n\n      }\n\n      // instance controllers\n\n      for ( var i = 0, l = instanceControllers.length; i < l; i ++ ) {\n\n        var instance = instanceControllers[ i ];\n        var controller = getController( instance.id );\n        var geometries = getGeometry( controller.id );\n        var newObjects = buildObjects( geometries, instance.materials );\n\n        var skeletons = instance.skeletons;\n        var joints = controller.skin.joints;\n\n        var skeleton = buildSkeleton( skeletons, joints );\n\n        for ( var j = 0, jl = newObjects.length; j < jl; j ++ ) {\n\n          var object = newObjects[ j ];\n\n          if ( object.isSkinnedMesh ) {\n\n            object.bind( skeleton, controller.skin.bindMatrix );\n            object.normalizeSkinWeights();\n\n          }\n\n          objects.push( object );\n\n        }\n\n      }\n\n      // instance lights\n\n      for ( var i = 0, l = instanceLights.length; i < l; i ++ ) {\n\n        var instanceLight = getLight( instanceLights[ i ] );\n\n        if ( instanceLight !== null ) {\n\n          objects.push( instanceLight.clone() );\n\n        }\n\n      }\n\n      // instance geometries\n\n      for ( var i = 0, l = instanceGeometries.length; i < l; i ++ ) {\n\n        var instance = instanceGeometries[ i ];\n\n        // a single geometry instance in collada can lead to multiple object3Ds.\n        // this is the case when primitives are combined like triangles and lines\n\n        var geometries = getGeometry( instance.id );\n        var newObjects = buildObjects( geometries, instance.materials );\n\n        for ( var j = 0, jl = newObjects.length; j < jl; j ++ ) {\n\n          objects.push( newObjects[ j ] );\n\n        }\n\n      }\n\n      // instance nodes\n\n      for ( var i = 0, l = instanceNodes.length; i < l; i ++ ) {\n\n        objects.push( getNode( instanceNodes[ i ] ).clone() );\n\n      }\n\n      var object;\n\n      if ( nodes.length === 0 && objects.length === 1 ) {\n\n        object = objects[ 0 ];\n\n      } else {\n\n        object = ( type === 'JOINT' ) ? new THREE.Bone() : new THREE.Group();\n\n        for ( var i = 0; i < objects.length; i ++ ) {\n\n          object.add( objects[ i ] );\n\n        }\n\n      }\n\n      if ( object.name === '' ) {\n\n        object.name = ( type === 'JOINT' ) ? data.sid : data.name;\n\n      }\n\n      object.matrix.copy( matrix );\n      object.matrix.decompose( object.position, object.quaternion, object.scale );\n\n      return object;\n\n    }\n\n    var fallbackMaterial = new THREE.MeshBasicMaterial( { color: 0xff00ff } );\n\n    function resolveMaterialBinding( keys, instanceMaterials ) {\n\n      var materials = [];\n\n      for ( var i = 0, l = keys.length; i < l; i ++ ) {\n\n        var id = instanceMaterials[ keys[ i ] ];\n\n        if ( id === undefined ) {\n\n          console.warn( 'THREE.ColladaLoader: Material with key %s not found. Apply fallback material.', keys[ i ] );\n          materials.push( fallbackMaterial );\n\n        } else {\n\n          materials.push( getMaterial( id ) );\n\n        }\n\n      }\n\n      return materials;\n\n    }\n\n    function buildObjects( geometries, instanceMaterials ) {\n\n      var objects = [];\n\n      for ( var type in geometries ) {\n\n        var geometry = geometries[ type ];\n\n        var materials = resolveMaterialBinding( geometry.materialKeys, instanceMaterials );\n\n        // handle case if no materials are defined\n\n        if ( materials.length === 0 ) {\n\n          if ( type === 'lines' || type === 'linestrips' ) {\n\n            materials.push( new THREE.LineBasicMaterial() );\n\n          } else {\n\n            materials.push( new THREE.MeshPhongMaterial() );\n\n          }\n\n        }\n\n        // regard skinning\n\n        var skinning = ( geometry.data.attributes.skinIndex !== undefined );\n\n        if ( skinning ) {\n\n          for ( var i = 0, l = materials.length; i < l; i ++ ) {\n\n            materials[ i ].skinning = true;\n\n          }\n\n        }\n\n        // choose between a single or multi materials (material array)\n\n        var material = ( materials.length === 1 ) ? materials[ 0 ] : materials;\n\n        // now create a specific 3D object\n\n        var object;\n\n        switch ( type ) {\n\n          case 'lines':\n            object = new THREE.LineSegments( geometry.data, material );\n            break;\n\n          case 'linestrips':\n            object = new THREE.Line( geometry.data, material );\n            break;\n\n          case 'triangles':\n          case 'polylist':\n            if ( skinning ) {\n\n              object = new THREE.SkinnedMesh( geometry.data, material );\n\n            } else {\n\n              object = new THREE.Mesh( geometry.data, material );\n\n            }\n            break;\n\n        }\n\n        objects.push( object );\n\n      }\n\n      return objects;\n\n    }\n\n    function hasNode( id ) {\n\n      return library.nodes[ id ] !== undefined;\n\n    }\n\n    function getNode( id ) {\n\n      return getBuild( library.nodes[ id ], buildNode );\n\n    }\n\n    // visual scenes\n\n    function parseVisualScene( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'name' ),\n        children: []\n      };\n\n      prepareNodes( xml );\n\n      var elements = getElementsByTagName( xml, 'node' );\n\n      for ( var i = 0; i < elements.length; i ++ ) {\n\n        data.children.push( parseNode( elements[ i ] ) );\n\n      }\n\n      library.visualScenes[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function buildVisualScene( data ) {\n\n      var group = new THREE.Group();\n      group.name = data.name;\n\n      var children = data.children;\n\n      for ( var i = 0; i < children.length; i ++ ) {\n\n        var child = children[ i ];\n\n        group.add( getNode( child.id ) );\n\n      }\n\n      return group;\n\n    }\n\n    function hasVisualScene( id ) {\n\n      return library.visualScenes[ id ] !== undefined;\n\n    }\n\n    function getVisualScene( id ) {\n\n      return getBuild( library.visualScenes[ id ], buildVisualScene );\n\n    }\n\n    // scenes\n\n    function parseScene( xml ) {\n\n      var instance = getElementsByTagName( xml, 'instance_visual_scene' )[ 0 ];\n      return getVisualScene( parseId( instance.getAttribute( 'url' ) ) );\n\n    }\n\n    function setupAnimations() {\n\n      var clips = library.clips;\n\n      if ( isEmpty( clips ) === true ) {\n\n        if ( isEmpty( library.animations ) === false ) {\n\n          // if there are animations but no clips, we create a default clip for playback\n\n          var tracks = [];\n\n          for ( var id in library.animations ) {\n\n            var animationTracks = getAnimation( id );\n\n            for ( var i = 0, l = animationTracks.length; i < l; i ++ ) {\n\n              tracks.push( animationTracks[ i ] );\n\n            }\n\n          }\n\n          animations.push( new THREE.AnimationClip( 'default', - 1, tracks ) );\n\n        }\n\n      } else {\n\n        for ( var id in clips ) {\n\n          animations.push( getAnimationClip( id ) );\n\n        }\n\n      }\n\n    }\n\n    if ( text.length === 0 ) {\n\n      return { scene: new THREE.Scene() };\n\n    }\n\n    var xml = new DOMParser().parseFromString( text, 'application/xml' );\n\n    var collada = getElementsByTagName( xml, 'COLLADA' )[ 0 ];\n\n    // metadata\n\n    var version = collada.getAttribute( 'version' );\n    console.log( 'THREE.ColladaLoader: File version', version );\n\n    var asset = parseAsset( getElementsByTagName( collada, 'asset' )[ 0 ] );\n    var textureLoader = new THREE.TextureLoader( this.manager );\n    textureLoader.setPath( this.resourcePath || path ).setCrossOrigin( this.crossOrigin );\n\n    var tgaLoader;\n\n    if ( THREE.TGALoader ) {\n\n      tgaLoader = new THREE.TGALoader( this.manager );\n      tgaLoader.setPath( this.resourcePath || path );\n\n    }\n\n    //\n\n    var animations = [];\n    var kinematics = {};\n    var count = 0;\n\n    //\n\n    var library = {\n      animations: {},\n      clips: {},\n      controllers: {},\n      images: {},\n      effects: {},\n      materials: {},\n      cameras: {},\n      lights: {},\n      geometries: {},\n      nodes: {},\n      visualScenes: {},\n      kinematicsModels: {},\n      physicsModels: {},\n      kinematicsScenes: {}\n    };\n\n    parseLibrary( collada, 'library_animations', 'animation', parseAnimation );\n    parseLibrary( collada, 'library_animation_clips', 'animation_clip', parseAnimationClip );\n    parseLibrary( collada, 'library_controllers', 'controller', parseController );\n    parseLibrary( collada, 'library_images', 'image', parseImage );\n    parseLibrary( collada, 'library_effects', 'effect', parseEffect );\n    parseLibrary( collada, 'library_materials', 'material', parseMaterial );\n    parseLibrary( collada, 'library_cameras', 'camera', parseCamera );\n    parseLibrary( collada, 'library_lights', 'light', parseLight );\n    parseLibrary( collada, 'library_geometries', 'geometry', parseGeometry );\n    parseLibrary( collada, 'library_nodes', 'node', parseNode );\n    parseLibrary( collada, 'library_visual_scenes', 'visual_scene', parseVisualScene );\n    parseLibrary( collada, 'library_kinematics_models', 'kinematics_model', parseKinematicsModel );\n    parseLibrary( collada, 'library_physics_models', 'physics_model', parsePhysicsModel );\n    parseLibrary( collada, 'scene', 'instance_kinematics_scene', parseKinematicsScene );\n\n    buildLibrary( library.animations, buildAnimation );\n    buildLibrary( library.clips, buildAnimationClip );\n    buildLibrary( library.controllers, buildController );\n    buildLibrary( library.images, buildImage );\n    buildLibrary( library.effects, buildEffect );\n    buildLibrary( library.materials, buildMaterial );\n    buildLibrary( library.cameras, buildCamera );\n    buildLibrary( library.lights, buildLight );\n    buildLibrary( library.geometries, buildGeometry );\n    buildLibrary( library.visualScenes, buildVisualScene );\n\n    setupAnimations();\n    setupKinematics();\n\n    var scene = parseScene( getElementsByTagName( collada, 'scene' )[ 0 ] );\n\n    if ( asset.upAxis === 'Z_UP' ) {\n\n      scene.quaternion.setFromEuler( new THREE.Euler( - Math.PI / 2, 0, 0 ) );\n\n    }\n\n    scene.scale.multiplyScalar( asset.unit );\n\n    return {\n      animations: animations,\n      kinematics: kinematics,\n      library: library,\n      scene: scene\n    };\n\n  }\n\n};\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Score.vue?vue&type=style&index=0&id=3303d8f8&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Score.vue?vue&type=style&index=0&id=3303d8f8&lang=scss&scoped=true&\"","THREE.FBXLoader = require('../../lib/FBXLoader');\n\n/**\n * fbx-model\n *\n * Loader for FBX format. Supports ASCII, but *not* binary, models.\n */\nmodule.exports = AFRAME.registerComponent('fbx-model', {\n  schema: {\n    src:         { type: 'asset' },\n    crossorigin: { default: '' }\n  },\n\n  init: function () {\n    this.model = null;\n  },\n\n  update: function () {\n    const data = this.data;\n    if (!data.src) return;\n\n    this.remove();\n    const loader = new THREE.FBXLoader();\n    if (data.crossorigin) loader.setCrossOrigin(data.crossorigin);\n    loader.load(data.src, this.load.bind(this));\n  },\n\n  load: function (model) {\n    this.model = model;\n    this.el.setObject3D('mesh', model);\n    this.el.emit('model-loaded', {format: 'fbx', model: model});\n  },\n\n  remove: function () {\n    if (this.model) this.el.removeObject3D('mesh');\n  }\n});\n","/**\n * object-model\n *\n * Loader for THREE.js JSON format. Somewhat confusingly, there are two different THREE.js formats,\n * both having the .json extension. This loader supports only THREE.ObjectLoader, which typically\n * includes multiple meshes or an entire scene.\n *\n * Check the console for errors, if in doubt. You may need to use `json-model` or\n * `blend-character-model` for some .js and .json files.\n *\n * See: https://clara.io/learn/user-guide/data_exchange/threejs_export\n */\nmodule.exports = AFRAME.registerComponent('object-model', {\n  schema: {\n    src:         { type: 'asset' },\n    crossorigin: { default: '' }\n  },\n\n  init: function () {\n    this.model = null;\n  },\n\n  update: function () {\n    let loader;\n    const data = this.data;\n    if (!data.src) return;\n\n    this.remove();\n    loader = new THREE.ObjectLoader();\n    if (data.crossorigin) loader.setCrossOrigin(data.crossorigin);\n    loader.load(data.src, (object) => {\n\n      // Enable skinning, if applicable.\n      object.traverse((o) => {\n        if (o instanceof THREE.SkinnedMesh && o.material) {\n          o.material.skinning = !!((o.geometry && o.geometry.bones) || []).length;\n        }\n      });\n\n      this.load(object);\n    });\n  },\n\n  load: function (model) {\n    this.model = model;\n    this.el.setObject3D('mesh', model);\n    this.el.emit('model-loaded', {format: 'json', model: model});\n  },\n\n  remove: function () {\n    if (this.model) this.el.removeObject3D('mesh');\n  }\n});\n","/**\n * Flat grid.\n *\n * Defaults to 75x75.\n */\nmodule.exports = AFRAME.registerPrimitive('a-grid', {\n  defaultComponents: {\n    geometry: {\n      primitive: 'plane',\n      width: 75,\n      height: 75\n    },\n    rotation: {x: -90, y: 0, z: 0},\n    material: {\n      src: 'url(https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v1.16.3/assets/grid.png)',\n      repeat: '75 75'\n    }\n  },\n  mappings: {\n    width: 'geometry.width',\n    height: 'geometry.height',\n    src: 'material.src'\n  }\n});\n","/**\n * Recursively applies a MeshNormalMaterial to the entity, such that\n * face colors are determined by their orientation. Helpful for\n * debugging geometry\n */\nmodule.exports = AFRAME.registerComponent('normal-material', {\n  init: function () {\n    this.material = new THREE.MeshNormalMaterial({flatShading: true});\n    this.applyMaterial = this.applyMaterial.bind(this);\n    this.el.addEventListener('object3dset', this.applyMaterial);\n  },\n\n  remove: function () {\n    this.el.removeEventListener('object3dset', this.applyMaterial);\n  },\n\n  applyMaterial: function () {\n    this.el.object3D.traverse((node) => {\n      if (node.isMesh) node.material = this.material;\n    });\n  }\n});\n","const EPS = 0.1;\n\nmodule.exports = AFRAME.registerComponent('checkpoint-controls', {\n  schema: {\n    enabled: {default: true},\n    mode: {default: 'teleport', oneOf: ['teleport', 'animate']},\n    animateSpeed: {default: 3.0}\n  },\n\n  init: function () {\n    this.active = true;\n    this.checkpoint = null;\n\n    this.isNavMeshConstrained = false;\n\n    this.offset = new THREE.Vector3();\n    this.position = new THREE.Vector3();\n    this.targetPosition = new THREE.Vector3();\n  },\n\n  play: function () { this.active = true; },\n  pause: function () { this.active = false; },\n\n  setCheckpoint: function (checkpoint) {\n    const el = this.el;\n\n    if (!this.active) return;\n    if (this.checkpoint === checkpoint) return;\n\n    if (this.checkpoint) {\n      el.emit('navigation-end', {checkpoint: this.checkpoint});\n    }\n\n    this.checkpoint = checkpoint;\n    this.sync();\n\n    // Ignore new checkpoint if we're already there.\n    if (this.position.distanceTo(this.targetPosition) < EPS) {\n      this.checkpoint = null;\n      return;\n    }\n\n    el.emit('navigation-start', {checkpoint: checkpoint});\n\n    if (this.data.mode === 'teleport') {\n      this.el.setAttribute('position', this.targetPosition);\n      this.checkpoint = null;\n      el.emit('navigation-end', {checkpoint: checkpoint});\n      el.components['movement-controls'].updateNavLocation();\n    }\n  },\n\n  isVelocityActive: function () {\n    return !!(this.active && this.checkpoint);\n  },\n\n  getVelocity: function () {\n    if (!this.active) return;\n\n    const data = this.data;\n    const offset = this.offset;\n    const position = this.position;\n    const targetPosition = this.targetPosition;\n    const checkpoint = this.checkpoint;\n\n    this.sync();\n    if (position.distanceTo(targetPosition) < EPS) {\n      this.checkpoint = null;\n      this.el.emit('navigation-end', {checkpoint: checkpoint});\n      return offset.set(0, 0, 0);\n    }\n    offset.setLength(data.animateSpeed);\n    return offset;\n  },\n\n  sync: function () {\n    const offset = this.offset;\n    const position = this.position;\n    const targetPosition = this.targetPosition;\n\n    position.copy(this.el.getAttribute('position'));\n    this.checkpoint.object3D.getWorldPosition(targetPosition);\n    targetPosition.add(this.checkpoint.components.checkpoint.getOffset());\n    offset.copy(targetPosition).sub(position);\n  }\n});\n","const vg = require('../../lib/hex-grid.min.js');\nconst defaultHexGrid = require('../../lib/default-hex-grid');\n\n/**\n * Hex grid.\n */\nmodule.exports.Primitive = AFRAME.registerPrimitive('a-hexgrid', {\n  defaultComponents: {\n    'hexgrid': {}\n  },\n  mappings: {\n    src: 'hexgrid.src'\n  }\n});\n\nmodule.exports.Component = AFRAME.registerComponent('hexgrid', {\n  dependencies: ['material'],\n  schema: {\n    src: {type: 'asset'}\n  },\n  init: function () {\n    const data = this.data;\n    if (data.src) {\n      fetch(data.src)\n        .then((response) => response.json())\n        .then((json) => this.addMesh(json));\n    } else {\n      this.addMesh(defaultHexGrid);\n    }\n  },\n  addMesh: function (json) {\n    const grid = new vg.HexGrid();\n    grid.fromJSON(json);\n    const board = new vg.Board(grid);\n    board.generateTilemap();\n    this.el.setObject3D('mesh', board.group);\n    this.addMaterial();\n  },\n  addMaterial: function () {\n    const materialComponent = this.el.components.material;\n    const material = (materialComponent || {}).material;\n    if (!material) return;\n    this.el.object3D.traverse((node) => {\n      if (node.isMesh) {\n        node.material = material;\n      }\n    });\n  },\n  remove: function () {\n    this.el.removeObject3D('mesh');\n  }\n});\n","module.exports = {\n  \"size\": 5,\n  \"cellSize\": 10,\n  \"extrudeSettings\": {\n    \"amount\": 1,\n    \"bevelEnabled\": true,\n    \"bevelSegments\": 1,\n    \"steps\": 1,\n    \"bevelSize\": 0.5,\n    \"bevelThickness\": 0.5\n  },\n  \"autogenerated\": true,\n  \"cells\": [\n    {\n      \"q\": -1,\n      \"r\": 0,\n      \"s\": 1,\n      \"h\": 1,\n      \"walkable\": true,\n      \"userData\": {}\n    },\n    {\n      \"q\": 0,\n      \"r\": -1,\n      \"s\": 1,\n      \"h\": 1,\n      \"walkable\": true,\n      \"userData\": {}\n    },\n    {\n      \"q\": 0,\n      \"r\": 0,\n      \"s\": 0,\n      \"h\": 1,\n      \"walkable\": true,\n      \"userData\": {}\n    },\n    {\n      \"q\": 1,\n      \"r\": -1,\n      \"s\": 0,\n      \"h\": 1,\n      \"walkable\": true,\n      \"userData\": {}\n    },\n    {\n      \"q\": -1,\n      \"r\": 1,\n      \"s\": 0,\n      \"h\": 0,\n      \"walkable\": true,\n      \"userData\": {}\n    },\n    {\n      \"q\": 0,\n      \"r\": 1,\n      \"s\": -1,\n      \"h\": 0,\n      \"walkable\": true,\n      \"userData\": {}\n    },\n    {\n      \"q\": 1,\n      \"r\": 0,\n      \"s\": -1,\n      \"h\": 0,\n      \"walkable\": true,\n      \"userData\": {}\n    }]\n};\n","/**\n * Source: https://github.com/Adobe-Marketing-Cloud/fetch-script\n */\n\nfunction getScriptId() {\n  return 'script_' + Date.now() + '_' + Math.ceil(Math.random() * 100000);\n}\n\nfunction createScript(url, id) {\n  var script = document.createElement('script');\n  script.type = 'text/javascript';\n  script.async = true;\n  script.id = id;\n  script.src = url;\n\n  return script;\n}\n\nfunction removeScript(id) {\n  const script = document.getElementById(id);\n  const parent = script.parentNode;\n\n  try {\n    parent && parent.removeChild(script);\n  } catch (e) {\n    // ignore\n  }\n}\n\nfunction appendScript(script) {\n  const firstScript = document.getElementsByTagName('script')[0];\n  firstScript.parentNode.insertBefore(script, firstScript);\n}\n\nfunction fetchScriptInternal(url, options, Promise) {\n  return new Promise(function(resolve, reject) {\n    const timeout = options.timeout || 5000;\n    const scriptId = getScriptId();\n    const script = createScript(url, scriptId);\n\n    const timeoutId = setTimeout(function() {\n      reject(new Error('Script request to ' + url + ' timed out'));\n\n      removeScript(scriptId);\n    }, timeout);\n\n    const disableTimeout = function(timeoutId) { clearTimeout(timeoutId); };\n\n    script.addEventListener('load', function(e) {\n      resolve({ok: true});\n\n      disableTimeout(timeoutId);\n      removeScript(scriptId);\n    });\n\n    script.addEventListener('error', function(e) {\n      reject(new Error('Script request to ' + url + ' failed ' + e));\n\n      disableTimeout(timeoutId);\n      removeScript(scriptId);\n    });\n\n    appendScript(script);\n  });\n}\n\nfunction fetchScript(settings) {\n  settings = settings || {};\n  return function (url, options) {\n    options = options || {};\n    return fetchScriptInternal(url, options, settings.Promise || Promise);\n  };\n}\n\nmodule.exports = fetchScript;\n","const ACCEL_G = -9.8, // m/s^2\n    EASING = -15; // m/s^2\n\n/**\n * Jump ability.\n */\nmodule.exports = AFRAME.registerComponent('jump-ability', {\n  dependencies: ['velocity'],\n\n  /* Schema\n  */\n\n  schema: {\n    on: { default: 'keydown:Space gamepadbuttondown:0' },\n    playerHeight: { default: 1.764 },\n    maxJumps: { default: 1 },\n    distance: { default: 5 },\n    debug: { default: false }\n  },\n\n  init: function () {\n    this.velocity = 0;\n    this.numJumps = 0;\n\n    const beginJump = this.beginJump.bind(this),\n        events = this.data.on.split(' ');\n    this.bindings = {};\n    for (let i = 0; i <  events.length; i++) {\n      this.bindings[events[i]] = beginJump;\n      this.el.addEventListener(events[i], beginJump);\n    }\n    this.bindings.collide = this.onCollide.bind(this);\n    this.el.addEventListener('collide', this.bindings.collide);\n  },\n\n  remove: function () {\n    for (var event in this.bindings) {\n      if (this.bindings.hasOwnProperty(event)) {\n        this.el.removeEventListener(event, this.bindings[event]);\n        delete this.bindings[event];\n      }\n    }\n    this.el.removeEventListener('collide', this.bindings.collide);\n    delete this.bindings.collide;\n  },\n\n  beginJump: function () {\n    if (this.numJumps < this.data.maxJumps) {\n      const data = this.data,\n          initialVelocity = Math.sqrt(-2 * data.distance * (ACCEL_G + EASING)),\n          v = this.el.getAttribute('velocity');\n      this.el.setAttribute('velocity', {x: v.x, y: initialVelocity, z: v.z});\n      this.numJumps++;\n      this.el.emit('jumpstart');\n    }\n  },\n\n  onCollide: function () {\n    if (this.numJumps > 0) this.el.emit('jumpend');\n    this.numJumps = 0;\n  }\n});\n","/**\n * Touch-to-move-forward controls for mobile.\n */\nmodule.exports = AFRAME.registerComponent('touch-controls', {\n  schema: {\n    enabled: { default: true },\n    reverseEnabled: { default: true }\n  },\n\n  init: function () {\n    this.dVelocity = new THREE.Vector3();\n    this.bindMethods();\n    this.direction = 0;\n  },\n\n  play: function () {\n    this.addEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.dVelocity.set(0, 0, 0);\n  },\n\n  remove: function () {\n    this.pause();\n  },\n\n  addEventListeners: function () {\n    const sceneEl = this.el.sceneEl;\n    const canvasEl = sceneEl.canvas;\n\n    if (!canvasEl) {\n      sceneEl.addEventListener('render-target-loaded', this.addEventListeners.bind(this));\n      return;\n    }\n\n    canvasEl.addEventListener('touchstart', this.onTouchStart);\n    canvasEl.addEventListener('touchend', this.onTouchEnd);\n  },\n\n  removeEventListeners: function () {\n    const canvasEl = this.el.sceneEl && this.el.sceneEl.canvas;\n    if (!canvasEl) { return; }\n\n    canvasEl.removeEventListener('touchstart', this.onTouchStart);\n    canvasEl.removeEventListener('touchend', this.onTouchEnd);\n  },\n\n  isVelocityActive: function () {\n    return this.data.enabled && !!this.direction;\n  },\n\n  getVelocityDelta: function () {\n    this.dVelocity.z = this.direction;\n    return this.dVelocity.clone();\n  },\n\n  bindMethods: function () {\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n  },\n\n  onTouchStart: function (e) {\n    this.direction = -1;\n    if (this.data.reverseEnabled && e.touches.length === 2) {\n      this.direction = 1;\n    }\n    e.preventDefault();\n  },\n\n  onTouchEnd: function (e) {\n    this.direction = 0;\n    e.preventDefault();\n  }\n});\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Timer.vue?vue&type=style&index=0&id=51649b1d&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Timer.vue?vue&type=style&index=0&id=51649b1d&lang=scss&scoped=true&\""],"sourceRoot":""}